"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[859],{859:(m,f,e)=>{e.r(f),e.d(f,{VendorNotificationsComponent:()=>I});var l=e(177),d=e(8147),h=e(8325),t=e(7019),b=e(5312),u=e(1626);let c=(()=>{class i{constructor(n){this._HttpClient=n,this.baseUrl=b.c.baseURL}getAllNotifivationsCount(n){return this._HttpClient.get(`${this.baseUrl}/v1/vendor-notifications-summary/${n}/`)}getUnreadNotifivations(n){return this._HttpClient.get(`${this.baseUrl}/v1/vendor-notifications-unseen/${n}/`)}getAllReadNotifivations(n){return this._HttpClient.get(`${this.baseUrl}/v1/vendor-notifications-seen/${n}/`)}markAsRead(n,o){return this._HttpClient.get(`${this.baseUrl}/v1/vendor-notifications-mark-as-seen/${n}/${o}/`)}static{this.\u0275fac=function(o){return new(o||i)(t.KVO(u.Qq))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var g=e(3664);function p(i,s){if(1&i){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2,"new order from : "),t.j41(3,"span",24),t.EFF(4),t.k0s()(),t.j41(5,"td"),t.EFF(6,"you have got a new order for "),t.j41(7,"span",24),t.EFF(8),t.k0s()(),t.j41(9,"td"),t.EFF(10,"Un Read "),t.nrm(11,"i",25),t.k0s(),t.j41(12,"td"),t.EFF(13),t.nI1(14,"slice"),t.k0s(),t.j41(15,"td")(16,"button",26),t.bIt("click",function(){const a=t.eBV(n).$implicit,$=t.XpG(3);return t.Njj($.markAsRead(a.id))}),t.nrm(17,"i",27),t.k0s()()()}if(2&i){const n=s.$implicit;t.R7$(4),t.JRh(null==n||null==n.order?null:n.order.full_name),t.R7$(4),t.JRh(null==n||null==n.order_item||null==n.order_item.product?null:n.order_item.product.slug),t.R7$(5),t.JRh(t.brH(14,3,n.date,0,10))}}function _(i,s){if(1&i&&(t.j41(0,"table",22)(1,"thead")(2,"tr")(3,"th"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"th"),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"th"),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"th"),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.j41(15,"th"),t.EFF(16),t.nI1(17,"translate"),t.k0s()()(),t.j41(18,"tbody"),t.DNE(19,p,18,7,"tr",23),t.k0s()()),2&i){const n=t.XpG(2);t.Y8G("dir",n.isArabic()?"rtl":"ltr"),t.R7$(4),t.JRh(t.bMT(5,7,"dashboard.Type")),t.R7$(3),t.JRh(t.bMT(8,9,"dashboard.Message")),t.R7$(3),t.JRh(t.bMT(11,11,"dashboard.Status")),t.R7$(3),t.JRh(t.bMT(14,13,"dashboard.Date")),t.R7$(3),t.JRh(t.bMT(17,15,"dashboard.Action")),t.R7$(3),t.Y8G("ngForOf",n.vendorUnreadNotifications)}}function v(i,s){if(1&i&&(t.j41(0,"div",28)(1,"p",29),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"img",30),t.k0s()()),2&i){const n=t.XpG(2);t.Y8G("dir",n.isArabic()?"rtl":"ltr")("lang",n.isArabic()?"ar":"en"),t.R7$(2),t.SpI("",t.bMT(3,3,"dashboard.No notifications exist")," ")}}function R(i,s){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2,"new order "),t.j41(3,"span",24),t.EFF(4),t.k0s()(),t.j41(5,"td"),t.EFF(6,"you have got a new order for "),t.j41(7,"span",24),t.EFF(8),t.k0s()(),t.j41(9,"td"),t.EFF(10,"Read "),t.nrm(11,"i",32),t.k0s(),t.j41(12,"td"),t.EFF(13),t.nI1(14,"slice"),t.k0s()()),2&i){const n=s.$implicit;t.R7$(4),t.JRh(n.order_item.oid),t.R7$(4),t.JRh(n.order_item.product.slug),t.R7$(5),t.JRh(t.brH(14,3,n.date,0,10))}}function F(i,s){if(1&i&&(t.j41(0,"table",22)(1,"thead",31)(2,"tr")(3,"th"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"th"),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"th"),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"th"),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,R,15,7,"tr",23),t.k0s()()),2&i){const n=t.XpG(2);t.Y8G("dir",n.isArabic()?"rtl":"ltr"),t.R7$(4),t.JRh(t.bMT(5,6,"dashboard.Type")),t.R7$(3),t.JRh(t.bMT(8,8,"dashboard.Message")),t.R7$(3),t.JRh(t.bMT(11,10,"dashboard.Status")),t.R7$(3),t.JRh(t.bMT(14,12,"dashboard.Date")),t.R7$(3),t.Y8G("ngForOf",n.vendorReadNotifications)}}function N(i,s){1&i&&(t.j41(0,"div",33)(1,"p",29),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"img",30),t.k0s()()),2&i&&(t.R7$(2),t.SpI("",t.bMT(3,1,"dashboard.No notifications exist")," "))}function k(i,s){if(1&i){const n=t.RV6();t.j41(0,"section",2)(1,"div",3)(2,"h1",4),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"P",8),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"P",9),t.EFF(12),t.k0s()()(),t.j41(13,"div",6)(14,"div",7)(15,"P",8),t.EFF(16),t.nI1(17,"translate"),t.k0s(),t.j41(18,"P",9),t.EFF(19),t.k0s()()(),t.j41(20,"div",6)(21,"div",7)(22,"P",8),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.j41(25,"P",9),t.EFF(26),t.k0s()()()(),t.nrm(27,"hr",10),t.DNE(28,_,20,17,"table",11),t.DNE(29,v,5,5,"div",12),t.j41(30,"button",13),t.bIt("click",function(){t.eBV(n);const r=t.sdS(34),a=t.XpG();return t.Njj(a.viewAllReadNoti(r))}),t.EFF(31),t.nI1(32,"translate"),t.k0s(),t.j41(33,"div",14,15)(35,"div",16)(36,"div",17)(37,"h2",18),t.EFF(38),t.nI1(39,"translate"),t.k0s(),t.j41(40,"i",19),t.bIt("click",function(){t.eBV(n);const r=t.sdS(34),a=t.XpG();return t.Njj(a.closeLayer(r))}),t.k0s()(),t.DNE(41,F,17,14,"table",20),t.DNE(42,N,5,3,"div",21),t.k0s()()()()}if(2&i){const n=t.XpG();t.R7$(2),t.Y8G("dir",n.isArabic()?"rtl":"ltr")("lang",n.isArabic()?"ar":"en"),t.R7$(1),t.JRh(t.bMT(4,18,"dashboard.Notifications")),t.R7$(2),t.Y8G("dir",n.isArabic()?"rtl":"ltr")("lang",n.isArabic()?"ar":"en"),t.R7$(4),t.JRh(t.bMT(10,20,"dashboard.Unread Notifications")),t.R7$(3),t.JRh(n.vendorNotificationsCount.un_read_noti),t.R7$(4),t.JRh(t.bMT(17,22,"dashboard.Read Notifications")),t.R7$(3),t.JRh(n.vendorNotificationsCount.read_noti),t.R7$(4),t.JRh(t.bMT(24,24,"dashboard.All Notifications")),t.R7$(3),t.JRh(n.vendorNotificationsCount.all_noti),t.R7$(2),t.Y8G("ngIf",n.vendorUnreadNotifications.length>0),t.R7$(1),t.Y8G("ngIf",0==n.vendorUnreadNotifications.length),t.R7$(2),t.JRh(t.bMT(32,26,"dashboard.All Read Notifications")),t.R7$(5),t.Y8G("dir",n.isArabic()?"rtl":"ltr"),t.R7$(2),t.JRh(t.bMT(39,28,"dashboard.All Read Notifications")),t.R7$(3),t.Y8G("ngIf",n.vendorReadNotifications.length>0),t.R7$(1),t.Y8G("ngIf",0==n.vendorReadNotifications.length)}}function E(i,s){1&i&&(t.j41(0,"div",34),t.nrm(1,"app-loading"),t.k0s())}let I=(()=>{class i{constructor(n,o,r,a){this._VendorNotificationsService=n,this._Renderer2=o,this._AuthService=r,this.translate=a,this.vendorNotificationsCount={},this.vendorUnreadNotifications=[],this.vendorReadNotifications=[],this.vendorId=0,this.loading=!0}getAllNotifications(){this.loading=!0,this._VendorNotificationsService.getAllNotifivationsCount(this.vendorId).subscribe({next:n=>{console.log(n),this.vendorNotificationsCount=n[0],this.loading=!1},error:n=>{console.log(n)}})}getUnreadNotifications(){this.loading=!0,this._VendorNotificationsService.getUnreadNotifivations(this.vendorId).subscribe({next:n=>{console.log(n),this.vendorUnreadNotifications=n,this.loading=!1},error:n=>{console.log(n)}})}getReadNotifications(){this._VendorNotificationsService.getAllReadNotifivations(this.vendorId).subscribe({next:n=>{console.log(n),this.vendorReadNotifications=n},error:n=>{console.log(n)}})}ngOnInit(){this._AuthService.decodeToken(),this.vendorId=this._AuthService.userInfo.vendor_id,this.getAllNotifications(),this.getUnreadNotifications()}closeLayer(n){this._Renderer2.addClass(n,"d-none")}viewAllReadNoti(n){this._Renderer2.removeClass(n,"d-none"),this.getReadNotifications()}markAsRead(n){this.loading=!0,this._VendorNotificationsService.markAsRead(this.vendorId,n).subscribe({next:o=>{console.log(o),this.getAllNotifications(),this.getUnreadNotifications(),this.loading=!1},error:o=>{console.log(o),console.log(this._AuthService.userInfo)}})}isArabic(){return"ar"===this.translate.currentLang}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(c),t.rXU(t.sFG),t.rXU(g.u),t.rXU(d.c$))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-vendor-notifications"]],standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[["class","py-5",4,"ngIf","ngIfElse"],["notload",""],[1,"py-5"],[1,"container"],[3,"dir","lang"],[1,"row",3,"dir","lang"],[1,"col-sm-4"],[1,"bg-white","shadow","p-4","rounded-3"],[1,"mb-4"],[1,"h2"],[1,"my-3"],["class","table align-middle",3,"dir",4,"ngIf"],["class","p-3 rounded-2 shadow my-3",3,"dir","lang",4,"ngIf"],[1,"btn","btn-main",3,"click"],[1,"layer","position-fixed","top-0","bottom-0","start-0","end-0","d-flex","justify-content-center","align-items-start","d-none"],["layer",""],[1,"couponData","bg-main-light","p-4","mt-5","rounded-2","overflow-auto"],[1,"d-flex","justify-content-between","align-items-center","mb-3",3,"dir"],[1,"h5"],["role","button",1,"fa","fa-solid","fa-close","fa-x",3,"click"],["class","table align-middle ",3,"dir",4,"ngIf"],["class","p-3 rounded-2 shadow",4,"ngIf"],[1,"table","align-middle",3,"dir"],[4,"ngFor","ngForOf"],[1,"fw-bold"],[1,"fa-solid","fa-eye-slash","ms-2"],[1,"btn","btn-secondary","align-middle",3,"click"],[1,"fa-solid","fa-eye"],[1,"p-3","rounded-2","shadow","my-3",3,"dir","lang"],[1,"h3","text-prim","text-center"],["src","./assets/notification.png","alt","","height","50"],[1,"table-dark"],[1,"fa-solid","fa-eye-slash","ms-1"],[1,"p-3","rounded-2","shadow"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(o,r){if(1&o&&(t.DNE(0,k,43,30,"section",0),t.DNE(1,E,2,0,"ng-template",null,1,t.C5r)),2&o){const a=t.sdS(2);t.Y8G("ngIf",!r.loading)("ngIfElse",a)}},dependencies:[l.MD,l.Sq,l.bT,l.P9,d.h,d.D9,h.q],styles:[".layer[_ngcontent-%COMP%]{z-index:99999;background-color:#0000007b}.active[_ngcontent-%COMP%]{width:20px!important}.btn-main[_ngcontent-%COMP%]{color:#fff}"]})}}return i})()},8325:(m,f,e)=>{e.d(f,{q:()=>h});var l=e(177),d=e(7019);let h=(()=>{class t{static{this.\u0275fac=function(c){return new(c||t)}}static{this.\u0275cmp=d.VBU({type:t,selectors:[["app-loading"]],standalone:!0,features:[d.aNF],decls:1,vars:0,consts:[[1,"loader"]],template:function(c,g){1&c&&d.nrm(0,"span",0)},dependencies:[l.MD],styles:[".loader[_ngcontent-%COMP%]{width:60px;height:60px;border:8px solid #000000;border-bottom-color:var(--main-color);border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return t})()}}]);