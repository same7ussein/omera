"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[6666],{6666:(h,u,e)=>{e.r(u),e.d(u,{LoginComponent:()=>M});var _=e(6814),a=e(6223),m=e(4938),s=e(5897),f=e(1757),p=e(4119),d=e(1423),t=e(8926),v=e(9483),E=e(2425),L=e(1373);function A(o,g){1&o&&(t.TgZ(0,"p",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"account.email-req"),""))}function T(o,g){1&o&&(t.TgZ(0,"p",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"account.email-valid")," "))}function O(o,g){if(1&o&&(t.TgZ(0,"div",14),t.YNc(1,A,3,3,"p",15),t.YNc(2,T,3,3,"p",15),t.qZA()),2&o){const r=t.oxw();let n,i;t.xp6(1),t.Q6J("ngIf",null==(n=r.loginForm.get("email"))?null:n.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(i=r.loginForm.get("email"))?null:i.getError("email"))}}function Z(o,g){1&o&&(t.TgZ(0,"p",16),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"account.pass-req"),""))}function C(o,g){if(1&o&&(t.TgZ(0,"div",14),t.YNc(1,Z,3,3,"p",15),t.qZA()),2&o){const r=t.oxw();let n;t.xp6(1),t.Q6J("ngIf",null==(n=r.loginForm.get("password"))?null:n.getError("required"))}}function D(o,g){1&o&&t._UZ(0,"span",17)}let M=(()=>{class o{constructor(r,n,i,l,c,P){this._FormBuilder=r,this._AuthService=n,this._Router=i,this._ToastrService=l,this.translate=c,this._CommonService=P,this.isloading=!1,this.currentLang="",this.loginForm=this._FormBuilder.group({email:["",[a.kI.required,a.kI.email]],password:["",[a.kI.required]]})}ngOnInit(){this._CommonService.currentLang.subscribe({next:r=>{console.log(r),this.currentLang=r},error:r=>{console.log(r)}}),this.translate.use(this.currentLang)}isArabic(){return"ar"===this.translate.currentLang}handleLogin(){if(this.loginForm.valid){this.isloading=!0;const r=new FormData;Object.keys(this.loginForm.value).forEach(n=>{r.append(n,this.loginForm.get(n)?.value)}),this._AuthService.login(r,this.currentLang).subscribe({next:n=>{this.isloading=!1,"success"==n.status?(localStorage.setItem("eToken",n.tokens.access),this._ToastrService.success(n.message),this._Router.navigate(["/home"])):this._ToastrService.warning(n.message)},error:n=>{this.isloading=!1,this._ToastrService.warning(n.error.detail)}})}else this.loginForm.markAllAsTouched()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(a.qu),t.Y36(v.e),t.Y36(m.F0),t.Y36(E._W),t.Y36(p.sK),t.Y36(L.v))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],standalone:!0,features:[t.jDz],decls:25,vars:22,consts:[[1,"home-auth",3,"dir"],[1,"main","shadow-lg","bg-white"],[1,"signup"],[3,"formGroup","ngSubmit"],[1,"title"],[1,"d-flex","flex-column","gap-3"],["type","email","formControlName","email","autocomplete","email",3,"placeholder"],["class","validation",4,"ngIf"],[1,"flex","justify-content-center"],["formControlName","password",3,"placeholder","toggleMask","dir"],["routerLink","/forgetPassword",1,"border-0","text-main","cursor-pointer"],[1,"d-flex","justify-content-center","mt-3"],["type","submit",1,"btn-main"],["class","loader ms-2",4,"ngIf"],[1,"validation"],["class","text-danger m-0",4,"ngIf"],[1,"text-danger","m-0"],[1,"loader","ms-2"]],template:function(n,i){if(1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"form",3),t.NdJ("ngSubmit",function(){return i.handleLogin()}),t.TgZ(4,"p",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",5)(8,"div"),t._UZ(9,"input",6),t.ALo(10,"translate"),t.YNc(11,O,3,2,"div",7),t.qZA(),t.TgZ(12,"div")(13,"div",8),t._UZ(14,"p-password",9),t.ALo(15,"translate"),t.qZA(),t.YNc(16,C,2,1,"div",7),t.qZA(),t.TgZ(17,"a",10),t._uU(18),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"div",11)(21,"button",12),t.YNc(22,D,1,0,"span",13),t._uU(23),t.ALo(24,"translate"),t.qZA()()()()()()),2&n){let l,c;t.Q6J("dir",i.isArabic()?"rtl":"ltr"),t.xp6(3),t.Q6J("formGroup",i.loginForm),t.xp6(2),t.Oqu(t.lcZ(6,12,"account.Login")),t.xp6(4),t.Q6J("placeholder",t.lcZ(10,14,"account.Email")),t.xp6(2),t.Q6J("ngIf",(null==(l=i.loginForm.get("email"))?null:l.errors)&&(null==(l=i.loginForm.get("email"))?null:l.touched)),t.xp6(3),t.Q6J("placeholder",t.lcZ(15,16,"account.password"))("toggleMask",!0)("dir",i.isArabic()?"rtl":"ltr"),t.xp6(2),t.Q6J("ngIf",(null==(c=i.loginForm.get("password"))?null:c.errors)&&(null==(c=i.loginForm.get("password"))?null:c.touched)),t.xp6(2),t.Oqu(t.lcZ(19,18,"account.Forget_pass")),t.xp6(4),t.Q6J("ngIf",i.isloading),t.xp6(1),t.Oqu(t.lcZ(24,20,"account.Login"))}},dependencies:[_.ez,_.O5,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,s.n,f.T,m.rH,p.aw,p.X$,d.gz,d.ro],styles:["[_nghost-%COMP%]     .p-password{width:100%}"]})}return o})()},1373:(h,u,e)=>{e.d(u,{v:()=>m});var _=e(5619),a=e(8926);let m=(()=>{class s{constructor(){this.currentLang=new _.X("en"),this.vendorCurrentLang=new _.X("en"),this.currency=new _.X({label:"EGP",icon:"fi-eg"})}static#t=this.\u0275fac=function(d){return new(d||s)};static#n=this.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()}}]);