"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[493],{493:(v,m,i)=>{i.r(m),i.d(m,{CartComponent:()=>J});var u=i(6814),a=i(6223),t=i(8926);let c=(()=>{class o{transform(e,n){return Number(e)*Number(n)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275pipe=t.Yjl({name:"productCost",type:o,pure:!0,standalone:!0})}return o})();var x=i(4119),_=i(5156),d=i(1373),y=i(7422),q=i(9483),U=i(4938),b=i(2425);const I=["qty"],L=["input"];function S(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13),t._UZ(2,"img",14),t.qZA(),t.TgZ(3,"div",15)(4,"div",16)(5,"h3",17),t._uU(6),t.qZA(),t.TgZ(7,"p",18)(8,"span",19),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._uU(11),t.qZA(),t.TgZ(12,"p",18)(13,"span",19),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"p",18)(18,"span",19),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"p",18)(24,"span",19),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._uU(27),t.qZA(),t.TgZ(28,"p",18)(29,"span",19),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"button",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.deleteItem(s.id))}),t._UZ(34,"i",21),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t.TgZ(37,"div")(38,"div",22)(39,"button",23),t.NdJ("click",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.increaseCount(r))}),t._UZ(40,"i",24),t.qZA(),t.TgZ(41,"span",25,26),t._uU(43),t.qZA(),t.TgZ(44,"button",23),t.NdJ("click",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.minusCount(r))}),t._UZ(45,"i",27),t.qZA(),t.TgZ(46,"div")(47,"button",28,29),t.NdJ("click",function(){const s=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.updateCart(s.product.id,s.price,s.shipping_amount,s.size,s.color))}),t._uU(49),t.ALo(50,"translate"),t._UZ(51,"i",30),t.qZA()(),t.TgZ(52,"p",31),t._uU(53),t.ALo(54,"productCost"),t.ALo(55,"translate"),t.qZA()()()(),t._UZ(56,"hr",32),t.qZA()}if(2&o){const e=g.$implicit,n=t.MAs(42),r=t.oxw(2);t.xp6(2),t.Q6J("src",e.product.image,t.LSH),t.xp6(4),t.Oqu(e.product.title),t.xp6(1),t.Q6J("lang",r.isArabic()?"ar":"en"),t.xp6(2),t.hij("",t.lcZ(10,24,"cart.Size")," : "),t.xp6(2),t.Oqu(e.size),t.xp6(1),t.Q6J("lang",r.isArabic()?"ar":"en"),t.xp6(2),t.hij("",t.lcZ(15,26,"cart.Color")," : "),t.xp6(2),t.Oqu(e.color),t.xp6(1),t.Q6J("lang",r.isArabic()?"ar":"en"),t.xp6(2),t.hij("",t.lcZ(20,28,"cart.Price")," : "),t.xp6(2),t.AsE("",e.price," ",t.lcZ(22,30,"currency."+e.currency),""),t.xp6(2),t.Q6J("lang",r.isArabic()?"ar":"en"),t.xp6(2),t.hij("",t.lcZ(26,32,"cart.brand")," : "),t.xp6(2),t.Oqu(e.product.brand),t.xp6(1),t.Q6J("lang",r.isArabic()?"ar":"en"),t.xp6(2),t.hij("",t.lcZ(31,34,"cart.Category")," : "),t.xp6(2),t.Oqu(e.product.category),t.xp6(3),t.hij(" ",t.lcZ(36,36,"cart.Remove")," "),t.xp6(8),t.Oqu(e.qty),t.xp6(6),t.Oqu(t.lcZ(50,38,"cart.Update")),t.xp6(3),t.Q6J("lang",r.isArabic()?"ar":"en"),t.xp6(1),t.AsE("",t.xi3(54,40,e.price,n.innerText)," ",t.lcZ(55,43,"currency."+e.currency),"")}}function O(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div",33)(1,"h5"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",34)(5,"span",19),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.TgZ(11,"p",34)(12,"span",19),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"p",34)(19,"span",19),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"span"),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"p",34)(26,"span",19),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"span"),t._uU(30),t.ALo(31,"translate"),t.qZA()(),t._UZ(32,"hr"),t.TgZ(33,"p",35)(34,"span"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"span"),t._uU(38),t.ALo(39,"translate"),t.qZA()(),t.TgZ(40,"button",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.checkOut())}),t._uU(41),t.ALo(42,"translate"),t.qZA()()}if(2&o){const e=t.oxw(2);t.Q6J("lang",e.isArabic()?"ar":"en"),t.xp6(2),t.Oqu(t.lcZ(3,18,"cart.Cart Summary")),t.xp6(4),t.Oqu(t.lcZ(7,20,"cart.Subtotal")),t.xp6(3),t.AsE("",e.userCartTotalSummary.sub_total," ",t.lcZ(10,22,"currency."+e.userCartProducts[0].currency),""),t.xp6(4),t.Oqu(t.lcZ(14,24,"cart.Shipping")),t.xp6(3),t.AsE("",e.userCartTotalSummary.shipping," ",t.lcZ(17,26,"currency."+e.userCartProducts[0].currency),""),t.xp6(4),t.Oqu(t.lcZ(21,28,"cart.Tax")),t.xp6(3),t.AsE("",e.userCartTotalSummary.tax," ",t.lcZ(24,30,"currency."+e.userCartProducts[0].currency),""),t.xp6(4),t.Oqu(t.lcZ(28,32,"cart.Service Fee")),t.xp6(3),t.AsE("",e.userCartTotalSummary.service_fee," ",t.lcZ(31,34,"currency."+e.userCartProducts[0].currency),""),t.xp6(5),t.Oqu(t.lcZ(36,36,"cart.Total")),t.xp6(3),t.AsE("",e.userCartTotalSummary.total," ",t.lcZ(39,38,"currency."+e.userCartProducts[0].currency),""),t.xp6(3),t.Oqu(t.lcZ(42,40,"cart.Got To Checkout"))}}function w(o,g){if(1&o&&(t.TgZ(0,"div",37)(1,"form",38)(2,"h4",39),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div")(6,"label",40),t._UZ(7,"i",41),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",42,43),t.qZA(),t.TgZ(12,"div",44)(13,"div",45)(14,"label",46),t._UZ(15,"i",47),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",48,43),t.qZA(),t.TgZ(20,"div",45)(21,"label",49),t._UZ(22,"i",50),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"input",51,43),t.qZA()()(),t.TgZ(27,"form",38)(28,"h4",52),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"div",44)(32,"div",45)(33,"label",53),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",54,43),t.qZA(),t.TgZ(38,"div",45)(39,"label",55),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"input",56,43),t.qZA()(),t.TgZ(44,"div",44)(45,"div",45)(46,"label",57),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"input",58,43),t.qZA(),t.TgZ(51,"div",45)(52,"label",59),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"input",60,43),t.qZA()()()()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.PersonalInfo),t.xp6(2),t.Oqu(t.lcZ(4,11,"cart.Personal Information")),t.xp6(5),t.hij(" ",t.lcZ(9,13,"cart.Full Name"),""),t.xp6(8),t.Oqu(t.lcZ(17,15,"cart.Email")),t.xp6(7),t.Oqu(t.lcZ(24,17,"cart.Mobile")),t.xp6(4),t.Q6J("formGroup",e.shippingAddress),t.xp6(2),t.Oqu(t.lcZ(30,19,"cart.Shipping Address")),t.xp6(5),t.hij(" ",t.lcZ(35,21,"cart.Address"),""),t.xp6(6),t.Oqu(t.lcZ(41,23,"cart.City")),t.xp6(7),t.Oqu(t.lcZ(48,25,"cart.State")),t.xp6(6),t.Oqu(t.lcZ(54,27,"cart.Country"))}}function P(o,g){if(1&o&&(t.TgZ(0,"div",61)(1,"p",62),t._uU(2),t.ALo(3,"translate"),t._UZ(4,"img",63),t.qZA()()),2&o){const e=t.oxw(2);t.Q6J("lang",e.isArabic()?"ar":"en"),t.xp6(2),t.hij("",t.lcZ(3,2,"cart.Your Cart is empty")," ")}}function E(o,g){if(1&o&&(t.TgZ(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),t.YNc(5,S,57,45,"div",7),t.qZA()(),t.YNc(6,O,43,42,"div",8),t.qZA(),t.TgZ(7,"div",9)(8,"div",5),t.YNc(9,w,57,29,"div",10),t.qZA()()(),t.YNc(10,P,5,4,"div",11),t.qZA()),2&o){const e=t.oxw();t.Q6J("dir",e.isArabic()?"rtl":"ltr"),t.xp6(5),t.Q6J("ngForOf",e.userCartProducts),t.xp6(1),t.Q6J("ngIf",0==e.noItems),t.xp6(3),t.Q6J("ngIf",0==e.noItems),t.xp6(1),t.Q6J("ngIf",e.noItems)}}function N(o,g){1&o&&(t.TgZ(0,"div",64),t._UZ(1,"app-loading"),t.qZA())}let J=(()=>{class o{constructor(e,n,r,s,p,h,f,Z){this._CommonService=e,this._CartService=n,this._FormBuilder=r,this._AuthService=s,this._Router=p,this._Renderer2=h,this._ToastrService=f,this.translate=Z,this.userCartProducts=[],this.userCartTotalSummary={},this.userId=0,this.noItems=!1,this.itemsCartCount=0,this.render=!1,this.cartloading=!0,this.currentLang="",this.PersonalInfo=this._FormBuilder.group({full_name:["",[a.kI.required]],email:["",[a.kI.required]],phone:["",[a.kI.required,a.kI.pattern(/^01[0125][0-9]{8}$/)]]}),this.shippingAddress=this._FormBuilder.group({Address:["",[a.kI.required]],City:["",[a.kI.required]],State:["",[a.kI.required]],Country:["",[a.kI.required]]})}isArabic(){return"ar"===this.translate.currentLang}getCartSummary(){this._CartService.getCartTotalSummary(this.userId,this.userId).subscribe({next:e=>{console.log("totalSummary",e),this.userCartTotalSummary=e},error:e=>{console.log(e)}})}getUserCart(){this.cartloading=!0,this._CartService.getUserCart(this.userId,this.userId,this.currentLang).subscribe({next:e=>{console.log("CART",e),this.userCartProducts=e,0==e.length&&(this.noItems=!0),this.cartloading=!1,this.render=!0},error:e=>{console.log(e),this.render=!0}})}ngOnInit(){this._AuthService.decodeToken(),"notLogin"!==this._AuthService.userInfo?(this.userId=this._AuthService.userInfo.user_id,this._CommonService.currentLang.subscribe({next:e=>{console.log(e,"cartlang"),this.currentLang=e,this.getUserCart()},error:e=>{console.log(e)}}),this.getCartSummary()):(console.log("visitor"),this.render=!0,this.noItems=!0)}increaseCount(e){let n=Number(e.target.closest(".parent").children[1].innerText);n++,e.target.closest(".parent").children[1].innerText=n}minusCount(e){let n=Number(e.target.closest(".parent").children[1].innerText);n--,1==n&&(e.target.closest(".parent").children[1].innerText=1),n>1&&(e.target.closest(".parent").children[1].innerText=n)}checkOut(){if(this.PersonalInfo.valid&&this.shippingAddress.valid){const e=this._FormBuilder.group({full_name:this.PersonalInfo.get("full_name")?.value,user_id:this.userId,email:this.PersonalInfo.get("email")?.value,mobile:this.PersonalInfo.get("phone")?.value,address:this.shippingAddress.get("Address")?.value,country:this.shippingAddress.get("Country")?.value,state:this.shippingAddress.get("State")?.value,city:this.shippingAddress.get("City")?.value,cart_id:this.userId}),n=new FormData;Object.keys(e.value).forEach(r=>{n.append(r,e.get(r)?.value)}),this._CartService.createOrder(n).subscribe({next:r=>{console.log(r),"Order created successfully"==r.message&&this._Router.navigate(["/checkOut",r.order_oid])},error:r=>{console.log(r)}})}else for(const e of this.inputs)""==e.nativeElement.value?this._Renderer2.addClass(e.nativeElement,"is-invalid"):(this._Renderer2.removeClass(e.nativeElement,"is-invalid"),this._Renderer2.addClass(e.nativeElement,"is-valid"))}updateCart(e,n,r,s,p){this._AuthService.decodeToken();const h=this._AuthService.userInfo.user_id;let f=Number(this.itemQty.nativeElement.innerText);console.log(f);let Z="";this._CartService.getUserCountry().subscribe({next:l=>{Z=l},error:l=>{}});const T=this._FormBuilder.group({product_id:e,user_id:h,qty:f,price:n,shipping_amount:r,country:Z,size:s,color:p,cart_id:h,currency:this.userCartProducts[0].currency}),C=new FormData;Object.keys(T.value).forEach(l=>{C.append(l,T.get(l)?.value)}),this._CartService.updateCart(C,this.currentLang).subscribe({next:l=>{console.log("up",l),this.getCartSummary(),"Cart Updated Successfully"==l.message&&"en"==this.currentLang?(this._ToastrService.success("Your update is done"),document.querySelector(".overlay-container").style.direction="ltr"):"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0633\u0644\u0629 \u0628\u0646\u062c\u0627\u062d"==l.message&&"ar"==this.currentLang&&(this._ToastrService.success("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d"),document.querySelector(".overlay-container").style.direction="rtl")},error:l=>{console.log(l),console.log(C)}})}deleteItem(e){this._CartService.removeItem(this.userId,e,this.userId).subscribe({next:n=>{console.log(n),null==n&&(this.getUserCart(),this.getCartSummary(),null==n&&"en"==this.currentLang?(this._ToastrService.success("The Product was removed"),document.querySelector(".overlay-container").style.direction="ltr"):null==n&&"ar"==this.currentLang&&(this._ToastrService.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642"),document.querySelector(".overlay-container").style.direction="rtl"),this._CartService.getUserCart(this.userId,this.userId,this.currentLang).subscribe({next:r=>{this.itemsCartCount=r.length,this._CartService.cartItemsNumber.next(this.itemsCartCount)},error:r=>{console.log(r)}}))},error:n=>{console.log(n)}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(d.v),t.Y36(y.N),t.Y36(a.qu),t.Y36(q.e),t.Y36(U.F0),t.Y36(t.Qsj),t.Y36(b._W),t.Y36(x.sK))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-cart"]],viewQuery:function(n,r){if(1&n&&(t.Gf(I,5),t.Gf(L,5)),2&n){let s;t.iGM(s=t.CRH())&&(r.itemQty=s.first),t.iGM(s=t.CRH())&&(r.inputs=s)}},standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","my-5",3,"dir",4,"ngIf","ngIfElse"],["notload",""],[1,"my-5",3,"dir"],[1,"container"],[1,"row","g-5"],[1,"col-md-8"],[1,"userProducts","pe-3"],["class","row p-2",4,"ngFor","ngForOf"],["class","col-md-4",3,"lang",4,"ngIf"],[1,"row"],["class","userData mt-5",4,"ngIf"],["class","py-3 text-white rounded-2 mx-auto",3,"lang",4,"ngIf"],[1,"row","p-2"],[1,"col-md-2"],["alt","",1,"w-100",3,"src"],[1,"col-md-10","d-flex","justify-content-between"],[1,"itemData","d-flex","flex-column","gap-2"],[1,"title-cell"],[3,"lang"],[1,"text-secondary"],[1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash","mx-2"],[1,"parent"],[1,"btn-main","px-3","py-1",3,"click"],[1,"fa-solid","fa-plus"],[1,"m-auto","mx-2"],["qty",""],[1,"fa-solid","fa-minus"],[1,"btn-main","px-3","py-2","w-100","mt-2",3,"click"],["updateBtn",""],[1,"fa-solid","fa-arrows-rotate","mx-2"],[1,"text-center","mt-3","fw-bold","h5",3,"lang"],[1,"my-3"],[1,"col-md-4",3,"lang"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","my-3"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","fw-bold","my-3"],[1,"btn-main","w-100",3,"click"],[1,"userData","mt-5"],[3,"formGroup"],[1,"mb-4"],["for","name"],[1,"fa-solid","fa-user","mx-2"],["type","text","id","name","formControlName","full_name",1,"form-control","w-100"],["input",""],[1,"d-flex","justify-content-between","gap-3"],[1,"w-50"],["for","email"],[1,"fa-solid","fa-envelope","mx-2"],["type","email","id","email","formControlName","email",1,"form-control","w-100"],["for","phone"],[1,"fa-solid","fa-phone","mx-2"],["type","tel","id","phone","formControlName","phone",1,"form-control","w-100"],[1,"my-4"],["for","address"],["type","text","id","address","formControlName","Address",1,"form-control","w-100"],["for","City"],["type","text","id","City","formControlName","City",1,"form-control","w-100"],["for","State"],["type","text","id","State","formControlName","State",1,"form-control","w-100"],["for","Country"],["type","text","id","Country","formControlName","Country",1,"form-control","w-100"],[1,"py-3","text-white","rounded-2","mx-auto",3,"lang"],[1,"text-center","h1","text-danger"],["src","./assets/cart.png","alt","","height","150"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(n,r){if(1&n&&(t.YNc(0,E,11,5,"section",0),t.YNc(1,N,2,0,"ng-template",null,1,t.W1O)),2&n){const s=t.MAs(2);t.Q6J("ngIf",r.render&&!r.cartloading)("ngIfElse",s)}},dependencies:[u.ez,u.sg,u.O5,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,c,x.aw,x.X$,_.N],styles:[".userProducts[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;overflow-x:hidden}input[_ngcontent-%COMP%]{margin:15px 0}"]})}return o})()},5156:(v,m,i)=>{i.d(m,{N:()=>t});var u=i(6814),a=i(8926);let t=(()=>{class c{static#t=this.\u0275fac=function(d){return new(d||c)};static#e=this.\u0275cmp=a.Xpm({type:c,selectors:[["app-loading"]],standalone:!0,features:[a.jDz],decls:1,vars:0,consts:[[1,"loader"]],template:function(d,y){1&d&&a._UZ(0,"span",0)},dependencies:[u.ez],styles:[".loader[_ngcontent-%COMP%]{width:60px;height:60px;border:8px solid #000000;border-bottom-color:var(--main-color);border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}return c})()},1373:(v,m,i)=>{i.d(m,{v:()=>t});var u=i(5619),a=i(8926);let t=(()=>{class c{constructor(){this.currentLang=new u.X("en"),this.vendorCurrentLang=new u.X("en"),this.currency=new u.X({label:"EGP",icon:"fi-eg"})}static#t=this.\u0275fac=function(d){return new(d||c)};static#e=this.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);