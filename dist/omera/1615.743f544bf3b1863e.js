"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[1615],{1615:(h,u,e)=>{e.r(u),e.d(u,{VendorNotificationsComponent:()=>T});var l=e(6814),d=e(4119),f=e(5156),t=e(8926),p=e(553),g=e(9862);let c=(()=>{class n{constructor(o){this._HttpClient=o,this.baseUrl=p.N.baseURL}getAllNotifivationsCount(o){return this._HttpClient.get(`${this.baseUrl}/v1/vendor-notifications-summary/${o}/`)}getUnreadNotifivations(o){return this._HttpClient.get(`${this.baseUrl}/v1/vendor-notifications-unseen/${o}/`)}getAllReadNotifivations(o){return this._HttpClient.get(`${this.baseUrl}/v1/vendor-notifications-seen/${o}/`)}markAsRead(o,i){return this._HttpClient.get(`${this.baseUrl}/v1/vendor-notifications-mark-as-seen/${o}/${i}/`)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(g.eN))};static#o=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _=e(9483);function Z(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2,"new order from : "),t.TgZ(3,"span",24),t._uU(4),t.qZA()(),t.TgZ(5,"td"),t._uU(6,"you have got a new order for "),t.TgZ(7,"span",24),t._uU(8),t.qZA()(),t.TgZ(9,"td"),t._uU(10,"Un Read "),t._UZ(11,"i",25),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"slice"),t.qZA(),t.TgZ(15,"td")(16,"button",26),t.NdJ("click",function(){const s=t.CHM(o).$implicit,q=t.oxw(3);return t.KtG(q.markAsRead(s.id))}),t._UZ(17,"i",27),t.qZA()()()}if(2&n){const o=a.$implicit;t.xp6(4),t.Oqu(null==o||null==o.order?null:o.order.full_name),t.xp6(4),t.Oqu(null==o||null==o.order_item||null==o.order_item.product?null:o.order_item.product.slug),t.xp6(5),t.Oqu(t.Dn7(14,3,o.date,0,10))}}function m(n,a){if(1&n&&(t.TgZ(0,"table",22)(1,"thead")(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,Z,18,7,"tr",23),t.qZA()()),2&n){const o=t.oxw(2);t.Q6J("dir",o.isArabic()?"rtl":"ltr"),t.xp6(4),t.Oqu(t.lcZ(5,7,"dashboard.Type")),t.xp6(3),t.Oqu(t.lcZ(8,9,"dashboard.Message")),t.xp6(3),t.Oqu(t.lcZ(11,11,"dashboard.Status")),t.xp6(3),t.Oqu(t.lcZ(14,13,"dashboard.Date")),t.xp6(3),t.Oqu(t.lcZ(17,15,"dashboard.Action")),t.xp6(3),t.Q6J("ngForOf",o.vendorUnreadNotifications)}}function A(n,a){if(1&n&&(t.TgZ(0,"div",28)(1,"p",29),t._uU(2),t.ALo(3,"translate"),t._UZ(4,"img",30),t.qZA()()),2&n){const o=t.oxw(2);t.Q6J("dir",o.isArabic()?"rtl":"ltr")("lang",o.isArabic()?"ar":"en"),t.xp6(2),t.hij("",t.lcZ(3,3,"dashboard.No notifications exist")," ")}}function v(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2,"new order "),t.TgZ(3,"span",24),t._uU(4),t.qZA()(),t.TgZ(5,"td"),t._uU(6,"you have got a new order for "),t.TgZ(7,"span",24),t._uU(8),t.qZA()(),t.TgZ(9,"td"),t._uU(10,"Read "),t._UZ(11,"i",32),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"slice"),t.qZA()()),2&n){const o=a.$implicit;t.xp6(4),t.Oqu(o.order_item.oid),t.xp6(4),t.Oqu(o.order_item.product.slug),t.xp6(5),t.Oqu(t.Dn7(14,3,o.date,0,10))}}function x(n,a){if(1&n&&(t.TgZ(0,"table",22)(1,"thead",31)(2,"tr")(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,v,15,7,"tr",23),t.qZA()()),2&n){const o=t.oxw(2);t.Q6J("dir",o.isArabic()?"rtl":"ltr"),t.xp6(4),t.Oqu(t.lcZ(5,6,"dashboard.Type")),t.xp6(3),t.Oqu(t.lcZ(8,8,"dashboard.Message")),t.xp6(3),t.Oqu(t.lcZ(11,10,"dashboard.Status")),t.xp6(3),t.Oqu(t.lcZ(14,12,"dashboard.Date")),t.xp6(3),t.Q6J("ngForOf",o.vendorReadNotifications)}}function b(n,a){1&n&&(t.TgZ(0,"div",33)(1,"p",29),t._uU(2),t.ALo(3,"translate"),t._UZ(4,"img",30),t.qZA()()),2&n&&(t.xp6(2),t.hij("",t.lcZ(3,1,"dashboard.No notifications exist")," "))}function N(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"h1",4),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"P",8),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"P",9),t._uU(12),t.qZA()()(),t.TgZ(13,"div",6)(14,"div",7)(15,"P",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"P",9),t._uU(19),t.qZA()()(),t.TgZ(20,"div",6)(21,"div",7)(22,"P",8),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"P",9),t._uU(26),t.qZA()()()(),t._UZ(27,"hr",10),t.YNc(28,m,20,17,"table",11),t.YNc(29,A,5,5,"div",12),t.TgZ(30,"button",13),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(34),s=t.oxw();return t.KtG(s.viewAllReadNoti(r))}),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",14,15)(35,"div",16)(36,"div",17)(37,"h2",18),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"i",19),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(34),s=t.oxw();return t.KtG(s.closeLayer(r))}),t.qZA()(),t.YNc(41,x,17,14,"table",20),t.YNc(42,b,5,3,"div",21),t.qZA()()()()}if(2&n){const o=t.oxw();t.xp6(2),t.Q6J("dir",o.isArabic()?"rtl":"ltr")("lang",o.isArabic()?"ar":"en"),t.xp6(1),t.Oqu(t.lcZ(4,18,"dashboard.Notifications")),t.xp6(2),t.Q6J("dir",o.isArabic()?"rtl":"ltr")("lang",o.isArabic()?"ar":"en"),t.xp6(4),t.Oqu(t.lcZ(10,20,"dashboard.Unread Notifications")),t.xp6(3),t.Oqu(o.vendorNotificationsCount.un_read_noti),t.xp6(4),t.Oqu(t.lcZ(17,22,"dashboard.Read Notifications")),t.xp6(3),t.Oqu(o.vendorNotificationsCount.read_noti),t.xp6(4),t.Oqu(t.lcZ(24,24,"dashboard.All Notifications")),t.xp6(3),t.Oqu(o.vendorNotificationsCount.all_noti),t.xp6(2),t.Q6J("ngIf",o.vendorUnreadNotifications.length>0),t.xp6(1),t.Q6J("ngIf",0==o.vendorUnreadNotifications.length),t.xp6(2),t.Oqu(t.lcZ(32,26,"dashboard.All Read Notifications")),t.xp6(5),t.Q6J("dir",o.isArabic()?"rtl":"ltr"),t.xp6(2),t.Oqu(t.lcZ(39,28,"dashboard.All Read Notifications")),t.xp6(3),t.Q6J("ngIf",o.vendorReadNotifications.length>0),t.xp6(1),t.Q6J("ngIf",0==o.vendorReadNotifications.length)}}function U(n,a){1&n&&(t.TgZ(0,"div",34),t._UZ(1,"app-loading"),t.qZA())}let T=(()=>{class n{constructor(o,i,r,s){this._VendorNotificationsService=o,this._Renderer2=i,this._AuthService=r,this.translate=s,this.vendorNotificationsCount={},this.vendorUnreadNotifications=[],this.vendorReadNotifications=[],this.vendorId=0,this.loading=!0}getAllNotifications(){this.loading=!0,this._VendorNotificationsService.getAllNotifivationsCount(this.vendorId).subscribe({next:o=>{console.log(o),this.vendorNotificationsCount=o[0],this.loading=!1},error:o=>{console.log(o)}})}getUnreadNotifications(){this.loading=!0,this._VendorNotificationsService.getUnreadNotifivations(this.vendorId).subscribe({next:o=>{console.log(o),this.vendorUnreadNotifications=o,this.loading=!1},error:o=>{console.log(o)}})}getReadNotifications(){this._VendorNotificationsService.getAllReadNotifivations(this.vendorId).subscribe({next:o=>{console.log(o),this.vendorReadNotifications=o},error:o=>{console.log(o)}})}ngOnInit(){this._AuthService.decodeToken(),this.vendorId=this._AuthService.userInfo.vendor_id,this.getAllNotifications(),this.getUnreadNotifications()}closeLayer(o){this._Renderer2.addClass(o,"d-none")}viewAllReadNoti(o){this._Renderer2.removeClass(o,"d-none"),this.getReadNotifications()}markAsRead(o){this.loading=!0,this._VendorNotificationsService.markAsRead(this.vendorId,o).subscribe({next:i=>{console.log(i),this.getAllNotifications(),this.getUnreadNotifications(),this.loading=!1},error:i=>{console.log(i),console.log(this._AuthService.userInfo)}})}isArabic(){return"ar"===this.translate.currentLang}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(c),t.Y36(t.Qsj),t.Y36(_.e),t.Y36(d.sK))};static#o=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-vendor-notifications"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","py-5",4,"ngIf","ngIfElse"],["notload",""],[1,"py-5"],[1,"container"],[3,"dir","lang"],[1,"row",3,"dir","lang"],[1,"col-sm-4"],[1,"bg-white","shadow","p-4","rounded-3"],[1,"mb-4"],[1,"h2"],[1,"my-3"],["class","table align-middle",3,"dir",4,"ngIf"],["class","p-3 rounded-2 shadow my-3",3,"dir","lang",4,"ngIf"],[1,"btn","btn-main",3,"click"],[1,"layer","position-fixed","top-0","bottom-0","start-0","end-0","d-flex","justify-content-center","align-items-start","d-none"],["layer",""],[1,"couponData","bg-main-light","p-4","mt-5","rounded-2","overflow-auto"],[1,"d-flex","justify-content-between","align-items-center","mb-3",3,"dir"],[1,"h5"],["role","button",1,"fa","fa-solid","fa-close","fa-x",3,"click"],["class","table align-middle ",3,"dir",4,"ngIf"],["class","p-3 rounded-2 shadow",4,"ngIf"],[1,"table","align-middle",3,"dir"],[4,"ngFor","ngForOf"],[1,"fw-bold"],[1,"fa-solid","fa-eye-slash","ms-2"],[1,"btn","btn-secondary","align-middle",3,"click"],[1,"fa-solid","fa-eye"],[1,"p-3","rounded-2","shadow","my-3",3,"dir","lang"],[1,"h3","text-prim","text-center"],["src","./assets/notification.png","alt","","height","50"],[1,"table-dark"],[1,"fa-solid","fa-eye-slash","ms-1"],[1,"p-3","rounded-2","shadow"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(i,r){if(1&i&&(t.YNc(0,N,43,30,"section",0),t.YNc(1,U,2,0,"ng-template",null,1,t.W1O)),2&i){const s=t.MAs(2);t.Q6J("ngIf",!r.loading)("ngIfElse",s)}},dependencies:[l.ez,l.sg,l.O5,l.OU,d.aw,d.X$,f.N],styles:[".layer[_ngcontent-%COMP%]{z-index:99999;background-color:#0000007b}.active[_ngcontent-%COMP%]{width:20px!important}.btn-main[_ngcontent-%COMP%]{color:#fff}"]})}return n})()},5156:(h,u,e)=>{e.d(u,{N:()=>f});var l=e(6814),d=e(8926);let f=(()=>{class t{static#t=this.\u0275fac=function(c){return new(c||t)};static#o=this.\u0275cmp=d.Xpm({type:t,selectors:[["app-loading"]],standalone:!0,features:[d.jDz],decls:1,vars:0,consts:[[1,"loader"]],template:function(c,_){1&c&&d._UZ(0,"span",0)},dependencies:[l.ez],styles:[".loader[_ngcontent-%COMP%]{width:60px;height:60px;border:8px solid #000000;border-bottom-color:var(--main-color);border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}return t})()}}]);