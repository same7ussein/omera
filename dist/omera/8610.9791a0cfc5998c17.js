"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[8610],{8610:(O,u,o)=>{o.r(u),o.d(u,{OrdersComponent:()=>K});var d=o(4119),c=o(6814),m=o(8784),s=o(4257),C=o(707),h=o(6263),_=o(4055),f=o(6223),P=o(3259),x=o(4938),M=o(5156),t=o(8926),y=o(1178),v=o(1373),T=o(5219);const E=["dt2"];function D(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.exportPDF())}),t.qZA()}}function A(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"button",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.exportCSV())}),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.exportExcel())}),t.qZA(),t.YNc(4,D,1,0,"button",11),t.qZA(),t.TgZ(5,"span",12),t._UZ(6,"i",13),t.TgZ(7,"input",14),t.NdJ("ngModelChange",function(n){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filter=n)})("input",function(){t.CHM(e),t.oxw();const n=t.MAs(2),i=t.oxw();return t.KtG(n.filterGlobal(i.filter,"contains"))}),t.ALo(8,"translate"),t.qZA()()()}if(2&r){const e=t.oxw(2);t.Q6J("dir",e.isArabic()?"rtl":"ltr"),t.xp6(4),t.Q6J("ngIf",!e.isArabic()),t.xp6(3),t.Q6J("ngModel",e.filter)("placeholder",t.lcZ(8,5,"dashboard.Search"))("lang",e.isArabic()?"ar":"en")}}function Z(r,p){1&r&&(t.TgZ(0,"tr")(1,"th",16),t._uU(2),t.ALo(3,"translate"),t._UZ(4,"p-sortIcon",17),t.qZA(),t.TgZ(5,"th",18),t._uU(6),t.ALo(7,"translate"),t._UZ(8,"p-sortIcon",19),t.qZA(),t.TgZ(9,"th",20)(10,"div",21),t._uU(11),t.ALo(12,"translate"),t._UZ(13,"p-sortIcon",22)(14,"p-columnFilter",23),t.qZA()(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",24),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"p-sortIcon",25)(25,"p-columnFilter",26),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA()()),2&r&&(t.xp6(2),t.hij(" ",t.lcZ(3,7,"dashboard.ID")," "),t.xp6(4),t.hij(" ",t.lcZ(7,9,"dashboard.OrderName")," "),t.xp6(5),t.hij(" ",t.lcZ(12,11,"dashboard.Total Price")," "),t.xp6(5),t.hij(" ",t.lcZ(17,13,"dashboard.Status")," "),t.xp6(3),t.hij(" ",t.lcZ(20,15,"dashboard.Payment")," "),t.xp6(3),t.hij(" ",t.lcZ(23,17,"dashboard.Date")," "),t.xp6(5),t.Oqu(t.lcZ(28,19,"dashboard.Action")))}const U=function(r){return["/dashboard/orderDetails",r]};function w(r,p){if(1&r&&(t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"th"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"p-tag",27),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"p-tag",27),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"div",28)(16,"button",29),t._UZ(17,"i",30),t.qZA()()()()),2&r){const e=p.$implicit,a=t.oxw(2);t.xp6(2),t.hij("#",e.oid,""),t.xp6(2),t.Oqu(e.full_name),t.xp6(2),t.Oqu(e.total),t.xp6(2),t.Q6J("value",e.order_status)("severity",a.getSeverity(e.order_status)),t.xp6(2),t.Q6J("value",e.payment_status)("severity",a.getSeverity(e.payment_status)),t.xp6(2),t.Oqu(t.xi3(13,9,e.date,"EEEE, MMMM d, y, h:mm:ss a")),t.xp6(4),t.Q6J("routerLink",t.VKq(12,U,e.oid))}}const L=function(r,p,e){return{first:r,last:p,totalRecords:e}},I=function(){return["oid","full_name"]},R=function(){return[25,50,100]};function S(r,p){if(1&r&&(t.TgZ(0,"section")(1,"p-table",2,3),t.ALo(3,"translate"),t.YNc(4,A,9,7,"ng-template",4),t.YNc(5,Z,29,21,"ng-template",5),t.YNc(6,w,18,14,"ng-template",6),t.qZA()()),2&r){const e=t.MAs(2),a=t.oxw();t.xp6(1),t.s9C("currentPageReportTemplate",t.xi3(3,11,"dashboard.SHOWING_ENTRIES",t.kEZ(14,L,e.first,e.rows?e.first+(e.rows-1):0,e.totalRecords))),t.Q6J("value",a.products)("paginator",!0)("loading",a.loading)("rows",25)("globalFilterFields",t.DdM(18,I))("rowsPerPageOptions",t.DdM(19,R))("first",a.first)("showCurrentPageReport",!0)("rowHover",!0)("filterDelay",0)}}function B(r,p){1&r&&(t.TgZ(0,"div",31),t._UZ(1,"app-loading"),t.qZA())}let K=(()=>{class r{constructor(e,a,n){this._AdminDashboardService=e,this.translate=a,this._CommonService=n,this.userData={},this.first=0,this.loading=!0,this.orderloading=!0,this.currentLang=""}ngOnInit(){this.decodeToken(),this._CommonService.vendorCurrentLang.subscribe({next:e=>{this.currentLang=e,this.getDashboardProduct()},error:e=>{console.log(e)}})}decodeToken(){const e=localStorage.getItem("eToken");null!==e&&(this.userData=(0,m.o)(e))}getDashboardProduct(){this.orderloading=!0,this._AdminDashboardService.getAllOrders(this.userData.vendor_id,this.currentLang).subscribe({next:e=>{this.products=e,console.log("product",this.products),this.loading=!1,this.orderloading=!1},error:e=>{console.log(e)}})}getSeverity(e){switch(e){case"paid":case"\u0645\u062f\u0641\u0648\u0639":return"success";case"Pending":case"\u0642\u064a\u062f \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631":return"warning";case"unpublished":return"danger"}return null}exportCSV(){if(this.products&&this.products.length>0){const e=this.isArabic()?["\u0643\u0648\u062f \u0627\u0644\u0645\u0646\u062a\u062c","\u0635\u0627\u062d\u0628 \u0627\u0644\u0637\u0644\u0628","\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0643\u0644\u0649","\u0627\u0644\u062d\u0627\u0644\u0629","\u062d\u0627\u0644\u0629 \u0627\u0644\u062f\u0641\u0639","\u0627\u0644\u062a\u0627\u0631\u064a\u062e"]:["ID","Order Owner","Total Price","Status","Payment","Date"],a=this.products.map(n=>[n.oid,n.full_name,n.total,n.order_status,n.payment_status,this.formatDate(n.date)]);this.exportTableToCSV(e,a,"products.csv")}else console.error("No data available for CSV export.")}exportTableToCSV(e,a,n){const i=e.join(",")+"\n"+a.map(j=>j.join(",")).join("\n"),l=new Blob([i],{type:"text/csv"}),b=window.URL.createObjectURL(l),g=document.createElement("a");g.setAttribute("href",b),g.setAttribute("download",n),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g)}formatDate(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}exportPDF(){if(this.products&&this.products.length>0){const e=["ID","Order Owner","Total Price","Status","Payment","Date"],a=this.products.map(n=>[n.oid,n.full_name,n.total,n.order_status,n.payment_status,this.formatDate(n.date)]);o.e(9846).then(o.bind(o,9846)).then(n=>{Promise.all([o.e(9846),o.e(3403)]).then(o.t.bind(o,3403,23)).then(i=>{const l=new n.default("p","px","a4");l.autoTable({head:[e],body:a}),l.save("products.pdf")})})}}exportExcel(){if(this.products&&this.products.length>0){const e=this.isArabic()?["\u0643\u0648\u062f \u0627\u0644\u0645\u0646\u062a\u062c","\u0635\u0627\u062d\u0628 \u0627\u0644\u0637\u0644\u0628","\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0643\u0644\u0649","\u0627\u0644\u062d\u0627\u0644\u0629","\u062d\u0627\u0644\u0629 \u0627\u0644\u062f\u0641\u0639","\u0627\u0644\u062a\u0627\u0631\u064a\u062e"]:["ID","Order Owner","Total Price","Status","Payment","Date"],a=this.products.map(n=>({[e[0]]:n.oid,[e[1]]:n.full_name,[e[2]]:n.total,[e[3]]:n.order_status,[e[4]]:n.payment_status,[e[5]]:this.formatDate(n.date)}));o.e(1486).then(o.bind(o,1486)).then(n=>{const l={Sheets:{data:n.utils.json_to_sheet(a)},SheetNames:["data"]},b=n.write(l,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(b,"products")})}}saveAsExcelFile(e,a){const n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(n),l=document.createElement("a");l.href=i,l.download=a+"_export_"+(new Date).getTime()+".xlsx",l.click(),window.URL.revokeObjectURL(i)}isArabic(){return"ar"===this.translate.currentLang}static#t=this.\u0275fac=function(a){return new(a||r)(t.Y36(y.U),t.Y36(d.sK),t.Y36(v.v))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-orders"]],viewQuery:function(a,n){if(1&a&&t.Gf(E,5),2&a){let i;t.iGM(i=t.CRH())&&(n.dt2=i.first)}},standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notload",""],["styleClass","p-datatable-striped",3,"value","paginator","loading","rows","globalFilterFields","rowsPerPageOptions","first","showCurrentPageReport","rowHover","filterDelay","currentPageReportTemplate"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","justify-content-between",3,"dir"],[1,"d-flex","gap-2"],["type","button","pButton","","pRipple","","icon","pi pi-file","pTooltip","CSV","tooltipPosition","bottom",1,"mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","class","p-button-warning mr-2","pTooltip","PDF","tooltipPosition","bottom",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text",1,"p-inputtext","p-component","p-element",3,"ngModel","placeholder","lang","ngModelChange","input"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],["pSortableColumn","oid",2,"min-width","7rem"],["field","oid"],["pSortableColumn","full_name"],["field","full_name"],["pSortableColumn","total",2,"max-width","9rem"],[1,"d-flex","justify-content-between","align-items-center"],["field","total"],["type","numeric","field","total","display","menu","currency","EGP"],["pSortableColumn","date"],["field","date"],["type","date","field","date","display","menu"],[3,"value","severity"],[1,"d-flex","gap-1"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa-solid","fa-eye"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(a,n){if(1&a&&(t.YNc(0,S,7,20,"section",0),t.YNc(1,B,2,0,"ng-template",null,1,t.W1O)),2&a){const i=t.MAs(2);t.Q6J("ngIf",!n.orderloading)("ngIfElse",i)}},dependencies:[c.ez,c.O5,c.uU,s.U$,s.iA,T.jx,s.lQ,s.fz,s.xl,h.W,h.V,C.hJ,C.Hq,_.q4,f.u5,f.Fj,f.JJ,f.On,P.z,P.u,x.Bz,x.rH,d.aw,d.X$,M.N],styles:[".single_quick_activity[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;transition:.5s;padding:20px;position:relative}.single_quick_activity[_ngcontent-%COMP%]   .count_content[_ngcontent-%COMP%]{position:relative;z-index:9}.single_quick_activity[_ngcontent-%COMP%]   .notification_btn[_ngcontent-%COMP%]{position:absolute;right:22px;top:32px}.notification_btn[_ngcontent-%COMP%]{font-size:10px;font-weight:400;color:#fff;background:#508ff4;display:inline-block;border-radius:3px;padding:4px 14px}.row-container[_ngcontent-%COMP%]{background-color:#f5f6ff}.single_quick_activity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{transition:.5s;font-size:14px;font-weight:700;color:#8890b5;line-height:1;margin-bottom:15px}[_nghost-%COMP%]     .text-green-500{color:#22c55e}[_nghost-%COMP%]     .text-red-500{color:#ff3d32}[_nghost-%COMP%]     .p-dropdown-items-wrapper{overflow:auto!important}[_nghost-%COMP%]     .p-datatable-loading-overlay{background-color:#fff!important}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-w-100{width:100%}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}@media screen and (max-width: 960px){[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th, [_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tfoot>tr>td{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{text-align:left;width:100%;display:flex;align-items:center;border:0 none}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{min-width:30%;display:inline-block;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td p-progressbar{width:100%}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td:last-child{border-bottom:1px solid var(--surface-d)}}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}return r})()},5156:(O,u,o)=>{o.d(u,{N:()=>m});var d=o(6814),c=o(8926);let m=(()=>{class s{static#t=this.\u0275fac=function(_){return new(_||s)};static#e=this.\u0275cmp=c.Xpm({type:s,selectors:[["app-loading"]],standalone:!0,features:[c.jDz],decls:1,vars:0,consts:[[1,"loader"]],template:function(_,f){1&_&&c._UZ(0,"span",0)},dependencies:[d.ez],styles:[".loader[_ngcontent-%COMP%]{width:60px;height:60px;border:8px solid #000000;border-bottom-color:var(--main-color);border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}return s})()},1373:(O,u,o)=>{o.d(u,{v:()=>m});var d=o(5619),c=o(8926);let m=(()=>{class s{constructor(){this.currentLang=new d.X("en"),this.vendorCurrentLang=new d.X("en"),this.currency=new d.X({label:"EGP",icon:"fi-eg"})}static#t=this.\u0275fac=function(_){return new(_||s)};static#e=this.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()}}]);