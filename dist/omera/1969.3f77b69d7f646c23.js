"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[1969],{1969:(h,p,r)=>{r.r(p),r.d(p,{CheckoutComponent:()=>P});var l=r(6814),a=r(6223),d=r(4119),t=r(8926),m=r(1373),_=r(9483),u=r(4050),f=r(7422),g=r(4938),x=r(9862);function C(o,c){if(1&o&&(t.TgZ(0,"p",33)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"currency"),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"cart.Discount")),t.xp6(3),t.Oqu(t.xi3(6,4,e.orderData.saved," EGP "))}}function Z(o,c){if(1&o&&(t.TgZ(0,"p",34),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.orderData.initial_total," EGP ")," ")}}const A=function(){return{standalone:!0}};function v(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",49),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.phone=n)}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.phone)("ngModelOptions",t.DdM(2,A))}}function M(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",35),t._UZ(2,"input",36,37),t.ALo(4,"translate"),t.TgZ(5,"button",38),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(3),s=t.oxw();return t.KtG(s.applyCopon(n.value))}),t._UZ(6,"i",39),t.qZA()(),t.TgZ(7,"form",40),t.NdJ("ngSubmit",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.submitForm())}),t.TgZ(8,"div",41)(9,"div",42)(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"select",43),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.paymentMethod=n)})("change",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.setPaymentMethod(n.target))}),t.TgZ(14,"option",44),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"option",45),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"option",46),t._uU(21),t.ALo(22,"translate"),t.qZA()(),t.YNc(23,v,2,3,"ng-container",30),t.qZA()(),t.TgZ(24,"button",47),t._uU(25),t.ALo(26,"translate"),t._UZ(27,"i",48),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.s9C("placeholder",t.lcZ(4,11,"cart.Enter Your Code")),t.xp6(5),t.Q6J("action","https://levado-ecommerce-api.onrender.com/api/v1/paymob-test/"+e.orderId+"/"+e.paymentMethod+"/",t.LSH),t.xp6(4),t.hij("",t.lcZ(12,13,"cart.Payment Method")," :"),t.xp6(2),t.Q6J("ngModel",e.paymentMethod),t.xp6(2),t.hij(" ",t.lcZ(16,15,"cart.Select Payment Method")," "),t.xp6(3),t.Oqu(t.lcZ(19,17,"cart.Card")),t.xp6(3),t.hij(" ",t.lcZ(22,19,"cart.Wallet")," "),t.xp6(2),t.Q6J("ngIf","wallet"==e.paymentMethod),t.xp6(1),t.Udp("background-color","#3B5998"),t.xp6(1),t.hij(" ",t.lcZ(26,21,"cart.Checkout Now")," ")}}function y(o,c){1&o&&t._UZ(0,"i",58)}function T(o,c){1&o&&t._UZ(0,"i",59)}function b(o,c){1&o&&t._UZ(0,"i",60)}function O(o,c){if(1&o&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,"cart."+e.codeMsgSuccess)," ")}}function U(o,c){if(1&o&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,"cart."+e.codeMsgWarning)," ")}}function E(o,c){if(1&o&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,"cart."+e.codeMsgError)," ")}}function w(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"div",50)(1,"div",51)(2,"div",52),t.YNc(3,y,1,0,"i",53),t.YNc(4,T,1,0,"i",54),t.YNc(5,b,1,0,"i",55),t.YNc(6,O,3,3,"p",56),t.YNc(7,U,3,3,"p",56),t.YNc(8,E,3,3,"p",56),t.TgZ(9,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.closeCoponAlert())}),t._uU(10),t.ALo(11,"translate"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("dir",e.isArabic()?"rtl":"ltr"),t.xp6(2),t.Q6J("ngIf",e.codeMsgSuccess),t.xp6(1),t.Q6J("ngIf",e.codeMsgWarning),t.xp6(1),t.Q6J("ngIf",e.codeMsgError),t.xp6(1),t.Q6J("ngIf",e.codeMsgSuccess),t.xp6(1),t.Q6J("ngIf",e.codeMsgWarning),t.xp6(1),t.Q6J("ngIf",e.codeMsgError),t.xp6(2),t.hij(" ",t.lcZ(11,8,"cart.Close")," ")}}let P=(()=>{class o{constructor(e,i,n,s,L,q,I,D,k,S){this._CommonService=e,this._FormBuilder=i,this._Renderer2=n,this._AuthService=s,this._PaymentService=L,this._CartService=q,this._ActivatedRoute=I,this.http=D,this._Router=k,this.translate=S,this.shippingAddress=this._FormBuilder.group({full_name:[""],email:[""],phone:[""],Address:[""],City:[""],State:[""],Country:[""]}),this.userInfo={},this.userAddress={},this.orderId="",this.userId=0,this.codeMsgSuccess="",this.codeMsgWarning="",this.codeMsgError="",this.currentLang="",this.orderData={},this.paymentMethod="",this.phone=""}setPaymentMethod(e){this.paymentMethod=e.value}submitForm(){let e=`https://omera2-production.up.railway.app/api/v1/paymob-test/${this.orderId}/${this.paymentMethod}/`;"wallet"===this.paymentMethod&&(e+=`?phone_num=${this.phone}`),console.log("url",e),window.location.href=e}getOrderDetails(){this._CartService.getOrderDetails(this.orderId).subscribe({next:e=>{console.log(e),this.orderData=e,this.shippingAddress.get("full_name")?.setValue(e.full_name),this.shippingAddress.get("email")?.setValue(e.email),this.shippingAddress.get("phone")?.setValue(e.mobile),this.shippingAddress.get("Address")?.setValue(e.address),this.shippingAddress.get("City")?.setValue(e.city),this.shippingAddress.get("State")?.setValue(e.state),this.shippingAddress.get("Country")?.setValue(e.country),this.discount="0.00"!==e.saved},error:e=>{console.log(e)}})}ngOnInit(){this._CommonService.currentLang.subscribe({next:e=>{console.log(e),this.currentLang=e},error:e=>{console.log(e)}}),this._ActivatedRoute.paramMap.subscribe({next:e=>{console.log(e.get("id")),this.orderId=e.get("id")},error:e=>{console.log(e)}}),this.getOrderDetails(),this._AuthService.decodeToken(),this.userId=this._AuthService.userInfo.user_id,console.log(this.userId),this._CartService.getUserCart(this.userId,this.userId,this.currentLang).subscribe({next:e=>{this.itemsCartCount=e.length,console.log(e.length)},error:e=>{console.log(e)}})}applyCopon(e){this._PaymentService.applyCopon({coupon_code:e,order_oid:this.orderId}).subscribe({next:n=>{console.log(n),"success"==n.icon?(this.codeMsgSuccess="Coupon Activated",this.getOrderDetails()):"warning"==n.icon?this.codeMsgWarning="Coupon Already Activated":"error"==n.icon&&(this.codeMsgError="Coupon Does Not Exist")},error:n=>{console.log(n)}})}payStripe(){return`https://levado-ecommerce-api.onrender.com/api/v1/stripe-checkout/${this.orderId}/${this.userId}/`}closeCoponAlert(){this.codeMsgSuccess="",this.codeMsgWarning="",this.codeMsgError=""}isArabic(){return"ar"===this.translate.currentLang}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.v),t.Y36(a.qu),t.Y36(t.Qsj),t.Y36(_.e),t.Y36(u.t),t.Y36(f.N),t.Y36(g.gz),t.Y36(x.eN),t.Y36(g.F0),t.Y36(d.sK))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-checkout"]],standalone:!0,features:[t.jDz],decls:94,vars:72,consts:[[1,"my-5","p-3",3,"dir","lang"],[1,"container"],[1,"row","g-5"],[1,"col-md-8"],[1,"alert","alert-warning"],[1,"my-4"],[3,"formGroup"],["for","name"],["type","text","id","name","formControlName","full_name","readonly","",1,"form-control","w-100"],[1,"d-flex","justify-content-between","gap-3"],[1,"w-50"],["for","email"],["type","email","id","email","formControlName","email","readonly","",1,"form-control","w-100"],["for","phone"],["type","tel","id","phone","formControlName","phone","readonly","",1,"form-control","w-100"],["for","address"],["type","text","id","address","formControlName","Address","readonly","",1,"form-control","w-100"],["for","City"],["type","text","id","City","formControlName","City","readonly","",1,"form-control","w-100"],["for","State"],["type","text","id","State","formControlName","State","readonly","",1,"form-control","w-100"],["for","Country"],["type","tel","id","Country","formControlName","Country","readonly","",1,"form-control","w-100"],[1,"col-md-4"],[1,"mb-4"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center"],[1,"text-secondary"],["class","discount d-flex flex-wrap justify-content-between align-items-center",4,"ngIf"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","fw-bold"],["class","text-danger text-decoration-line-through small text-center",4,"ngIf"],[4,"ngIf"],[1,"col-md-12"],["class","layer position-fixed w-100 top-0 bottom-0 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"discount","d-flex","flex-wrap","justify-content-between","align-items-center"],[1,"text-danger","text-decoration-line-through","small","text-center"],[1,"copon","d-flex","flex-wrap","justify-content-between","align-items-center","shadow","mt-5","p-3","rounded-2"],["type","text",1,"py-2","form-control",3,"placeholder"],["code",""],["lang","en",1,"py-1","mx-auto",3,"click"],[1,"fa-solid","fa-check","text-white"],["method","GET",3,"action","ngSubmit"],[1,"shadow","p-3","d-flex","mt-4","mb-4"],[1,"d-flex","flex-wrap"],["name","paymentMethod",1,"form-select","mt-2",3,"ngModel","ngModelChange","change"],["value","","selected","","disabled",""],["value","card"],["value","wallet"],["lang","en","type","submit",1,"btn","btn-primary","btn-rounded","w-100","mt-2"],[1,"fas","fa-money-check-alt"],["type","text","placeholder","Enter wallet number",1,"form-control",2,"border","dashed 1px gray",3,"ngModel","ngModelOptions","ngModelChange"],[1,"layer","position-fixed","w-100","top-0","bottom-0","d-flex","justify-content-center","align-items-center"],[1,"rounded-3","contain",3,"dir"],[1,"p-5","py-5","d-flex","flex-column","justify-content-center","align-items-center","shadow"],["class","fa-solid fa-circle-check fa-3x text-success",4,"ngIf"],["class","fa-solid fa-triangle-exclamation fa-3x text-warning",4,"ngIf"],["class","fa-solid fa-circle-xmark fa-3x text-danger",4,"ngIf"],["class","h3 my-5",4,"ngIf"],[1,"btn","btn-danger","px-4","py-1",3,"click"],[1,"fa-solid","fa-circle-check","fa-3x","text-success"],[1,"fa-solid","fa-triangle-exclamation","fa-3x","text-warning"],[1,"fa-solid","fa-circle-xmark","fa-3x","text-danger"],[1,"h3","my-5"]],template:function(i,n){1&i&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"h4",5),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"form",6)(11,"div")(12,"label",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"div",9)(17,"div",10)(18,"label",11),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",12),t.qZA(),t.TgZ(22,"div",10)(23,"label",13),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",14),t.qZA()(),t.TgZ(27,"div",9)(28,"div",10)(29,"label",15),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",16),t.qZA(),t.TgZ(33,"div",10)(34,"label",17),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",18),t.qZA()(),t.TgZ(38,"div",9)(39,"div",10)(40,"label",19),t._uU(41),t.ALo(42,"translate"),t.qZA(),t._UZ(43,"input",20),t.qZA(),t.TgZ(44,"div",10)(45,"label",21),t._uU(46),t.ALo(47,"translate"),t.qZA(),t._UZ(48,"input",22),t.qZA()()()(),t.TgZ(49,"div",23)(50,"h5",24),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"p",25)(54,"span",26),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"span"),t._uU(58),t.ALo(59,"currency"),t.qZA()(),t.TgZ(60,"p",25)(61,"span",26),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"span"),t._uU(65),t.ALo(66,"currency"),t.qZA()(),t.TgZ(67,"p",25)(68,"span",26),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"span"),t._uU(72),t.ALo(73,"currency"),t.qZA()(),t.TgZ(74,"p",25)(75,"span",26),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"span"),t._uU(79),t.ALo(80,"currency"),t.qZA()(),t.YNc(81,C,7,7,"p",27),t._UZ(82,"hr"),t.TgZ(83,"p",28)(84,"span"),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"span"),t.YNc(88,Z,3,4,"p",29),t._uU(89),t.ALo(90,"currency"),t.qZA()(),t.YNc(91,M,28,23,"div",30),t.qZA(),t._UZ(92,"div",31),t.qZA()()(),t.YNc(93,w,12,10,"div",32)),2&i&&(t.Q6J("dir",n.isArabic()?"rtl":"ltr")("lang",n.isArabic()?"ar":"en"),t.xp6(5),t.hij(" ",t.lcZ(6,27,"cart.Review Your Shipping & Order Details")," "),t.xp6(3),t.Oqu(t.lcZ(9,29,"cart.Shipping Address")),t.xp6(2),t.Q6J("formGroup",n.shippingAddress),t.xp6(3),t.Oqu(t.lcZ(14,31,"cart.Full Name")),t.xp6(6),t.Oqu(t.lcZ(20,33,"cart.Email")),t.xp6(5),t.hij(" ",t.lcZ(25,35,"cart.Mobile"),""),t.xp6(6),t.hij(" ",t.lcZ(31,37,"cart.Address"),""),t.xp6(5),t.hij(" ",t.lcZ(36,39,"cart.City"),""),t.xp6(6),t.hij(" ",t.lcZ(42,41,"cart.State"),""),t.xp6(5),t.hij(" ",t.lcZ(47,43,"cart.Country"),""),t.xp6(5),t.Oqu(t.lcZ(52,45,"cart.Cart Summary")),t.xp6(4),t.Oqu(t.lcZ(56,47,"cart.Subtotal")),t.xp6(3),t.Oqu(t.xi3(59,49,n.orderData.sub_total," EGP ")),t.xp6(4),t.Oqu(t.lcZ(63,52,"cart.Shipping")),t.xp6(3),t.Oqu(t.xi3(66,54,n.orderData.shipping_amount," EGP ")),t.xp6(4),t.Oqu(t.lcZ(70,57,"cart.Tax")),t.xp6(3),t.Oqu(t.xi3(73,59,n.orderData.tax_fee," EGP ")),t.xp6(4),t.Oqu(t.lcZ(77,62,"cart.Service Fee")),t.xp6(3),t.Oqu(t.xi3(80,64,n.orderData.service_fee," EGP ")),t.xp6(2),t.Q6J("ngIf",n.discount),t.xp6(4),t.Oqu(t.lcZ(86,67,"cart.Total")),t.xp6(3),t.Q6J("ngIf",n.discount),t.xp6(1),t.hij(" ",t.xi3(90,69,n.orderData.total," EGP ")," "),t.xp6(2),t.Q6J("ngIf",0!==n.itemsCartCount),t.xp6(2),t.Q6J("ngIf",n.codeMsgError||n.codeMsgSuccess||n.codeMsgWarning))},dependencies:[l.ez,l.O5,l.H9,a.UX,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u,a.u5,a.On,a.F,d.aw,d.X$],styles:["form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:light-dark(rgb(232,240,254),rgba(70,90,126,.4))!important}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--bs-border-color);outline:0;box-shadow:none}.copon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background-color:#fff}.copon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:25%;border-radius:10px;background-color:#1e891e;border:none;transition:.3s}.copon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#168427}.stripe[_ngcontent-%COMP%]{background-color:var(--main-color);transition:.3s}.stripe[_ngcontent-%COMP%]:hover{background-color:#15263e}.layer[_ngcontent-%COMP%]{z-index:99999;background-color:#0000008d}.layer[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]{min-width:300px;background-color:#fff}.discount[_ngcontent-%COMP%]{color:#1abb1a}input[_ngcontent-%COMP%]{margin:15px 0}"]})}return o})()},1373:(h,p,r)=>{r.d(p,{v:()=>d});var l=r(5619),a=r(8926);let d=(()=>{class t{constructor(){this.currentLang=new l.X("en"),this.vendorCurrentLang=new l.X("en"),this.currency=new l.X({label:"EGP",icon:"fi-eg"})}static#t=this.\u0275fac=function(u){return new(u||t)};static#e=this.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()}}]);