"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[205],{205:(h,g,o)=>{o.r(g),o.d(g,{LoginComponent:()=>F});var c=o(177),a=o(9417),u=o(1870),s=o(6160),E=o(4602),d=o(8147),p=o(2610),t=o(7019),f=o(3664),v=o(5794),I=o(2571);function D(e,m){1&e&&(t.j41(0,"p",16),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"account.email-req"),""))}function M(e,m){1&e&&(t.j41(0,"p",16),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"account.email-valid")," "))}function T(e,m){if(1&e&&(t.j41(0,"div",14),t.DNE(1,D,3,3,"p",15),t.DNE(2,M,3,3,"p",15),t.k0s()),2&e){const r=t.XpG();let n,i;t.R7$(1),t.Y8G("ngIf",null==(n=r.loginForm.get("email"))?null:n.getError("required")),t.R7$(1),t.Y8G("ngIf",null==(i=r.loginForm.get("email"))?null:i.getError("email"))}}function L(e,m){1&e&&(t.j41(0,"p",16),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"account.pass-req"),""))}function R(e,m){if(1&e&&(t.j41(0,"div",14),t.DNE(1,L,3,3,"p",15),t.k0s()),2&e){const r=t.XpG();let n;t.R7$(1),t.Y8G("ngIf",null==(n=r.loginForm.get("password"))?null:n.getError("required"))}}function C(e,m){1&e&&t.nrm(0,"span",17)}let F=(()=>{class e{constructor(r,n,i,l,_,O){this._FormBuilder=r,this._AuthService=n,this._Router=i,this._ToastrService=l,this.translate=_,this._CommonService=O,this.isloading=!1,this.currentLang="",this.loginForm=this._FormBuilder.group({email:["",[a.k0.required,a.k0.email]],password:["",[a.k0.required]]})}ngOnInit(){this._CommonService.currentLang.subscribe({next:r=>{console.log(r),this.currentLang=r},error:r=>{console.log(r)}}),this.translate.use(this.currentLang)}isArabic(){return"ar"===this.translate.currentLang}handleLogin(){if(this.loginForm.valid){this.isloading=!0;const r=new FormData;Object.keys(this.loginForm.value).forEach(n=>{r.append(n,this.loginForm.get(n)?.value)}),this._AuthService.login(r,this.currentLang).subscribe({next:n=>{this.isloading=!1,"success"==n.status?(localStorage.setItem("eToken",n.tokens.access),this._ToastrService.success(n.message),this._Router.navigate(["/home"])):this._ToastrService.warning(n.message)},error:n=>{this.isloading=!1,this._ToastrService.warning(n.error.detail)}})}else this.loginForm.markAllAsTouched()}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(a.ok),t.rXU(f.u),t.rXU(u.Ix),t.rXU(v.tw),t.rXU(d.c$),t.rXU(I.h))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-login"]],standalone:!0,features:[t.aNF],decls:25,vars:22,consts:[[1,"home-auth",3,"dir"],[1,"main","shadow-lg","bg-white"],[1,"signup"],[3,"formGroup","ngSubmit"],[1,"title"],[1,"d-flex","flex-column","gap-3"],["type","email","formControlName","email","autocomplete","email",3,"placeholder"],["class","validation",4,"ngIf"],[1,"flex","justify-content-center"],["formControlName","password",3,"placeholder","toggleMask","dir"],["routerLink","/forgetPassword",1,"border-0","text-main","cursor-pointer"],[1,"d-flex","justify-content-center","mt-3"],["type","submit",1,"btn-main"],["class","loader ms-2",4,"ngIf"],[1,"validation"],["class","text-danger m-0",4,"ngIf"],[1,"text-danger","m-0"],[1,"loader","ms-2"]],template:function(n,i){if(1&n&&(t.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"form",3),t.bIt("ngSubmit",function(){return i.handleLogin()}),t.j41(4,"p",4),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"div",5)(8,"div"),t.nrm(9,"input",6),t.nI1(10,"translate"),t.DNE(11,T,3,2,"div",7),t.k0s(),t.j41(12,"div")(13,"div",8),t.nrm(14,"p-password",9),t.nI1(15,"translate"),t.k0s(),t.DNE(16,R,2,1,"div",7),t.k0s(),t.j41(17,"a",10),t.EFF(18),t.nI1(19,"translate"),t.k0s()(),t.j41(20,"div",11)(21,"button",12),t.DNE(22,C,1,0,"span",13),t.EFF(23),t.nI1(24,"translate"),t.k0s()()()()()()),2&n){let l,_;t.Y8G("dir",i.isArabic()?"rtl":"ltr"),t.R7$(3),t.Y8G("formGroup",i.loginForm),t.R7$(2),t.JRh(t.bMT(6,12,"account.Login")),t.R7$(4),t.Y8G("placeholder",t.bMT(10,14,"account.Email")),t.R7$(2),t.Y8G("ngIf",(null==(l=i.loginForm.get("email"))?null:l.errors)&&(null==(l=i.loginForm.get("email"))?null:l.touched)),t.R7$(3),t.Y8G("placeholder",t.bMT(15,16,"account.password"))("toggleMask",!0)("dir",i.isArabic()?"rtl":"ltr"),t.R7$(2),t.Y8G("ngIf",(null==(_=i.loginForm.get("password"))?null:_.errors)&&(null==(_=i.loginForm.get("password"))?null:_.touched)),t.R7$(2),t.JRh(t.bMT(19,18,"account.Forget_pass")),t.R7$(4),t.Y8G("ngIf",i.isloading),t.R7$(1),t.JRh(t.bMT(24,20,"account.Login"))}},dependencies:[c.MD,c.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,s.I,E.k,u.Wk,d.h,d.D9,p.Ou,p._2],styles:["[_nghost-%COMP%]     .p-password{width:100%}"]})}}return e})()},2571:(h,g,o)=>{o.d(g,{h:()=>u});var c=o(4412),a=o(7019);let u=(()=>{class s{constructor(){this.currentLang=new c.t("en"),this.vendorCurrentLang=new c.t("en"),this.currency=new c.t({label:"EGP",icon:"fi-eg"})}static{this.\u0275fac=function(p){return new(p||s)}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()}}]);