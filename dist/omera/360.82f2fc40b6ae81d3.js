"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[360],{360:(L,c,l)=>{l.r(c),l.d(c,{OrderDetailsComponent:()=>w});var a=l(6814),Z=l(8784),g=l(4257),u=l(4119),m=l(5334),_=l(5156),e=l(8926);function h(n,d){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&n){const r=d.$implicit;e.xp6(2),e.Oqu(null==r.product?null:r.product.title_en),e.xp6(2),e.Oqu(r.qty),e.xp6(2),e.Oqu(r.size),e.xp6(2),e.Oqu(r.color),e.xp6(2),e.AsE("",r.price," ",r.currency,""),e.xp6(2),e.AsE("",r.total," ",r.currency,"")}}let f=(()=>{class n{ngOnInit(){console.log("Receipt loaded:",this.order)}get subtotal(){return this.order?.vendor_total?.subtotal||0}get shipping(){return this.order?.vendor_total?.shipping_amount||0}get taxFee(){return this.order?.vendor_total?.tax_fee||0}get serviceFee(){return this.order?.vendor_total?.service_fee||0}get total(){return this.order?.vendor_total?.total||0}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-receipt"]],inputs:{order:"order"},standalone:!0,features:[e.jDz],decls:86,vars:22,consts:[[1,"receipt-container"],["receiptContent",""],[1,"header-bar"],[1,"receipt-header"],[1,"logo-section"],[1,"company-info"],["src","./assets/logo.svg","alt","logo",1,"logo-img"],[1,"payment-info"],[1,"bill-ship-section"],[1,"items-table"],[4,"ngFor","ngForOf"],[1,"totals-section"],[1,"left"],[1,"right"],[1,"footer-bar"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0,1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"h2"),e._uU(6,"RECEIPT"),e.qZA(),e.TgZ(7,"div",5)(8,"p")(9,"strong"),e._uU(10),e.qZA()(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.qZA()()(),e.TgZ(17,"div",4),e._UZ(18,"img",6),e.TgZ(19,"div",7)(20,"p")(21,"strong"),e._uU(22,"PAYMENT DATE:"),e.qZA(),e._uU(23),e.ALo(24,"date"),e.qZA(),e.TgZ(25,"p")(26,"strong"),e._uU(27,"RECEIPT NO.:"),e.qZA(),e._uU(28),e.qZA()()()(),e.TgZ(29,"div",8)(30,"div")(31,"strong"),e._uU(32,"BILL TO"),e.qZA(),e.TgZ(33,"p"),e._uU(34),e.qZA(),e.TgZ(35,"p"),e._uU(36),e.qZA(),e.TgZ(37,"p"),e._uU(38),e.qZA(),e.TgZ(39,"p"),e._uU(40),e.qZA()(),e.TgZ(41,"div")(42,"strong"),e._uU(43,"SHIP TO"),e.qZA(),e.TgZ(44,"p"),e._uU(45),e.qZA(),e.TgZ(46,"p"),e._uU(47),e.qZA(),e.TgZ(48,"p"),e._uU(49),e.qZA(),e.TgZ(50,"p"),e._uU(51),e.qZA()()(),e.TgZ(52,"table",9)(53,"thead")(54,"tr")(55,"th"),e._uU(56,"Name"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"QTY"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"SIZE"),e.qZA(),e.TgZ(61,"th"),e._uU(62,"COLOR"),e.qZA(),e.TgZ(63,"th"),e._uU(64,"UNIT PRICE"),e.qZA(),e.TgZ(65,"th"),e._uU(66,"TOTAL"),e.qZA()()(),e.TgZ(67,"tbody"),e.YNc(68,h,13,8,"tr",10),e.qZA()(),e.TgZ(69,"div",11)(70,"div",12)(71,"p"),e._uU(72,"Notes or remarks can go here..."),e.qZA()(),e.TgZ(73,"div",13)(74,"p"),e._uU(75),e.qZA(),e.TgZ(76,"p"),e._uU(77),e.qZA(),e.TgZ(78,"p"),e._uU(79),e.qZA(),e.TgZ(80,"p"),e._uU(81),e.qZA(),e.TgZ(82,"p")(83,"strong"),e._uU(84),e.qZA()()()(),e._UZ(85,"div",14),e.qZA()),2&o&&(e.xp6(10),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].vendor?null:t.order.orderitem[0].vendor.name_en),e.xp6(2),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].vendor?null:t.order.orderitem[0].vendor.email),e.xp6(2),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].vendor?null:t.order.orderitem[0].vendor.phone),e.xp6(2),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].vendor?null:t.order.orderitem[0].vendor.address),e.xp6(7),e.hij(" ",e.lcZ(24,20,null==t.order||null==t.order.orderitem[0]?null:t.order.orderitem[0].date),""),e.xp6(5),e.hij(" ",null==t.order||null==t.order.orderitem[0]?null:t.order.orderitem[0].oid,""),e.xp6(6),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.full_name),e.xp6(2),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.email),e.xp6(2),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.mobile),e.xp6(2),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.address),e.xp6(5),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.full_name),e.xp6(2),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.address),e.xp6(2),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.city),e.xp6(2),e.Oqu(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.country),e.xp6(17),e.Q6J("ngForOf",null==t.order?null:t.order.orderitem),e.xp6(7),e.hij("Subtotal: ",t.subtotal," EGP"),e.xp6(2),e.hij("Tax: ",t.taxFee," EGP"),e.xp6(2),e.hij("Shipping: ",t.shipping," EGP"),e.xp6(2),e.hij("Service Fee: ",t.serviceFee," EGP"),e.xp6(3),e.hij("Total: ",t.total," EGP"))},dependencies:[a.ez,a.sg,a.uU],styles:[".receipt-container[_ngcontent-%COMP%]{width:800px;margin:auto;font-family:Arial,sans-serif;background-color:#fff;color:#000;padding:20px;box-shadow:0 0 10px #ccc}.header-bar[_ngcontent-%COMP%], .footer-bar[_ngcontent-%COMP%]{height:10px;background-color:#a00000;margin-bottom:20px}.receipt-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;flex-direction:column}.logo[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background-color:#444;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700}.payment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0}.company-info[_ngcontent-%COMP%]{margin:10px 0;font-size:14px}.bill-ship-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:20px 0;font-size:14px}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px;font-size:14px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#a00000;color:#fff;padding:8px;text-align:left}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px}.totals-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px;font-size:14px}.totals-section[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;text-align:right}.print-btn[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#a00000;color:#fff;border:none;cursor:pointer}@media print{*[_ngcontent-%COMP%]{-webkit-print-color-adjust:exact!important;print-color-adjust:exact!important;color-adjust:exact!important}}"]})}return n})();var O=l(1178),A=l(4938),q=l(1373),T=l(5219);const v=["printSection"];function x(n,d){1&n&&(e.TgZ(0,"tr",17)(1,"th"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,8,"dashboard.product")),e.xp6(3),e.Oqu(e.lcZ(6,10,"dashboard.ProductName")),e.xp6(3),e.Oqu(e.lcZ(9,12,"dashboard.Category")),e.xp6(3),e.Oqu(e.lcZ(12,14,"dashboard.Quantity")),e.xp6(3),e.Oqu(e.lcZ(15,16,"dashboard.size")),e.xp6(3),e.Oqu(e.lcZ(18,18,"dashboard.color")),e.xp6(3),e.Oqu(e.lcZ(21,20,"dashboard.unit price")),e.xp6(3),e.Oqu(e.lcZ(24,22,"dashboard.total")))}function b(n,d){if(1&n){const r=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"img",18),e.NdJ("error",function(){const i=e.CHM(r).$implicit;return e.KtG(i.product.image="./assets/placeholder/placeholder2.jpg")}),e.qZA()(),e.TgZ(3,"td")(4,"span",19),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA()()}if(2&n){const r=d.$implicit;e.xp6(2),e.Q6J("src",r.product.image.length>0?r.product.image:"./assets/placeholder/placeholder2.jpg",e.LSH)("useSrcset",!0)("lazyLoad",r.product.image)("alt",r.product.title),e.xp6(3),e.Oqu(r.product.title_en),e.xp6(2),e.Oqu(r.product.category),e.xp6(2),e.Oqu(r.qty),e.xp6(2),e.Oqu(r.size),e.xp6(2),e.Oqu(r.color),e.xp6(2),e.Oqu(r.product.price_EGP),e.xp6(2),e.Oqu(r.total)}}const C=function(n,d,r){return{first:n,last:d,totalRecords:r}},U=function(){return[10,20,30]};function y(n,d){if(1&n&&(e.TgZ(0,"section",5)(1,"h1",6),e._UZ(2,"i",7),e._uU(3),e.qZA(),e.TgZ(4,"div",8)(5,"div",9)(6,"div",10)(7,"span"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"span",6),e._uU(11),e.qZA()()(),e.TgZ(12,"div",9)(13,"div",10)(14,"span"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"p",6),e._uU(18),e.qZA()()()(),e.TgZ(19,"div",11)(20,"div",9)(21,"div",10)(22,"span"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"p",6),e._uU(26),e.qZA()()(),e.TgZ(27,"div",9)(28,"div",10)(29,"span"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"p",6),e._uU(33),e.qZA()()(),e.TgZ(34,"div",9)(35,"div",10)(36,"span"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"p",6),e._uU(40),e.qZA()()()(),e.TgZ(41,"div",12)(42,"p-table",13,14),e.ALo(44,"translate"),e.YNc(45,x,25,24,"ng-template",15),e.YNc(46,b,18,11,"ng-template",16),e.qZA()()()),2&n){const r=e.MAs(43),o=e.oxw();e.xp6(3),e.hij("#",o.Oid," "),e.xp6(1),e.Q6J("dir",o.isArabic()?"rtl":"ltr")("lang",o.isArabic()?"ar":"en"),e.xp6(4),e.Oqu(e.lcZ(9,24,"dashboard.Total Price")),e.xp6(3),e.Oqu(null==o.data?null:o.data.vendor_total.total),e.xp6(4),e.Oqu(e.lcZ(16,26,"dashboard.shipping amount")),e.xp6(3),e.Oqu(null==o.data?null:o.data.vendor_total.shipping_amount),e.xp6(1),e.Q6J("dir",o.isArabic()?"rtl":"ltr")("lang",o.isArabic()?"ar":"en"),e.xp6(4),e.Oqu(e.lcZ(24,28,"dashboard.tax fee")),e.xp6(3),e.Oqu(null==o.data?null:o.data.vendor_total.tax_fee),e.xp6(4),e.Oqu(e.lcZ(31,30,"dashboard.service fee")),e.xp6(3),e.Oqu(null==o.data?null:o.data.vendor_total.service_fee),e.xp6(4),e.Oqu(e.lcZ(38,32,"dashboard.discount")),e.xp6(3),e.Oqu(null==o.data?null:o.data.vendor_total.saved),e.xp6(2),e.s9C("currentPageReportTemplate",e.xi3(44,34,"dashboard.SHOWING_ENTRIES",e.kEZ(37,C,r.first,r.rows?r.first+(r.rows-1):0,r.totalRecords))),e.Q6J("value",o.products)("paginator",!0)("rows",10)("rowsPerPageOptions",e.DdM(41,U))("first",o.first)("showCurrentPageReport",!0)("rowHover",!0)("filterDelay",0)}}function P(n,d){if(1&n){const r=e.EpF();e.TgZ(0,"div",20)(1,"div",21)(2,"div",22,23),e._UZ(4,"app-receipt",24),e.qZA(),e.TgZ(5,"div",25)(6,"button",26),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.print())}),e._uU(7,"Print"),e.qZA(),e.TgZ(8,"button",26),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.toggleReceipt())}),e._uU(9,"Cancel"),e.qZA()()()()}if(2&n){const r=e.oxw();e.xp6(4),e.Q6J("order",r.orderData)}}function M(n,d){1&n&&(e.TgZ(0,"div",27),e._UZ(1,"app-loading"),e.qZA())}let w=(()=>{class n{constructor(r,o,t,i){this._AdminDashboardService=r,this._ActivatedRoute=o,this.translate=t,this._CommonService=i,this.Oid="",this.first=0,this.loading=!0,this.currentLang="",this.showReceipt=!1}ngOnInit(){this.getOid(),this.getId(),this._CommonService.vendorCurrentLang.subscribe({next:r=>{this.currentLang=r,this.getOrderDetails()},error:r=>{console.log(r)}})}getOid(){this._ActivatedRoute.paramMap.subscribe({next:r=>{this.Oid=r.params.oid,console.log(this.Oid)},error:r=>{console.log(r)}})}getId(){const r=localStorage.getItem("eToken");if(null!==r){const o=(0,Z.o)(r);this.id=o,console.log(this.id),console.log(this.id.vendor_id)}else this.id="notLogin"}getOrderDetails(){this.loading=!0,this._AdminDashboardService.getOrderDetails(this.id.vendor_id,this.Oid,this.currentLang).subscribe({next:r=>{this.orderData=r,console.log(r),this.products=r.orderitem,this.data=r,this.loading=!1},error:r=>{console.log(r)}})}isArabic(){return"ar"===this.translate.currentLang}toggleReceipt(){this.showReceipt=!this.showReceipt}print(){if(!this.printSection)return;const r=this.printSection.nativeElement.cloneNode(!0);r.querySelectorAll("img").forEach(s=>{const p=s.getAttribute("src");p&&!p.startsWith("http")&&(s.src=`${location.origin}/${p}`)});const o=r.innerHTML,t=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')).map(s=>s.outerHTML).join(""),i=window.open("","_blank","width=800,height=600");i&&(i.document.open(),i.document.write(`\n      <html>\n        <head>\n          ${t}\n        </head>\n        <body onload="window.print(); window.close();">\n          ${o}\n        </body>\n      </html>\n    `),i.document.close())}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(O.U),e.Y36(A.gz),e.Y36(u.sK),e.Y36(q.v))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-order-details"]],viewQuery:function(o,t){if(1&o&&e.Gf(v,5),2&o){let i;e.iGM(i=e.CRH())&&(t.printSection=i.first)}},standalone:!0,features:[e.jDz],decls:7,vars:3,consts:[["class","container-fluid text-capitalize py-3",4,"ngIf","ngIfElse"],[2,"display","flex","justify-content","center"],[2,"background-color","#a00000","color","white","padding","8px 16px","border","none","border-radius","6px","cursor","pointer",3,"click"],["class","modal-backdrop",4,"ngIf"],["notload",""],[1,"container-fluid","text-capitalize","py-3"],[1,"h3"],[1,"fa-solid","fa-cart-shopping","text-info"],[1,"row","mt-4",3,"dir","lang"],[1,"col-12","col-sm-6","col-md-4","mb-3"],[1,"shadow","text-center","py-4","h-100","rounded-3","flex-column","d-flex"],[1,"row","my-4",3,"dir","lang"],[1,"table-responsive"],["styleClass","p-datatable-striped","dataKey","id",3,"value","paginator","rows","rowsPerPageOptions","first","showCurrentPageReport","rowHover","filterDelay","currentPageReportTemplate"],["dt2",""],["pTemplate","header"],["pTemplate","body"],[1,"text-capitalize"],["defaultImage","./assets/placeholder/placeholder2.jpg","width","70","height","70",1,"rounded-5",3,"src","useSrcset","lazyLoad","alt","error"],[1,"fs-6","fw-bold"],[1,"modal-backdrop"],[1,"modal-content"],["id","print-section"],["printSection",""],[3,"order"],[1,"modal-actions"],[3,"click"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(o,t){if(1&o&&(e.YNc(0,y,47,42,"section",0),e.TgZ(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.toggleReceipt()}),e._uU(3," Show Receipt "),e.qZA()(),e.YNc(4,P,10,1,"div",3),e.YNc(5,M,2,0,"ng-template",null,4,e.W1O)),2&o){const i=e.MAs(6);e.Q6J("ngIf",!t.loading)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",t.showReceipt)}},dependencies:[a.ez,a.O5,g.U$,g.iA,T.jx,u.aw,u.X$,m.mZ,m.z1,_.N,f],styles:['@charset "UTF-8";tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}[lang=ar][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:999}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;width:850px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0006;position:relative}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;gap:10px}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#a00000;color:#fff;padding:10px 20px;border:none;cursor:pointer}@media print{body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:not(#print-section):not(#print-section   *)[_ngcontent-%COMP%]{display:none!important}#print-section[_ngcontent-%COMP%]{position:static;width:100%;box-shadow:none;padding:0}.modal-actions[_ngcontent-%COMP%]{display:none}}.main-content[_ngcontent-%COMP%]{margin-left:250px;transition:margin-left .3s ease}@media (max-width: 992px){.main-content[_ngcontent-%COMP%]{margin-left:0}}']})}return n})()}}]);