"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[4193],{4193:(O,m,o)=>{o.r(m),o.d(m,{OrdersComponent:()=>A});var d=o(8147),c=o(177),g=o(8866),s=o(3856),P=o(1141),h=o(935),_=o(8676),b=o(9417),C=o(8542),M=o(1870),E=o(8325),t=o(7019),y=o(240),v=o(2571),D=o(5779);const x=["dt2"];function T(r,p){if(1&r){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.exportPDF())}),t.k0s()}}function I(r,p){if(1&r){const e=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"button",9),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.exportCSV())}),t.k0s(),t.j41(3,"button",10),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.exportExcel())}),t.k0s(),t.DNE(4,T,1,0,"button",11),t.k0s(),t.j41(5,"span",12),t.nrm(6,"i",13),t.j41(7,"input",14),t.bIt("ngModelChange",function(n){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filter=n)})("input",function(){t.eBV(e),t.XpG();const n=t.sdS(2),i=t.XpG();return t.Njj(n.filterGlobal(i.filter,"contains"))}),t.nI1(8,"translate"),t.k0s()()()}if(2&r){const e=t.XpG(2);t.Y8G("dir",e.isArabic()?"rtl":"ltr"),t.R7$(4),t.Y8G("ngIf",!e.isArabic()),t.R7$(3),t.Y8G("ngModel",e.filter)("placeholder",t.bMT(8,5,"dashboard.Search"))("lang",e.isArabic()?"ar":"en")}}function R(r,p){1&r&&(t.j41(0,"tr")(1,"th",16),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"p-sortIcon",17),t.k0s(),t.j41(5,"th",18),t.EFF(6),t.nI1(7,"translate"),t.nrm(8,"p-sortIcon",19),t.k0s(),t.j41(9,"th",20)(10,"div",21),t.EFF(11),t.nI1(12,"translate"),t.nrm(13,"p-sortIcon",22)(14,"p-columnFilter",23),t.k0s()(),t.j41(15,"th"),t.EFF(16),t.nI1(17,"translate"),t.k0s(),t.j41(18,"th"),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.j41(21,"th",24),t.EFF(22),t.nI1(23,"translate"),t.nrm(24,"p-sortIcon",25)(25,"p-columnFilter",26),t.k0s(),t.j41(26,"th"),t.EFF(27),t.nI1(28,"translate"),t.k0s()()),2&r&&(t.R7$(2),t.SpI(" ",t.bMT(3,7,"dashboard.ID")," "),t.R7$(4),t.SpI(" ",t.bMT(7,9,"dashboard.OrderName")," "),t.R7$(5),t.SpI(" ",t.bMT(12,11,"dashboard.Total Price")," "),t.R7$(5),t.SpI(" ",t.bMT(17,13,"dashboard.Status")," "),t.R7$(3),t.SpI(" ",t.bMT(20,15,"dashboard.Payment")," "),t.R7$(3),t.SpI(" ",t.bMT(23,17,"dashboard.Date")," "),t.R7$(5),t.JRh(t.bMT(28,19,"dashboard.Action")))}const j=function(r){return["/dashboard/orderDetails",r]};function S(r,p){if(1&r&&(t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"th"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.nrm(8,"p-tag",27),t.k0s(),t.j41(9,"td"),t.nrm(10,"p-tag",27),t.k0s(),t.j41(11,"td"),t.EFF(12),t.nI1(13,"date"),t.k0s(),t.j41(14,"td")(15,"div",28)(16,"button",29),t.nrm(17,"i",30),t.k0s()()()()),2&r){const e=p.$implicit,a=t.XpG(2);t.R7$(2),t.SpI("#",e.oid,""),t.R7$(2),t.JRh(e.full_name),t.R7$(2),t.JRh(e.total),t.R7$(2),t.Y8G("value",e.order_status)("severity",a.getSeverity(e.order_status)),t.R7$(2),t.Y8G("value",e.payment_status)("severity",a.getSeverity(e.payment_status)),t.R7$(2),t.JRh(t.i5U(13,9,e.date,"EEEE, MMMM d, y, h:mm:ss a")),t.R7$(4),t.Y8G("routerLink",t.eq3(12,j,e.oid))}}const k=function(r,p,e){return{first:r,last:p,totalRecords:e}},w=function(){return["oid","full_name"]},F=function(){return[25,50,100]};function L(r,p){if(1&r&&(t.j41(0,"section")(1,"p-table",2,3),t.nI1(3,"translate"),t.DNE(4,I,9,7,"ng-template",4),t.DNE(5,R,29,21,"ng-template",5),t.DNE(6,S,18,14,"ng-template",6),t.k0s()()),2&r){const e=t.sdS(2),a=t.XpG();t.R7$(1),t.FS9("currentPageReportTemplate",t.i5U(3,11,"dashboard.SHOWING_ENTRIES",t.sMw(14,k,e.first,e.rows?e.first+(e.rows-1):0,e.totalRecords))),t.Y8G("value",a.products)("paginator",!0)("loading",a.loading)("rows",25)("globalFilterFields",t.lJ4(18,w))("rowsPerPageOptions",t.lJ4(19,F))("first",a.first)("showCurrentPageReport",!0)("rowHover",!0)("filterDelay",0)}}function B(r,p){1&r&&(t.j41(0,"div",31),t.nrm(1,"app-loading"),t.k0s())}let A=(()=>{class r{constructor(e,a,n){this._AdminDashboardService=e,this.translate=a,this._CommonService=n,this.userData={},this.first=0,this.loading=!0,this.orderloading=!0,this.currentLang=""}ngOnInit(){this.decodeToken(),this._CommonService.vendorCurrentLang.subscribe({next:e=>{this.currentLang=e,this.getDashboardProduct()},error:e=>{console.log(e)}})}decodeToken(){const e=localStorage.getItem("eToken");null!==e&&(this.userData=(0,g.s)(e))}getDashboardProduct(){this.orderloading=!0,this._AdminDashboardService.getAllOrders(this.userData.vendor_id,this.currentLang).subscribe({next:e=>{this.products=e,console.log("product",this.products),this.loading=!1,this.orderloading=!1},error:e=>{console.log(e)}})}getSeverity(e){switch(e){case"paid":case"\u0645\u062f\u0641\u0648\u0639":return"success";case"Pending":case"\u0642\u064a\u062f \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631":return"warning";case"unpublished":return"danger"}return null}exportCSV(){if(this.products&&this.products.length>0){const e=this.isArabic()?["\u0643\u0648\u062f \u0627\u0644\u0645\u0646\u062a\u062c","\u0635\u0627\u062d\u0628 \u0627\u0644\u0637\u0644\u0628","\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0643\u0644\u0649","\u0627\u0644\u062d\u0627\u0644\u0629","\u062d\u0627\u0644\u0629 \u0627\u0644\u062f\u0641\u0639","\u0627\u0644\u062a\u0627\u0631\u064a\u062e"]:["ID","Order Owner","Total Price","Status","Payment","Date"],a=this.products.map(n=>[n.oid,n.full_name,n.total,n.order_status,n.payment_status,this.formatDate(n.date)]);this.exportTableToCSV(e,a,"products.csv")}else console.error("No data available for CSV export.")}exportTableToCSV(e,a,n){const i=e.join(",")+"\n"+a.map(U=>U.join(",")).join("\n"),l=new Blob([i],{type:"text/csv"}),f=window.URL.createObjectURL(l),u=document.createElement("a");u.setAttribute("href",f),u.setAttribute("download",n),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u)}formatDate(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}exportPDF(){if(this.products&&this.products.length>0){const e=["ID","Order Owner","Total Price","Status","Payment","Date"],a=this.products.map(n=>[n.oid,n.full_name,n.total,n.order_status,n.payment_status,this.formatDate(n.date)]);o.e(5378).then(o.bind(o,5378)).then(n=>{Promise.all([o.e(5378),o.e(4941)]).then(o.t.bind(o,4941,23)).then(i=>{const l=new n.default("p","px","a4");l.autoTable({head:[e],body:a}),l.save("products.pdf")})})}}exportExcel(){if(this.products&&this.products.length>0){const e=this.isArabic()?["\u0643\u0648\u062f \u0627\u0644\u0645\u0646\u062a\u062c","\u0635\u0627\u062d\u0628 \u0627\u0644\u0637\u0644\u0628","\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0643\u0644\u0649","\u0627\u0644\u062d\u0627\u0644\u0629","\u062d\u0627\u0644\u0629 \u0627\u0644\u062f\u0641\u0639","\u0627\u0644\u062a\u0627\u0631\u064a\u062e"]:["ID","Order Owner","Total Price","Status","Payment","Date"],a=this.products.map(n=>({[e[0]]:n.oid,[e[1]]:n.full_name,[e[2]]:n.total,[e[3]]:n.order_status,[e[4]]:n.payment_status,[e[5]]:this.formatDate(n.date)}));o.e(2288).then(o.bind(o,2288)).then(n=>{const l={Sheets:{data:n.utils.json_to_sheet(a)},SheetNames:["data"]},f=n.write(l,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(f,"products")})}}saveAsExcelFile(e,a){const n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=window.URL.createObjectURL(n),l=document.createElement("a");l.href=i,l.download=a+"_export_"+(new Date).getTime()+".xlsx",l.click(),window.URL.revokeObjectURL(i)}isArabic(){return"ar"===this.translate.currentLang}static{this.\u0275fac=function(a){return new(a||r)(t.rXU(y.p),t.rXU(d.c$),t.rXU(v.h))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-orders"]],viewQuery:function(a,n){if(1&a&&t.GBs(x,5),2&a){let i;t.mGM(i=t.lsd())&&(n.dt2=i.first)}},standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notload",""],["styleClass","p-datatable-striped",3,"value","paginator","loading","rows","globalFilterFields","rowsPerPageOptions","first","showCurrentPageReport","rowHover","filterDelay","currentPageReportTemplate"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"d-flex","justify-content-between",3,"dir"],[1,"d-flex","gap-2"],["type","button","pButton","","pRipple","","icon","pi pi-file","pTooltip","CSV","tooltipPosition","bottom",1,"mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","class","p-button-warning mr-2","pTooltip","PDF","tooltipPosition","bottom",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text",1,"p-inputtext","p-component","p-element",3,"ngModel","placeholder","lang","ngModelChange","input"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],["pSortableColumn","oid",2,"min-width","7rem"],["field","oid"],["pSortableColumn","full_name"],["field","full_name"],["pSortableColumn","total",2,"max-width","9rem"],[1,"d-flex","justify-content-between","align-items-center"],["field","total"],["type","numeric","field","total","display","menu","currency","EGP"],["pSortableColumn","date"],["field","date"],["type","date","field","date","display","menu"],[3,"value","severity"],[1,"d-flex","gap-1"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa-solid","fa-eye"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(a,n){if(1&a&&(t.DNE(0,L,7,20,"section",0),t.DNE(1,B,2,0,"ng-template",null,1,t.C5r)),2&a){const i=t.sdS(2);t.Y8G("ngIf",!n.orderloading)("ngIfElse",i)}},dependencies:[c.MD,c.bT,c.vh,s.bG,s.XI,D.Ei,s.Tg,s.yc,s.rl,h.$,h.v,P.tm,P._f,_.iV,b.YN,b.me,b.BC,b.vS,C.S,C.m,M.iI,M.Wk,d.h,d.D9,E.q],styles:[".single_quick_activity[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;transition:.5s;padding:20px;position:relative}.single_quick_activity[_ngcontent-%COMP%]   .count_content[_ngcontent-%COMP%]{position:relative;z-index:9}.single_quick_activity[_ngcontent-%COMP%]   .notification_btn[_ngcontent-%COMP%]{position:absolute;right:22px;top:32px}.notification_btn[_ngcontent-%COMP%]{font-size:10px;font-weight:400;color:#fff;background:#508ff4;display:inline-block;border-radius:3px;padding:4px 14px}.row-container[_ngcontent-%COMP%]{background-color:#f5f6ff}.single_quick_activity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{transition:.5s;font-size:14px;font-weight:700;color:#8890b5;line-height:1;margin-bottom:15px}[_nghost-%COMP%]     .text-green-500{color:#22c55e}[_nghost-%COMP%]     .text-red-500{color:#ff3d32}[_nghost-%COMP%]     .p-dropdown-items-wrapper{overflow:auto!important}[_nghost-%COMP%]     .p-datatable-loading-overlay{background-color:#fff!important}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-w-100{width:100%}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}@media screen and (max-width: 960px){[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th, [_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tfoot>tr>td{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{text-align:left;width:100%;display:flex;align-items:center;border:0 none}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{min-width:30%;display:inline-block;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td p-progressbar{width:100%}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td:last-child{border-bottom:1px solid var(--surface-d)}}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}}return r})()},8325:(O,m,o)=>{o.d(m,{q:()=>g});var d=o(177),c=o(7019);let g=(()=>{class s{static{this.\u0275fac=function(_){return new(_||s)}}static{this.\u0275cmp=c.VBU({type:s,selectors:[["app-loading"]],standalone:!0,features:[c.aNF],decls:1,vars:0,consts:[[1,"loader"]],template:function(_,b){1&_&&c.nrm(0,"span",0)},dependencies:[d.MD],styles:[".loader[_ngcontent-%COMP%]{width:60px;height:60px;border:8px solid #000000;border-bottom-color:var(--main-color);border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return s})()},2571:(O,m,o)=>{o.d(m,{h:()=>g});var d=o(4412),c=o(7019);let g=(()=>{class s{constructor(){this.currentLang=new d.t("en"),this.vendorCurrentLang=new d.t("en"),this.currency=new d.t({label:"EGP",icon:"fi-eg"})}static{this.\u0275fac=function(_){return new(_||s)}}static{this.\u0275prov=c.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()}}]);