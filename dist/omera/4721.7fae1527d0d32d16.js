"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[4721],{4721:(Y,m,r)=>{r.r(m),r.d(m,{DashboardChartsComponent:()=>I});var p=r(6814),x=r(8784),d=r(4257),C=r(6263),b=r(707),v=r(4055),g=r(6223),f=r(3259),y=r(4938),t=r(8926);let Z=(()=>{class a{transform(e){return Math.round(parseFloat(e))}static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275pipe=t.Yjl({name:"converttonumber",type:a,pure:!0,standalone:!0})}return a})();var _=r(5334),u=r(4119),P=r(5156),A=r(1178),T=r(2425),O=r(1373),D=r(5219);const M=["dt2"];function w(a,l){if(1&a&&(t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"p"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"h3")(9,"span",12),t._uU(10),t.qZA()()()()(),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"p"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"h3")(18,"span",12),t._uU(19),t.qZA()()()()(),t.TgZ(20,"div",9)(21,"div",10)(22,"div",11)(23,"p"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"h3")(27,"span",12),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()()()()),2&a){const e=l.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("dir",o.isArabic()?"rtl":"ltr")("lang",o.isArabic()?"ar":"en"),t.xp6(5),t.Oqu(t.lcZ(7,8,"dashboard.Products")),t.xp6(4),t.Oqu(e.products),t.xp6(5),t.Oqu(t.lcZ(16,10,"dashboard.num Orders")),t.xp6(4),t.Oqu(e.orders),t.xp6(5),t.Oqu(t.lcZ(25,12,"dashboard.Revenue")),t.xp6(4),t.Oqu(e.revenue+" "+t.lcZ(29,14,"currency.EGP"))}}function U(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.exportPDF())}),t.qZA()}}function k(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.exportCSV())}),t.qZA(),t.TgZ(3,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.exportExcel())}),t.qZA(),t.YNc(4,U,1,0,"button",17),t.qZA(),t.TgZ(5,"span",18),t._UZ(6,"i",19),t.TgZ(7,"input",20),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.filter=n)})("input",function(){t.CHM(e),t.oxw();const n=t.MAs(3),s=t.oxw();return t.KtG(n.filterGlobal(s.filter,"contains"))}),t.ALo(8,"translate"),t.qZA()()()}if(2&a){const e=t.oxw(2);t.Q6J("dir",e.isArabic()?"rtl":"ltr"),t.xp6(4),t.Q6J("ngIf",!e.isArabic()),t.xp6(3),t.Q6J("ngModel",e.filter)("placeholder",t.lcZ(8,5,"dashboard.Search"))("lang",e.isArabic()?"ar":"en")}}function E(a,l){if(1&a&&(t.TgZ(0,"tr",22)(1,"th"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",23),t._uU(5),t.ALo(6,"translate"),t._UZ(7,"p-sortIcon",24),t.qZA(),t.TgZ(8,"th",25)(9,"div",26),t._uU(10),t.ALo(11,"translate"),t._UZ(12,"p-sortIcon",27)(13,"p-columnFilter",28),t.qZA()(),t.TgZ(14,"th",29),t._uU(15),t.ALo(16,"translate"),t._UZ(17,"p-sortIcon",30),t.qZA(),t.TgZ(18,"th",31)(19,"div",26),t._uU(20),t.ALo(21,"translate"),t._UZ(22,"p-sortIcon",32)(23,"p-columnFilter",33),t.qZA()(),t.TgZ(24,"th",34)(25,"div",26),t._uU(26),t.ALo(27,"translate"),t._UZ(28,"p-sortIcon",35)(29,"p-columnFilter",36),t.qZA()(),t.TgZ(30,"th",37)(31,"div",38),t._uU(32),t.ALo(33,"translate"),t._UZ(34,"p-columnFilter",39),t.qZA()(),t.TgZ(35,"th",37),t._uU(36),t.ALo(37,"translate"),t.qZA()()),2&a){const e=t.oxw(2);t.Q6J("lang",e.isArabic()?"ar":"en")("dir",e.isArabic()?"rtl":"ltr"),t.xp6(2),t.Oqu(t.lcZ(3,10,"dashboard.image")),t.xp6(3),t.hij(" ",t.lcZ(6,12,"dashboard.Name")," "),t.xp6(5),t.hij(" ",t.lcZ(11,14,"dashboard.Price EGP")," "),t.xp6(5),t.hij(" ",t.lcZ(16,16,"dashboard.Category")," "),t.xp6(5),t.hij(" ",t.lcZ(21,18,"dashboard.Quantity")," "),t.xp6(6),t.hij(" ",t.lcZ(27,20,"dashboard.Rating")," "),t.xp6(6),t.hij(" ",t.lcZ(33,22,"dashboard.Stock")," "),t.xp6(4),t.Oqu(t.lcZ(37,24,"dashboard.Action"))}}function S(a,l){if(1&a&&(t._UZ(0,"i",54),t.ALo(1,"converttonumber")),2&a){const e=l.$implicit,o=t.oxw().$implicit;t.ekj("rating-color",e<=t.lcZ(1,2,o.rating))}}const L=function(){return[1,2,3,4,5]},q=function(a,l){return{"text-green-500 pi-check-circle":a,"text-red-500 pi-times-circle":l}},F=function(a,l){return["/product/details",a,l]},G=function(a){return["/dashboard/addproduct",a]};function J(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"tr",40)(1,"td",41)(2,"img",42),t.NdJ("error",function(){const s=t.CHM(e).$implicit;return t.KtG(s.image="./assets/placeholder/placeholder2.jpg")}),t.qZA()(),t.TgZ(3,"td",43),t._uU(4),t.qZA(),t.TgZ(5,"td",43),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"td",43),t._uU(9),t.qZA(),t.TgZ(10,"td",41),t._uU(11),t.qZA(),t.TgZ(12,"td",41)(13,"div",44),t.YNc(14,S,2,4,"i",45),t.qZA()(),t.TgZ(15,"td",41),t._UZ(16,"i",46),t.qZA(),t.TgZ(17,"td",41)(18,"div",47)(19,"button",48),t._UZ(20,"i",49),t.qZA(),t.TgZ(21,"button",50),t._UZ(22,"i",51),t.qZA(),t.TgZ(23,"button",52),t.NdJ("click",function(){const s=t.CHM(e).$implicit,i=t.oxw(2);return t.KtG(i.deleteProduct(s.pid))}),t._UZ(24,"i",53),t.qZA()()()()}if(2&a){const e=l.$implicit,o=t.oxw(2);t.Q6J("dir",o.isArabic()?"rtl":"ltr"),t.xp6(2),t.Q6J("src",e.image.length>0?e.image:"./assets/placeholder/placeholder2.jpg",t.LSH)("useSrcset",!0)("lazyLoad",e.image)("alt",e.title),t.xp6(1),t.Q6J("lang",o.isArabic()?"ar":"en"),t.xp6(1),t.Oqu(e.title_en),t.xp6(1),t.Q6J("lang",o.isArabic()?"ar":"en"),t.xp6(1),t.Oqu(e.price_EGP+" "+t.lcZ(7,16,"currency.EGP")),t.xp6(2),t.Q6J("lang",o.isArabic()?"ar":"en"),t.xp6(1),t.Oqu(e.category),t.xp6(2),t.Oqu(e.stock_qty),t.xp6(3),t.Q6J("ngForOf",t.DdM(18,L)),t.xp6(2),t.Q6J("ngClass",t.WLB(19,q,e.in_stock,!e.in_stock)),t.xp6(3),t.Q6J("routerLink",t.WLB(22,F,e.slug,o.productCurrency)),t.xp6(2),t.Q6J("routerLink",t.VKq(25,G,e.pid))}}const j=function(a,l,e){return{first:a,last:l,totalRecords:e}},R=function(){return["title","category"]},Q=function(){return[25,50,100]};function N(a,l){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,w,30,16,"div",2),t.TgZ(2,"p-table",3,4),t.ALo(4,"translate"),t.YNc(5,k,9,7,"ng-template",5),t.YNc(6,E,38,26,"ng-template",6),t.YNc(7,J,25,27,"ng-template",7),t.qZA()()),2&a){const e=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.HomeData),t.xp6(1),t.s9C("currentPageReportTemplate",t.xi3(4,12,"dashboard.SHOWING_ENTRIES",t.kEZ(15,j,e.first,e.rows?e.first+(e.rows-1):0,e.totalRecords))),t.Q6J("value",o.products)("paginator",!0)("loading",o.loading)("rows",25)("globalFilterFields",t.DdM(19,R))("rowsPerPageOptions",t.DdM(20,Q))("first",o.first)("showCurrentPageReport",!0)("rowHover",!0)("filterDelay",0)}}function H(a,l){1&a&&(t.TgZ(0,"div",55),t._UZ(1,"app-loading"),t.qZA())}let I=(()=>{class a{constructor(e,o,n,s){this._AdminDashboardService=e,this._ToastrService=o,this._CommonService=n,this.translate=s,this.userData={},this.HomeData=[],this.first=0,this.loading=!0,this.homeloading=!0,this.productCurrency=""}ngOnInit(){this.decodeToken(),this.getHomeData(),this._CommonService.vendorCurrentLang.subscribe({next:e=>{console.log(e),this.getDashboardProduct(e)},error:e=>{console.log(e)}}),this.category=[{title:"woman"},{title:"children"},{title:"man"}],this._CommonService.currency.subscribe({next:e=>{console.log(e),this.productCurrency=e.label},error:e=>{console.log(e)}})}decodeToken(){const e=localStorage.getItem("eToken");null!==e&&(this.userData=(0,x.o)(e))}getHomeData(){this.homeloading=!0,this._AdminDashboardService.getHomeData(this.userData.vendor_id).subscribe({next:e=>{this.HomeData=e,this.homeloading=!1,console.log(this.HomeData)},error:e=>{console.log(e)}})}getDashboardProduct(e){this.homeloading=!0,this._AdminDashboardService.getAdminProduct(this.userData.vendor_id,e).subscribe({next:o=>{this.products=o,this.homeloading=!1,console.log(this.products),this.loading=!1},error:o=>{console.log(o)}})}getSeverity(e){switch(e){case"published":return"success";case"unpublished":return"warning";case"unpublished":return"danger"}return null}filterProductsByCategory(e){return e?this.products.filter(o=>o.category.title===e):this.products}exportCSV(){if(this.products&&this.products.length>0){const e=this.isArabic()?["\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062c\u0646\u064a\u0647","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062f\u0631\u0647\u0645","\u0642\u0633\u0645","\u0627\u0644\u0643\u064a\u0645\u0629","\u0627\u0644\u062a\u0642\u064a\u064a\u0645"]:["Name","Price EGP","Price AED","Category","Quantity","Rating"],o=this.products.map(n=>[n.title,n.price_EGP,n.price_AED,n.category,n.stock_qty,n.rating]);this.exportTableToCSV(e,o,"products.csv")}else console.error("No data available for CSV export.")}exportTableToCSV(e,o,n){const s=e.join(",")+"\n"+o.map(z=>z.join(",")).join("\n"),i=new Blob([s],{type:"text/csv"}),h=window.URL.createObjectURL(i),c=document.createElement("a");c.setAttribute("href",h),c.setAttribute("download",n),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}exportPDF(){if(this.products&&this.products.length>0){const e=["\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062c\u0646\u064a\u0647","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062f\u0631\u0647\u0645","\u0627\u0644\u0642\u0633\u0645","\u0627\u0644\u0643\u0645\u064a\u0629","\u0627\u0644\u062a\u0642\u064a\u064a\u0645"],o=["Name","Price EGP","Price AED","Category","Quantity","Rating"],n=this.isArabic()?e:o,s=this.products.map(i=>[i.title?i.title:"",i.price_EGP?i.price_EGP.toString():"",i.price_AED?i.price_AED.toString():"",i.category?i.category:"",i.stock_qty?i.stock_qty.toString():"",i.rating?i.rating.toString():""]);r.e(9846).then(r.bind(r,9846)).then(i=>{Promise.all([r.e(9846),r.e(3403)]).then(r.t.bind(r,3403,23)).then(h=>{const c=new i.default("p","px","a4");this.isArabic()&&(c.setFont("Arial"),c.setFontSize(12)),c.autoTable({head:[n],body:s}),c.save("products.pdf")})})}}exportExcel(){if(this.products&&this.products.length>0){const e=this.isArabic()?["\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062c\u0646\u064a\u0647","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062f\u0631\u0647\u0645","\u0642\u0633\u0645","\u0627\u0644\u0643\u064a\u0645\u0629","\u0627\u0644\u062a\u0642\u064a\u064a\u0645"]:["Name","Price EGP","Price AED","Category","Quantity","Rating"],o=this.products.map(n=>({[e[0]]:n.title,[e[1]]:n.price_EGP,[e[2]]:n.price_AED,[e[3]]:n.category,[e[4]]:n.stock_qty,[e[5]]:n.rating}));r.e(1486).then(r.bind(r,1486)).then(n=>{const i={Sheets:{data:n.utils.json_to_sheet(o)},SheetNames:["data"]},h=n.write(i,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(h,"products")})}}saveAsExcelFile(e,o){const n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=window.URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download=o+"_export_"+(new Date).getTime()+".xlsx",i.click(),window.URL.revokeObjectURL(s)}deleteProduct(e){this.homeloading=!0,console.log("delete"),this._AdminDashboardService.deleteProduct(this.userData.vendor_id,e).subscribe({next:o=>{console.log(o),this._ToastrService.success(o.message),this.products=o.products,this.homeloading=!1,this.HomeData=[o.dashboard_stats]},error:o=>{console.log(o)}})}isArabic(){return"ar"===this.translate.currentLang}isFirstPage(){return 0===this.first}isLastPage(){return this.first>=this.dt2.totalRecords-this.dt2.rows}get totalPages(){return Math.ceil(this.dt2.totalRecords/this.dt2.rows)}changePage(e){this.first=e*this.dt2.rows}prevPage(){this.first-=this.dt2.rows}nextPage(){this.first+=this.dt2.rows}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(A.U),t.Y36(T._W),t.Y36(O.v),t.Y36(u.sK))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-charts"]],viewQuery:function(o,n){if(1&o&&t.Gf(M,5),2&o){let s;t.iGM(s=t.CRH())&&(n.dt2=s.first)}},standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notload",""],[4,"ngFor","ngForOf"],["styleClass","p-datatable-striped","dataKey","id",3,"value","paginator","loading","rows","globalFilterFields","rowsPerPageOptions","first","showCurrentPageReport","rowHover","filterDelay","currentPageReportTemplate"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"row","row-container","p-3",3,"dir","lang"],[1,"col-md-4"],[1,"single_quick_activity"],[1,"count_content"],[1,"counter"],[1,"d-flex","justify-content-between",3,"dir"],[1,"d-flex","gap-2"],["type","button","pButton","","pRipple","","icon","pi pi-file","pTooltip","CSV","tooltipPosition","bottom",1,"mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","class","p-button-warning mr-2","pTooltip","PDF","tooltipPosition","bottom",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text",1,"p-inputtext","p-component","p-element",3,"ngModel","placeholder","lang","ngModelChange","input"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],[3,"lang","dir"],["pSortableColumn","title",1,"text-center",2,"min-width","10rem"],["field","title"],["pSortableColumn","price_EGP",2,"min-width","11rem"],[1,"d-flex","justify-content-between","align-items-center"],["field","price_EGP"],["type","numeric","field","price_EGP","display","menu","currency","EGP"],["pSortableColumn","category",2,"min-width","10rem"],["field","category.title"],["pSortableColumn","stock_qty",2,"min-width","7rem"],["field","stock_qty"],["type","numeric","field","stock_qty","display","menu"],["pSortableColumn","rating"],["field","rating"],["type","numeric","field","rating","display","menu","max","5"],[2,"min-width","7rem"],[1,"d-flex","align-items-center"],["type","boolean","field","in_stock","display","menu"],[3,"dir"],[1,"text-center"],["defaultImage","./assets/placeholder/placeholder2.jpg","width","50","height","50",3,"src","useSrcset","lazyLoad","alt","error"],[1,"text-center",3,"lang"],[1,"d-flex","gap-2","align-items-center"],["class","fa-solid fa-star",3,"rating-color",4,"ngFor","ngForOf"],[1,"pi",3,"ngClass"],[1,"d-flex","gap-1"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa-solid","fa-eye"],[1,"btn","btn-success",3,"routerLink"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash"],[1,"fa-solid","fa-star"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(o,n){if(1&o&&(t.YNc(0,N,8,21,"div",0),t.YNc(1,H,2,0,"ng-template",null,1,t.W1O)),2&o){const s=t.MAs(2);t.Q6J("ngIf",!n.homeloading)("ngIfElse",s)}},dependencies:[p.ez,p.mk,p.sg,p.O5,d.U$,d.iA,D.jx,d.lQ,d.fz,d.xl,C.W,b.hJ,b.Hq,v.q4,g.u5,g.Fj,g.JJ,g.On,f.z,f.u,y.rH,Z,_.mZ,_.z1,u.aw,u.X$,P.N],styles:[".single_quick_activity[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;transition:.5s;padding:20px;position:relative}.single_quick_activity[_ngcontent-%COMP%]   .count_content[_ngcontent-%COMP%]{position:relative;z-index:9}.single_quick_activity[_ngcontent-%COMP%]   .notification_btn[_ngcontent-%COMP%]{position:absolute;right:22px;top:32px}.notification_btn[_ngcontent-%COMP%]{font-size:10px;font-weight:400;color:#fff;background:var(--main-color);display:inline-block;border-radius:3px;padding:4px 14px}.row-container[_ngcontent-%COMP%]{background-color:#f5f6ff}.single_quick_activity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{transition:.5s;font-size:14px;font-weight:700;color:#8890b5;line-height:1;margin-bottom:15px}[_nghost-%COMP%]     .text-green-500{color:#22c55e}[_nghost-%COMP%]     .text-red-500{color:#ff3d32}[_nghost-%COMP%]     .p-dropdown-items-wrapper{overflow:auto!important}[_nghost-%COMP%]     .p-datatable-loading-overlay{background-color:#fff!important}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-w-100{width:100%}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}@media screen and (max-width: 960px){[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th, [_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tfoot>tr>td{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{text-align:left;width:100%;display:flex;align-items:center;border:0 none}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{min-width:30%;display:inline-block;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td p-progressbar{width:100%}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td:last-child{border-bottom:1px solid var(--surface-d)}}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}return a})()}}]);