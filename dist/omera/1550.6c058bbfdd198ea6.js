"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[1550],{1550:(H,u,r)=>{r.r(u),r.d(u,{DashboardChartsComponent:()=>L});var p=r(177),C=r(8866),d=r(3856),v=r(935),b=r(1141),y=r(8676),h=r(9417),f=r(8542),x=r(1870),t=r(7019);let P=(()=>{class a{transform(e){return Math.round(parseFloat(e))}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275pipe=t.EJ8({name:"converttonumber",type:a,pure:!0,standalone:!0})}}return a})();var _=r(2241),m=r(8147),R=r(8325),k=r(240),F=r(5794),D=r(2571),E=r(5779);const j=["dt2"];function M(a,l){if(1&a&&(t.j41(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"h3")(9,"span",12),t.EFF(10),t.k0s()()()()(),t.j41(11,"div",9)(12,"div",10)(13,"div",11)(14,"p"),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"h3")(18,"span",12),t.EFF(19),t.k0s()()()()(),t.j41(20,"div",9)(21,"div",10)(22,"div",11)(23,"p"),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.j41(26,"h3")(27,"span",12),t.EFF(28),t.nI1(29,"translate"),t.k0s()()()()()()()),2&a){const e=l.$implicit,n=t.XpG(2);t.R7$(1),t.Y8G("dir",n.isArabic()?"rtl":"ltr")("lang",n.isArabic()?"ar":"en"),t.R7$(5),t.JRh(t.bMT(7,8,"dashboard.Products")),t.R7$(4),t.JRh(e.products),t.R7$(5),t.JRh(t.bMT(16,10,"dashboard.num Orders")),t.R7$(4),t.JRh(e.orders),t.R7$(5),t.JRh(t.bMT(25,12,"dashboard.Revenue")),t.R7$(4),t.JRh(e.revenue+" "+t.bMT(29,14,"currency.EGP"))}}function T(a,l){if(1&a){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(e);const o=t.XpG(3);return t.Njj(o.exportPDF())}),t.k0s()}}function G(a,l){if(1&a){const e=t.RV6();t.j41(0,"div",13)(1,"div",14)(2,"button",15),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.exportCSV())}),t.k0s(),t.j41(3,"button",16),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.exportExcel())}),t.k0s(),t.DNE(4,T,1,0,"button",17),t.k0s(),t.j41(5,"span",18),t.nrm(6,"i",19),t.j41(7,"input",20),t.bIt("ngModelChange",function(o){t.eBV(e);const s=t.XpG(2);return t.Njj(s.filter=o)})("input",function(){t.eBV(e),t.XpG();const o=t.sdS(3),s=t.XpG();return t.Njj(o.filterGlobal(s.filter,"contains"))}),t.nI1(8,"translate"),t.k0s()()()}if(2&a){const e=t.XpG(2);t.Y8G("dir",e.isArabic()?"rtl":"ltr"),t.R7$(4),t.Y8G("ngIf",!e.isArabic()),t.R7$(3),t.Y8G("ngModel",e.filter)("placeholder",t.bMT(8,5,"dashboard.Search"))("lang",e.isArabic()?"ar":"en")}}function O(a,l){if(1&a&&(t.j41(0,"tr",22)(1,"th"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"th",23),t.EFF(5),t.nI1(6,"translate"),t.nrm(7,"p-sortIcon",24),t.k0s(),t.j41(8,"th",25)(9,"div",26),t.EFF(10),t.nI1(11,"translate"),t.nrm(12,"p-sortIcon",27)(13,"p-columnFilter",28),t.k0s()(),t.j41(14,"th",29),t.EFF(15),t.nI1(16,"translate"),t.nrm(17,"p-sortIcon",30),t.k0s(),t.j41(18,"th",31)(19,"div",26),t.EFF(20),t.nI1(21,"translate"),t.nrm(22,"p-sortIcon",32)(23,"p-columnFilter",33),t.k0s()(),t.j41(24,"th",34)(25,"div",26),t.EFF(26),t.nI1(27,"translate"),t.nrm(28,"p-sortIcon",35)(29,"p-columnFilter",36),t.k0s()(),t.j41(30,"th",37)(31,"div",38),t.EFF(32),t.nI1(33,"translate"),t.nrm(34,"p-columnFilter",39),t.k0s()(),t.j41(35,"th",37),t.EFF(36),t.nI1(37,"translate"),t.k0s()()),2&a){const e=t.XpG(2);t.Y8G("lang",e.isArabic()?"ar":"en")("dir",e.isArabic()?"rtl":"ltr"),t.R7$(2),t.JRh(t.bMT(3,10,"dashboard.image")),t.R7$(3),t.SpI(" ",t.bMT(6,12,"dashboard.Name")," "),t.R7$(5),t.SpI(" ",t.bMT(11,14,"dashboard.Price EGP")," "),t.R7$(5),t.SpI(" ",t.bMT(16,16,"dashboard.Category")," "),t.R7$(5),t.SpI(" ",t.bMT(21,18,"dashboard.Quantity")," "),t.R7$(6),t.SpI(" ",t.bMT(27,20,"dashboard.Rating")," "),t.R7$(6),t.SpI(" ",t.bMT(33,22,"dashboard.Stock")," "),t.R7$(4),t.JRh(t.bMT(37,24,"dashboard.Action"))}}function S(a,l){if(1&a&&(t.nrm(0,"i",54),t.nI1(1,"converttonumber")),2&a){const e=l.$implicit,n=t.XpG().$implicit;t.AVh("rating-color",e<=t.bMT(1,2,n.rating))}}const I=function(){return[1,2,3,4,5]},w=function(a,l){return{"text-green-500 pi-check-circle":a,"text-red-500 pi-times-circle":l}},$=function(a,l){return["/product/details",a,l]},A=function(a){return["/dashboard/addproduct",a]};function N(a,l){if(1&a){const e=t.RV6();t.j41(0,"tr",40)(1,"td",41)(2,"img",42),t.bIt("error",function(){const s=t.eBV(e).$implicit;return t.Njj(s.image="./assets/placeholder/placeholder2.jpg")}),t.k0s()(),t.j41(3,"td",43),t.EFF(4),t.k0s(),t.j41(5,"td",43),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"td",43),t.EFF(9),t.k0s(),t.j41(10,"td",41),t.EFF(11),t.k0s(),t.j41(12,"td",41)(13,"div",44),t.DNE(14,S,2,4,"i",45),t.k0s()(),t.j41(15,"td",41),t.nrm(16,"i",46),t.k0s(),t.j41(17,"td",41)(18,"div",47)(19,"button",48),t.nrm(20,"i",49),t.k0s(),t.j41(21,"button",50),t.nrm(22,"i",51),t.k0s(),t.j41(23,"button",52),t.bIt("click",function(){const s=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.deleteProduct(s.pid))}),t.nrm(24,"i",53),t.k0s()()()()}if(2&a){const e=l.$implicit,n=t.XpG(2);t.Y8G("dir",n.isArabic()?"rtl":"ltr"),t.R7$(2),t.Y8G("src",e.image.length>0?e.image:"./assets/placeholder/placeholder2.jpg",t.B4B)("useSrcset",!0)("lazyLoad",e.image)("alt",e.title),t.R7$(1),t.Y8G("lang",n.isArabic()?"ar":"en"),t.R7$(1),t.JRh(e.title_en),t.R7$(1),t.Y8G("lang",n.isArabic()?"ar":"en"),t.R7$(1),t.JRh(e.price_EGP+" "+t.bMT(7,16,"currency.EGP")),t.R7$(2),t.Y8G("lang",n.isArabic()?"ar":"en"),t.R7$(1),t.JRh(e.category),t.R7$(2),t.JRh(e.stock_qty),t.R7$(3),t.Y8G("ngForOf",t.lJ4(18,I)),t.R7$(2),t.Y8G("ngClass",t.l_i(19,w,e.in_stock,!e.in_stock)),t.R7$(3),t.Y8G("routerLink",t.l_i(22,$,e.slug,n.productCurrency)),t.R7$(2),t.Y8G("routerLink",t.eq3(25,A,e.pid))}}const B=function(a,l,e){return{first:a,last:l,totalRecords:e}},V=function(){return["title","category"]},X=function(){return[25,50,100]};function Y(a,l){if(1&a&&(t.j41(0,"div"),t.DNE(1,M,30,16,"div",2),t.j41(2,"p-table",3,4),t.nI1(4,"translate"),t.DNE(5,G,9,7,"ng-template",5),t.DNE(6,O,38,26,"ng-template",6),t.DNE(7,N,25,27,"ng-template",7),t.k0s()()),2&a){const e=t.sdS(3),n=t.XpG();t.R7$(1),t.Y8G("ngForOf",n.HomeData),t.R7$(1),t.FS9("currentPageReportTemplate",t.i5U(4,12,"dashboard.SHOWING_ENTRIES",t.sMw(15,B,e.first,e.rows?e.first+(e.rows-1):0,e.totalRecords))),t.Y8G("value",n.products)("paginator",!0)("loading",n.loading)("rows",25)("globalFilterFields",t.lJ4(19,V))("rowsPerPageOptions",t.lJ4(20,X))("first",n.first)("showCurrentPageReport",!0)("rowHover",!0)("filterDelay",0)}}function J(a,l){1&a&&(t.j41(0,"div",55),t.nrm(1,"app-loading"),t.k0s())}let L=(()=>{class a{constructor(e,n,o,s){this._AdminDashboardService=e,this._ToastrService=n,this._CommonService=o,this.translate=s,this.userData={},this.HomeData=[],this.first=0,this.loading=!0,this.homeloading=!0,this.productCurrency=""}ngOnInit(){this.decodeToken(),this.getHomeData(),this._CommonService.vendorCurrentLang.subscribe({next:e=>{console.log(e),this.getDashboardProduct(e)},error:e=>{console.log(e)}}),this.category=[{title:"woman"},{title:"children"},{title:"man"}],this._CommonService.currency.subscribe({next:e=>{console.log(e),this.productCurrency=e.label},error:e=>{console.log(e)}})}decodeToken(){const e=localStorage.getItem("eToken");null!==e&&(this.userData=(0,C.s)(e))}getHomeData(){this.homeloading=!0,this._AdminDashboardService.getHomeData(this.userData.vendor_id).subscribe({next:e=>{this.HomeData=e,this.homeloading=!1,console.log(this.HomeData)},error:e=>{console.log(e)}})}getDashboardProduct(e){this.homeloading=!0,this._AdminDashboardService.getAdminProduct(this.userData.vendor_id,e).subscribe({next:n=>{this.products=n,this.homeloading=!1,console.log(this.products),this.loading=!1},error:n=>{console.log(n)}})}getSeverity(e){switch(e){case"published":return"success";case"unpublished":return"warning";case"unpublished":return"danger"}return null}filterProductsByCategory(e){return e?this.products.filter(n=>n.category.title===e):this.products}exportCSV(){if(this.products&&this.products.length>0){const e=this.isArabic()?["\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062c\u0646\u064a\u0647","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062f\u0631\u0647\u0645","\u0642\u0633\u0645","\u0627\u0644\u0643\u064a\u0645\u0629","\u0627\u0644\u062a\u0642\u064a\u064a\u0645"]:["Name","Price EGP","Price AED","Category","Quantity","Rating"],n=this.products.map(o=>[o.title,o.price_EGP,o.price_AED,o.category,o.stock_qty,o.rating]);this.exportTableToCSV(e,n,"products.csv")}else console.error("No data available for CSV export.")}exportTableToCSV(e,n,o){const s=e.join(",")+"\n"+n.map(U=>U.join(",")).join("\n"),i=new Blob([s],{type:"text/csv"}),g=window.URL.createObjectURL(i),c=document.createElement("a");c.setAttribute("href",g),c.setAttribute("download",o),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}exportPDF(){if(this.products&&this.products.length>0){const e=["\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062c\u0646\u064a\u0647","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062f\u0631\u0647\u0645","\u0627\u0644\u0642\u0633\u0645","\u0627\u0644\u0643\u0645\u064a\u0629","\u0627\u0644\u062a\u0642\u064a\u064a\u0645"],n=["Name","Price EGP","Price AED","Category","Quantity","Rating"],o=this.isArabic()?e:n,s=this.products.map(i=>[i.title?i.title:"",i.price_EGP?i.price_EGP.toString():"",i.price_AED?i.price_AED.toString():"",i.category?i.category:"",i.stock_qty?i.stock_qty.toString():"",i.rating?i.rating.toString():""]);r.e(5378).then(r.bind(r,5378)).then(i=>{Promise.all([r.e(5378),r.e(4941)]).then(r.t.bind(r,4941,23)).then(g=>{const c=new i.default("p","px","a4");this.isArabic()&&(c.setFont("Arial"),c.setFontSize(12)),c.autoTable({head:[o],body:s}),c.save("products.pdf")})})}}exportExcel(){if(this.products&&this.products.length>0){const e=this.isArabic()?["\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062c\u0646\u064a\u0647","\u0627\u0644\u0633\u0639\u0631 \u0628\u0627\u0644\u062f\u0631\u0647\u0645","\u0642\u0633\u0645","\u0627\u0644\u0643\u064a\u0645\u0629","\u0627\u0644\u062a\u0642\u064a\u064a\u0645"]:["Name","Price EGP","Price AED","Category","Quantity","Rating"],n=this.products.map(o=>({[e[0]]:o.title,[e[1]]:o.price_EGP,[e[2]]:o.price_AED,[e[3]]:o.category,[e[4]]:o.stock_qty,[e[5]]:o.rating}));r.e(2288).then(r.bind(r,2288)).then(o=>{const i={Sheets:{data:o.utils.json_to_sheet(n)},SheetNames:["data"]},g=o.write(i,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(g,"products")})}}saveAsExcelFile(e,n){const o=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=window.URL.createObjectURL(o),i=document.createElement("a");i.href=s,i.download=n+"_export_"+(new Date).getTime()+".xlsx",i.click(),window.URL.revokeObjectURL(s)}deleteProduct(e){this.homeloading=!0,console.log("delete"),this._AdminDashboardService.deleteProduct(this.userData.vendor_id,e).subscribe({next:n=>{console.log(n),this._ToastrService.success(n.message),this.products=n.products,this.homeloading=!1,this.HomeData=[n.dashboard_stats]},error:n=>{console.log(n)}})}isArabic(){return"ar"===this.translate.currentLang}isFirstPage(){return 0===this.first}isLastPage(){return this.first>=this.dt2.totalRecords-this.dt2.rows}get totalPages(){return Math.ceil(this.dt2.totalRecords/this.dt2.rows)}changePage(e){this.first=e*this.dt2.rows}prevPage(){this.first-=this.dt2.rows}nextPage(){this.first+=this.dt2.rows}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(k.p),t.rXU(F.tw),t.rXU(D.h),t.rXU(m.c$))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-dashboard-charts"]],viewQuery:function(n,o){if(1&n&&t.GBs(j,5),2&n){let s;t.mGM(s=t.lsd())&&(o.dt2=s.first)}},standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notload",""],[4,"ngFor","ngForOf"],["styleClass","p-datatable-striped","dataKey","id",3,"value","paginator","loading","rows","globalFilterFields","rowsPerPageOptions","first","showCurrentPageReport","rowHover","filterDelay","currentPageReportTemplate"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"row","row-container","p-3",3,"dir","lang"],[1,"col-md-4"],[1,"single_quick_activity"],[1,"count_content"],[1,"counter"],[1,"d-flex","justify-content-between",3,"dir"],[1,"d-flex","gap-2"],["type","button","pButton","","pRipple","","icon","pi pi-file","pTooltip","CSV","tooltipPosition","bottom",1,"mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","class","p-button-warning mr-2","pTooltip","PDF","tooltipPosition","bottom",3,"click",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text",1,"p-inputtext","p-component","p-element",3,"ngModel","placeholder","lang","ngModelChange","input"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],[3,"lang","dir"],["pSortableColumn","title",1,"text-center",2,"min-width","10rem"],["field","title"],["pSortableColumn","price_EGP",2,"min-width","11rem"],[1,"d-flex","justify-content-between","align-items-center"],["field","price_EGP"],["type","numeric","field","price_EGP","display","menu","currency","EGP"],["pSortableColumn","category",2,"min-width","10rem"],["field","category.title"],["pSortableColumn","stock_qty",2,"min-width","7rem"],["field","stock_qty"],["type","numeric","field","stock_qty","display","menu"],["pSortableColumn","rating"],["field","rating"],["type","numeric","field","rating","display","menu","max","5"],[2,"min-width","7rem"],[1,"d-flex","align-items-center"],["type","boolean","field","in_stock","display","menu"],[3,"dir"],[1,"text-center"],["defaultImage","./assets/placeholder/placeholder2.jpg","width","50","height","50",3,"src","useSrcset","lazyLoad","alt","error"],[1,"text-center",3,"lang"],[1,"d-flex","gap-2","align-items-center"],["class","fa-solid fa-star",3,"rating-color",4,"ngFor","ngForOf"],[1,"pi",3,"ngClass"],[1,"d-flex","gap-1"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa-solid","fa-eye"],[1,"btn","btn-success",3,"routerLink"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash"],[1,"fa-solid","fa-star"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(n,o){if(1&n&&(t.DNE(0,Y,8,21,"div",0),t.DNE(1,J,2,0,"ng-template",null,1,t.C5r)),2&n){const s=t.sdS(2);t.Y8G("ngIf",!o.homeloading)("ngIfElse",s)}},dependencies:[p.MD,p.YU,p.Sq,p.bT,d.bG,d.XI,E.Ei,d.Tg,d.yc,d.rl,v.$,b.tm,b._f,y.iV,h.YN,h.me,h.BC,h.vS,f.S,f.m,x.Wk,P,_.Un,_.Je,m.h,m.D9,R.q],styles:[".single_quick_activity[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;transition:.5s;padding:20px;position:relative}.single_quick_activity[_ngcontent-%COMP%]   .count_content[_ngcontent-%COMP%]{position:relative;z-index:9}.single_quick_activity[_ngcontent-%COMP%]   .notification_btn[_ngcontent-%COMP%]{position:absolute;right:22px;top:32px}.notification_btn[_ngcontent-%COMP%]{font-size:10px;font-weight:400;color:#fff;background:var(--main-color);display:inline-block;border-radius:3px;padding:4px 14px}.row-container[_ngcontent-%COMP%]{background-color:#f5f6ff}.single_quick_activity[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{transition:.5s;font-size:14px;font-weight:700;color:#8890b5;line-height:1;margin-bottom:15px}[_nghost-%COMP%]     .text-green-500{color:#22c55e}[_nghost-%COMP%]     .text-red-500{color:#ff3d32}[_nghost-%COMP%]     .p-dropdown-items-wrapper{overflow:auto!important}[_nghost-%COMP%]     .p-datatable-loading-overlay{background-color:#fff!important}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-w-100{width:100%}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}@media screen and (max-width: 960px){[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th, [_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tfoot>tr>td{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{text-align:left;width:100%;display:flex;align-items:center;border:0 none}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{min-width:30%;display:inline-block;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td p-progressbar{width:100%}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td:last-child{border-bottom:1px solid var(--surface-d)}}tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}"]})}}return a})()}}]);