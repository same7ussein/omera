"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[9685],{9685:(I,p,i)=>{i.r(p),i.d(p,{CartComponent:()=>w});var u=i(177),a=i(9417),t=i(7019);let c=(()=>{class s{transform(e,n){return Number(e)*Number(n)}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275pipe=t.EJ8({name:"productCost",type:s,pure:!0,standalone:!0})}}return s})();var _=i(8147),f=i(8325),d=i(2571),F=i(8240),x=i(3664),T=i(1870),k=i(5794);const E=["qty"],S=["input"];function j(s,h){if(1&s){const e=t.RV6();t.j41(0,"div",12)(1,"div",13),t.nrm(2,"img",14),t.k0s(),t.j41(3,"div",15)(4,"div",16)(5,"h3",17),t.EFF(6),t.k0s(),t.j41(7,"p",18)(8,"span",19),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.EFF(11),t.k0s(),t.j41(12,"p",18)(13,"span",19),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.EFF(16),t.k0s(),t.j41(17,"p",18)(18,"span",19),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.EFF(21),t.nI1(22,"translate"),t.k0s(),t.j41(23,"p",18)(24,"span",19),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.EFF(27),t.k0s(),t.j41(28,"p",18)(29,"span",19),t.EFF(30),t.nI1(31,"translate"),t.k0s(),t.EFF(32),t.k0s(),t.j41(33,"button",20),t.bIt("click",function(){const o=t.eBV(e).$implicit,m=t.XpG(2);return t.Njj(m.deleteItem(o.id))}),t.nrm(34,"i",21),t.EFF(35),t.nI1(36,"translate"),t.k0s()(),t.j41(37,"div")(38,"div",22)(39,"button",23),t.bIt("click",function(r){t.eBV(e);const o=t.XpG(2);return t.Njj(o.increaseCount(r))}),t.nrm(40,"i",24),t.k0s(),t.j41(41,"span",25,26),t.EFF(43),t.k0s(),t.j41(44,"button",23),t.bIt("click",function(r){t.eBV(e);const o=t.XpG(2);return t.Njj(o.minusCount(r))}),t.nrm(45,"i",27),t.k0s(),t.j41(46,"div")(47,"button",28,29),t.bIt("click",function(){const o=t.eBV(e).$implicit,m=t.XpG(2);return t.Njj(m.updateCart(o.product.id,o.price,o.shipping_amount,o.size,o.color))}),t.EFF(49),t.nI1(50,"translate"),t.nrm(51,"i",30),t.k0s()(),t.j41(52,"p",31),t.EFF(53),t.nI1(54,"productCost"),t.nI1(55,"translate"),t.k0s()()()(),t.nrm(56,"hr",32),t.k0s()}if(2&s){const e=h.$implicit,n=t.sdS(42),r=t.XpG(2);t.R7$(2),t.Y8G("src",e.product.image,t.B4B),t.R7$(4),t.JRh(e.product.title),t.R7$(1),t.Y8G("lang",r.isArabic()?"ar":"en"),t.R7$(2),t.SpI("",t.bMT(10,24,"cart.Size")," : "),t.R7$(2),t.JRh(e.size),t.R7$(1),t.Y8G("lang",r.isArabic()?"ar":"en"),t.R7$(2),t.SpI("",t.bMT(15,26,"cart.Color")," : "),t.R7$(2),t.JRh(e.color),t.R7$(1),t.Y8G("lang",r.isArabic()?"ar":"en"),t.R7$(2),t.SpI("",t.bMT(20,28,"cart.Price")," : "),t.R7$(2),t.Lme("",e.price," ",t.bMT(22,30,"currency."+e.currency),""),t.R7$(2),t.Y8G("lang",r.isArabic()?"ar":"en"),t.R7$(2),t.SpI("",t.bMT(26,32,"cart.brand")," : "),t.R7$(2),t.JRh(e.product.brand),t.R7$(1),t.Y8G("lang",r.isArabic()?"ar":"en"),t.R7$(2),t.SpI("",t.bMT(31,34,"cart.Category")," : "),t.R7$(2),t.JRh(e.product.category),t.R7$(3),t.SpI(" ",t.bMT(36,36,"cart.Remove")," "),t.R7$(8),t.JRh(e.qty),t.R7$(6),t.JRh(t.bMT(50,38,"cart.Update")),t.R7$(3),t.Y8G("lang",r.isArabic()?"ar":"en"),t.R7$(1),t.Lme("",t.i5U(54,40,e.price,n.innerText)," ",t.bMT(55,43,"currency."+e.currency),"")}}function $(s,h){if(1&s){const e=t.RV6();t.j41(0,"div",33)(1,"h5"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"p",34)(5,"span",19),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"span"),t.EFF(9),t.nI1(10,"translate"),t.k0s()(),t.j41(11,"p",34)(12,"span",19),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.j41(15,"span"),t.EFF(16),t.nI1(17,"translate"),t.k0s()(),t.j41(18,"p",34)(19,"span",19),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"span"),t.EFF(23),t.nI1(24,"translate"),t.k0s()(),t.j41(25,"p",34)(26,"span",19),t.EFF(27),t.nI1(28,"translate"),t.k0s(),t.j41(29,"span"),t.EFF(30),t.nI1(31,"translate"),t.k0s()(),t.nrm(32,"hr"),t.j41(33,"p",35)(34,"span"),t.EFF(35),t.nI1(36,"translate"),t.k0s(),t.j41(37,"span"),t.EFF(38),t.nI1(39,"translate"),t.k0s()(),t.j41(40,"button",36),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.checkOut())}),t.EFF(41),t.nI1(42,"translate"),t.k0s()()}if(2&s){const e=t.XpG(2);t.Y8G("lang",e.isArabic()?"ar":"en"),t.R7$(2),t.JRh(t.bMT(3,18,"cart.Cart Summary")),t.R7$(4),t.JRh(t.bMT(7,20,"cart.Subtotal")),t.R7$(3),t.Lme("",e.userCartTotalSummary.sub_total," ",t.bMT(10,22,"currency."+e.userCartProducts[0].currency),""),t.R7$(4),t.JRh(t.bMT(14,24,"cart.Shipping")),t.R7$(3),t.Lme("",e.userCartTotalSummary.shipping," ",t.bMT(17,26,"currency."+e.userCartProducts[0].currency),""),t.R7$(4),t.JRh(t.bMT(21,28,"cart.Tax")),t.R7$(3),t.Lme("",e.userCartTotalSummary.tax," ",t.bMT(24,30,"currency."+e.userCartProducts[0].currency),""),t.R7$(4),t.JRh(t.bMT(28,32,"cart.Service Fee")),t.R7$(3),t.Lme("",e.userCartTotalSummary.service_fee," ",t.bMT(31,34,"currency."+e.userCartProducts[0].currency),""),t.R7$(5),t.JRh(t.bMT(36,36,"cart.Total")),t.R7$(3),t.Lme("",e.userCartTotalSummary.total," ",t.bMT(39,38,"currency."+e.userCartProducts[0].currency),""),t.R7$(3),t.JRh(t.bMT(42,40,"cart.Got To Checkout"))}}function M(s,h){if(1&s&&(t.j41(0,"div",37)(1,"form",38)(2,"h4",39),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"div")(6,"label",40),t.nrm(7,"i",41),t.EFF(8),t.nI1(9,"translate"),t.k0s(),t.nrm(10,"input",42,43),t.k0s(),t.j41(12,"div",44)(13,"div",45)(14,"label",46),t.nrm(15,"i",47),t.EFF(16),t.nI1(17,"translate"),t.k0s(),t.nrm(18,"input",48,43),t.k0s(),t.j41(20,"div",45)(21,"label",49),t.nrm(22,"i",50),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.nrm(25,"input",51,43),t.k0s()()(),t.j41(27,"form",38)(28,"h4",52),t.EFF(29),t.nI1(30,"translate"),t.k0s(),t.j41(31,"div",44)(32,"div",45)(33,"label",53),t.EFF(34),t.nI1(35,"translate"),t.k0s(),t.nrm(36,"input",54,43),t.k0s(),t.j41(38,"div",45)(39,"label",55),t.EFF(40),t.nI1(41,"translate"),t.k0s(),t.nrm(42,"input",56,43),t.k0s()(),t.j41(44,"div",44)(45,"div",45)(46,"label",57),t.EFF(47),t.nI1(48,"translate"),t.k0s(),t.nrm(49,"input",58,43),t.k0s(),t.j41(51,"div",45)(52,"label",59),t.EFF(53),t.nI1(54,"translate"),t.k0s(),t.nrm(55,"input",60,43),t.k0s()()()()),2&s){const e=t.XpG(2);t.R7$(1),t.Y8G("formGroup",e.PersonalInfo),t.R7$(2),t.JRh(t.bMT(4,11,"cart.Personal Information")),t.R7$(5),t.SpI(" ",t.bMT(9,13,"cart.Full Name"),""),t.R7$(8),t.JRh(t.bMT(17,15,"cart.Email")),t.R7$(7),t.JRh(t.bMT(24,17,"cart.Mobile")),t.R7$(4),t.Y8G("formGroup",e.shippingAddress),t.R7$(2),t.JRh(t.bMT(30,19,"cart.Shipping Address")),t.R7$(5),t.SpI(" ",t.bMT(35,21,"cart.Address"),""),t.R7$(6),t.JRh(t.bMT(41,23,"cart.City")),t.R7$(7),t.JRh(t.bMT(48,25,"cart.State")),t.R7$(6),t.JRh(t.bMT(54,27,"cart.Country"))}}function G(s,h){if(1&s&&(t.j41(0,"div",61)(1,"p",62),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"img",63),t.k0s()()),2&s){const e=t.XpG(2);t.Y8G("lang",e.isArabic()?"ar":"en"),t.R7$(2),t.SpI("",t.bMT(3,2,"cart.Your Cart is empty")," ")}}function P(s,h){if(1&s&&(t.j41(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6),t.DNE(5,j,57,45,"div",7),t.k0s()(),t.DNE(6,$,43,42,"div",8),t.k0s(),t.j41(7,"div",9)(8,"div",5),t.DNE(9,M,57,29,"div",10),t.k0s()()(),t.DNE(10,G,5,4,"div",11),t.k0s()),2&s){const e=t.XpG();t.Y8G("dir",e.isArabic()?"rtl":"ltr"),t.R7$(5),t.Y8G("ngForOf",e.userCartProducts),t.R7$(1),t.Y8G("ngIf",0==e.noItems),t.R7$(3),t.Y8G("ngIf",0==e.noItems),t.R7$(1),t.Y8G("ngIf",e.noItems)}}function A(s,h){1&s&&(t.j41(0,"div",64),t.nrm(1,"app-loading"),t.k0s())}let w=(()=>{class s{constructor(e,n,r,o,m,g,C,v){this._CommonService=e,this._CartService=n,this._FormBuilder=r,this._AuthService=o,this._Router=m,this._Renderer2=g,this._ToastrService=C,this.translate=v,this.userCartProducts=[],this.userCartTotalSummary={},this.userId=0,this.noItems=!1,this.itemsCartCount=0,this.render=!1,this.cartloading=!0,this.currentLang="",this.PersonalInfo=this._FormBuilder.group({full_name:["",[a.k0.required]],email:["",[a.k0.required]],phone:["",[a.k0.required,a.k0.pattern(/^01[0125][0-9]{8}$/)]]}),this.shippingAddress=this._FormBuilder.group({Address:["",[a.k0.required]],City:["",[a.k0.required]],State:["",[a.k0.required]],Country:["",[a.k0.required]]})}isArabic(){return"ar"===this.translate.currentLang}getCartSummary(){this._CartService.getCartTotalSummary(this.userId,this.userId).subscribe({next:e=>{console.log("totalSummary",e),this.userCartTotalSummary=e},error:e=>{console.log(e)}})}getUserCart(){this.cartloading=!0,this._CartService.getUserCart(this.userId,this.userId,this.currentLang).subscribe({next:e=>{console.log("CART",e),this.userCartProducts=e,0==e.length&&(this.noItems=!0),this.cartloading=!1,this.render=!0},error:e=>{console.log(e),this.render=!0}})}ngOnInit(){this._AuthService.decodeToken(),"notLogin"!==this._AuthService.userInfo?(this.userId=this._AuthService.userInfo.user_id,this._CommonService.currentLang.subscribe({next:e=>{console.log(e,"cartlang"),this.currentLang=e,this.getUserCart()},error:e=>{console.log(e)}}),this.getCartSummary()):(console.log("visitor"),this.render=!0,this.noItems=!0)}increaseCount(e){let n=Number(e.target.closest(".parent").children[1].innerText);n++,e.target.closest(".parent").children[1].innerText=n}minusCount(e){let n=Number(e.target.closest(".parent").children[1].innerText);n--,1==n&&(e.target.closest(".parent").children[1].innerText=1),n>1&&(e.target.closest(".parent").children[1].innerText=n)}checkOut(){if(this.PersonalInfo.valid&&this.shippingAddress.valid){const e=this._FormBuilder.group({full_name:this.PersonalInfo.get("full_name")?.value,user_id:this.userId,email:this.PersonalInfo.get("email")?.value,mobile:this.PersonalInfo.get("phone")?.value,address:this.shippingAddress.get("Address")?.value,country:this.shippingAddress.get("Country")?.value,state:this.shippingAddress.get("State")?.value,city:this.shippingAddress.get("City")?.value,cart_id:this.userId}),n=new FormData;Object.keys(e.value).forEach(r=>{n.append(r,e.get(r)?.value)}),this._CartService.createOrder(n).subscribe({next:r=>{console.log(r),"Order created successfully"==r.message&&this._Router.navigate(["/checkOut",r.order_oid])},error:r=>{console.log(r)}})}else for(const e of this.inputs)""==e.nativeElement.value?this._Renderer2.addClass(e.nativeElement,"is-invalid"):(this._Renderer2.removeClass(e.nativeElement,"is-invalid"),this._Renderer2.addClass(e.nativeElement,"is-valid"))}updateCart(e,n,r,o,m){this._AuthService.decodeToken();const g=this._AuthService.userInfo.user_id;let C=Number(this.itemQty.nativeElement.innerText);console.log(C);let v="";this._CartService.getUserCountry().subscribe({next:l=>{v=l},error:l=>{}});const R=this._FormBuilder.group({product_id:e,user_id:g,qty:C,price:n,shipping_amount:r,country:v,size:o,color:m,cart_id:g,currency:this.userCartProducts[0].currency}),y=new FormData;Object.keys(R.value).forEach(l=>{y.append(l,R.get(l)?.value)}),this._CartService.updateCart(y,this.currentLang).subscribe({next:l=>{console.log("up",l),this.getCartSummary(),"Cart Updated Successfully"==l.message&&"en"==this.currentLang?(this._ToastrService.success("Your update is done"),document.querySelector(".overlay-container").style.direction="ltr"):"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0633\u0644\u0629 \u0628\u0646\u062c\u0627\u062d"==l.message&&"ar"==this.currentLang&&(this._ToastrService.success("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d"),document.querySelector(".overlay-container").style.direction="rtl")},error:l=>{console.log(l),console.log(y)}})}deleteItem(e){this._CartService.removeItem(this.userId,e,this.userId).subscribe({next:n=>{console.log(n),null==n&&(this.getUserCart(),this.getCartSummary(),null==n&&"en"==this.currentLang?(this._ToastrService.success("The Product was removed"),document.querySelector(".overlay-container").style.direction="ltr"):null==n&&"ar"==this.currentLang&&(this._ToastrService.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0645\u0646 \u0639\u0631\u0628\u0629 \u0627\u0644\u062a\u0633\u0648\u0642"),document.querySelector(".overlay-container").style.direction="rtl"),this._CartService.getUserCart(this.userId,this.userId,this.currentLang).subscribe({next:r=>{this.itemsCartCount=r.length,this._CartService.cartItemsNumber.next(this.itemsCartCount)},error:r=>{console.log(r)}}))},error:n=>{console.log(n)}})}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(d.h),t.rXU(F.m),t.rXU(a.ok),t.rXU(x.u),t.rXU(T.Ix),t.rXU(t.sFG),t.rXU(k.tw),t.rXU(_.c$))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-cart"]],viewQuery:function(n,r){if(1&n&&(t.GBs(E,5),t.GBs(S,5)),2&n){let o;t.mGM(o=t.lsd())&&(r.itemQty=o.first),t.mGM(o=t.lsd())&&(r.inputs=o)}},standalone:!0,features:[t.aNF],decls:3,vars:2,consts:[["class","my-5",3,"dir",4,"ngIf","ngIfElse"],["notload",""],[1,"my-5",3,"dir"],[1,"container"],[1,"row","g-5"],[1,"col-md-8"],[1,"userProducts","pe-3"],["class","row p-2",4,"ngFor","ngForOf"],["class","col-md-4",3,"lang",4,"ngIf"],[1,"row"],["class","userData mt-5",4,"ngIf"],["class","py-3 text-white rounded-2 mx-auto",3,"lang",4,"ngIf"],[1,"row","p-2"],[1,"col-md-2"],["alt","",1,"w-100",3,"src"],[1,"col-md-10","d-flex","justify-content-between"],[1,"itemData","d-flex","flex-column","gap-2"],[1,"title-cell"],[3,"lang"],[1,"text-secondary"],[1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash","mx-2"],[1,"parent"],[1,"btn-main","px-3","py-1",3,"click"],[1,"fa-solid","fa-plus"],[1,"m-auto","mx-2"],["qty",""],[1,"fa-solid","fa-minus"],[1,"btn-main","px-3","py-2","w-100","mt-2",3,"click"],["updateBtn",""],[1,"fa-solid","fa-arrows-rotate","mx-2"],[1,"text-center","mt-3","fw-bold","h5",3,"lang"],[1,"my-3"],[1,"col-md-4",3,"lang"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","my-3"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","fw-bold","my-3"],[1,"btn-main","w-100",3,"click"],[1,"userData","mt-5"],[3,"formGroup"],[1,"mb-4"],["for","name"],[1,"fa-solid","fa-user","mx-2"],["type","text","id","name","formControlName","full_name",1,"form-control","w-100"],["input",""],[1,"d-flex","justify-content-between","gap-3"],[1,"w-50"],["for","email"],[1,"fa-solid","fa-envelope","mx-2"],["type","email","id","email","formControlName","email",1,"form-control","w-100"],["for","phone"],[1,"fa-solid","fa-phone","mx-2"],["type","tel","id","phone","formControlName","phone",1,"form-control","w-100"],[1,"my-4"],["for","address"],["type","text","id","address","formControlName","Address",1,"form-control","w-100"],["for","City"],["type","text","id","City","formControlName","City",1,"form-control","w-100"],["for","State"],["type","text","id","State","formControlName","State",1,"form-control","w-100"],["for","Country"],["type","text","id","Country","formControlName","Country",1,"form-control","w-100"],[1,"py-3","text-white","rounded-2","mx-auto",3,"lang"],[1,"text-center","h1","text-danger"],["src","./assets/cart.png","alt","","height","150"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(n,r){if(1&n&&(t.DNE(0,P,11,5,"section",0),t.DNE(1,A,2,0,"ng-template",null,1,t.C5r)),2&n){const o=t.sdS(2);t.Y8G("ngIf",r.render&&!r.cartloading)("ngIfElse",o)}},dependencies:[u.MD,u.Sq,u.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,c,_.h,_.D9,f.q],styles:[".userProducts[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;overflow-x:hidden}input[_ngcontent-%COMP%]{margin:15px 0}"]})}}return s})()},8325:(I,p,i)=>{i.d(p,{q:()=>t});var u=i(177),a=i(7019);let t=(()=>{class c{static{this.\u0275fac=function(d){return new(d||c)}}static{this.\u0275cmp=a.VBU({type:c,selectors:[["app-loading"]],standalone:!0,features:[a.aNF],decls:1,vars:0,consts:[[1,"loader"]],template:function(d,F){1&d&&a.nrm(0,"span",0)},dependencies:[u.MD],styles:[".loader[_ngcontent-%COMP%]{width:60px;height:60px;border:8px solid #000000;border-bottom-color:var(--main-color);border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return c})()},2571:(I,p,i)=>{i.d(p,{h:()=>t});var u=i(4412),a=i(7019);let t=(()=>{class c{constructor(){this.currentLang=new u.t("en"),this.vendorCurrentLang=new u.t("en"),this.currency=new u.t({label:"EGP",icon:"fi-eg"})}static{this.\u0275fac=function(d){return new(d||c)}}static{this.\u0275prov=a.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()}}]);