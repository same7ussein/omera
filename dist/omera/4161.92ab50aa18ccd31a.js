"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[4161],{4161:(T,u,l)=>{l.r(u),l.d(u,{OrderDetailsComponent:()=>I});var a=l(177),h=l(8866),m=l(3856),c=l(8147),g=l(2241),F=l(8325),e=l(7019);function f(o,d){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s()()),2&o){const r=d.$implicit;e.R7$(2),e.JRh(null==r.product?null:r.product.title_en),e.R7$(2),e.JRh(r.qty),e.R7$(2),e.JRh(r.size),e.R7$(2),e.JRh(r.color),e.R7$(2),e.Lme("",r.price," ",r.currency,""),e.R7$(2),e.Lme("",r.total," ",r.currency,"")}}let R=(()=>{class o{ngOnInit(){console.log("Receipt loaded:",this.order)}get subtotal(){return this.order?.vendor_total?.subtotal||0}get shipping(){return this.order?.vendor_total?.shipping_amount||0}get taxFee(){return this.order?.vendor_total?.tax_fee||0}get serviceFee(){return this.order?.vendor_total?.service_fee||0}get total(){return this.order?.vendor_total?.total||0}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-receipt"]],inputs:{order:"order"},standalone:!0,features:[e.aNF],decls:86,vars:22,consts:[[1,"receipt-container"],["receiptContent",""],[1,"header-bar"],[1,"receipt-header"],[1,"logo-section"],[1,"company-info"],["src","./assets/logo.svg","alt","logo",1,"logo-img"],[1,"payment-info"],[1,"bill-ship-section"],[1,"items-table"],[4,"ngFor","ngForOf"],[1,"totals-section"],[1,"left"],[1,"right"],[1,"footer-bar"]],template:function(n,t){1&n&&(e.j41(0,"div",0,1),e.nrm(2,"div",2),e.j41(3,"div",3)(4,"div",4)(5,"h2"),e.EFF(6,"RECEIPT"),e.k0s(),e.j41(7,"div",5)(8,"p")(9,"strong"),e.EFF(10),e.k0s()(),e.j41(11,"p"),e.EFF(12),e.k0s(),e.j41(13,"p"),e.EFF(14),e.k0s(),e.j41(15,"p"),e.EFF(16),e.k0s()()(),e.j41(17,"div",4),e.nrm(18,"img",6),e.j41(19,"div",7)(20,"p")(21,"strong"),e.EFF(22,"PAYMENT DATE:"),e.k0s(),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"p")(26,"strong"),e.EFF(27,"RECEIPT NO.:"),e.k0s(),e.EFF(28),e.k0s()()()(),e.j41(29,"div",8)(30,"div")(31,"strong"),e.EFF(32,"BILL TO"),e.k0s(),e.j41(33,"p"),e.EFF(34),e.k0s(),e.j41(35,"p"),e.EFF(36),e.k0s(),e.j41(37,"p"),e.EFF(38),e.k0s(),e.j41(39,"p"),e.EFF(40),e.k0s()(),e.j41(41,"div")(42,"strong"),e.EFF(43,"SHIP TO"),e.k0s(),e.j41(44,"p"),e.EFF(45),e.k0s(),e.j41(46,"p"),e.EFF(47),e.k0s(),e.j41(48,"p"),e.EFF(49),e.k0s(),e.j41(50,"p"),e.EFF(51),e.k0s()()(),e.j41(52,"table",9)(53,"thead")(54,"tr")(55,"th"),e.EFF(56,"Name"),e.k0s(),e.j41(57,"th"),e.EFF(58,"QTY"),e.k0s(),e.j41(59,"th"),e.EFF(60,"SIZE"),e.k0s(),e.j41(61,"th"),e.EFF(62,"COLOR"),e.k0s(),e.j41(63,"th"),e.EFF(64,"UNIT PRICE"),e.k0s(),e.j41(65,"th"),e.EFF(66,"TOTAL"),e.k0s()()(),e.j41(67,"tbody"),e.DNE(68,f,13,8,"tr",10),e.k0s()(),e.j41(69,"div",11)(70,"div",12)(71,"p"),e.EFF(72,"Notes or remarks can go here..."),e.k0s()(),e.j41(73,"div",13)(74,"p"),e.EFF(75),e.k0s(),e.j41(76,"p"),e.EFF(77),e.k0s(),e.j41(78,"p"),e.EFF(79),e.k0s(),e.j41(80,"p"),e.EFF(81),e.k0s(),e.j41(82,"p")(83,"strong"),e.EFF(84),e.k0s()()()(),e.nrm(85,"div",14),e.k0s()),2&n&&(e.R7$(10),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].vendor?null:t.order.orderitem[0].vendor.name_en),e.R7$(2),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].vendor?null:t.order.orderitem[0].vendor.email),e.R7$(2),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].vendor?null:t.order.orderitem[0].vendor.phone),e.R7$(2),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].vendor?null:t.order.orderitem[0].vendor.address),e.R7$(7),e.SpI(" ",e.bMT(24,20,null==t.order||null==t.order.orderitem[0]?null:t.order.orderitem[0].date),""),e.R7$(5),e.SpI(" ",null==t.order||null==t.order.orderitem[0]?null:t.order.orderitem[0].oid,""),e.R7$(6),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.full_name),e.R7$(2),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.email),e.R7$(2),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.mobile),e.R7$(2),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.address),e.R7$(5),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.full_name),e.R7$(2),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.address),e.R7$(2),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.city),e.R7$(2),e.JRh(null==t.order||null==t.order.orderitem[0]||null==t.order.orderitem[0].order?null:t.order.orderitem[0].order.country),e.R7$(17),e.Y8G("ngForOf",null==t.order?null:t.order.orderitem),e.R7$(7),e.SpI("Subtotal: ",t.subtotal," EGP"),e.R7$(2),e.SpI("Tax: ",t.taxFee," EGP"),e.R7$(2),e.SpI("Shipping: ",t.shipping," EGP"),e.R7$(2),e.SpI("Service Fee: ",t.serviceFee," EGP"),e.R7$(3),e.SpI("Total: ",t.total," EGP"))},dependencies:[a.MD,a.Sq,a.vh],styles:[".receipt-container[_ngcontent-%COMP%]{width:800px;margin:auto;font-family:Arial,sans-serif;background-color:#fff;color:#000;padding:20px;box-shadow:0 0 10px #ccc}.header-bar[_ngcontent-%COMP%], .footer-bar[_ngcontent-%COMP%]{height:10px;background-color:#a00000;margin-bottom:20px}.receipt-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;flex-direction:column}.logo[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background-color:#444;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700}.payment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0}.company-info[_ngcontent-%COMP%]{margin:10px 0;font-size:14px}.bill-ship-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:20px 0;font-size:14px}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px;font-size:14px}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#a00000;color:#fff;padding:8px;text-align:left}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px}.totals-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px;font-size:14px}.totals-section[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;text-align:right}.print-btn[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#a00000;color:#fff;border:none;cursor:pointer}@media print{*[_ngcontent-%COMP%]{-webkit-print-color-adjust:exact!important;print-color-adjust:exact!important;color-adjust:exact!important}}"]})}}return o})();var b=l(240),v=l(1870),E=l(2571),j=l(5779);const _=["printSection"];function k(o,d){1&o&&(e.j41(0,"tr",17)(1,"th"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"th"),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"th"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"th"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"th"),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.j41(16,"th"),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"th"),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.j41(22,"th"),e.EFF(23),e.nI1(24,"translate"),e.k0s()()),2&o&&(e.R7$(2),e.JRh(e.bMT(3,8,"dashboard.product")),e.R7$(3),e.JRh(e.bMT(6,10,"dashboard.ProductName")),e.R7$(3),e.JRh(e.bMT(9,12,"dashboard.Category")),e.R7$(3),e.JRh(e.bMT(12,14,"dashboard.Quantity")),e.R7$(3),e.JRh(e.bMT(15,16,"dashboard.size")),e.R7$(3),e.JRh(e.bMT(18,18,"dashboard.color")),e.R7$(3),e.JRh(e.bMT(21,20,"dashboard.unit price")),e.R7$(3),e.JRh(e.bMT(24,22,"dashboard.total")))}function O(o,d){if(1&o){const r=e.RV6();e.j41(0,"tr")(1,"td")(2,"img",18),e.bIt("error",function(){const i=e.eBV(r).$implicit;return e.Njj(i.product.image="./assets/placeholder/placeholder2.jpg")}),e.k0s()(),e.j41(3,"td")(4,"span",19),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.EFF(17),e.k0s()()}if(2&o){const r=d.$implicit;e.R7$(2),e.Y8G("src",r.product.image.length>0?r.product.image:"./assets/placeholder/placeholder2.jpg",e.B4B)("useSrcset",!0)("lazyLoad",r.product.image)("alt",r.product.title),e.R7$(3),e.JRh(r.product.title_en),e.R7$(2),e.JRh(r.product.category),e.R7$(2),e.JRh(r.qty),e.R7$(2),e.JRh(r.size),e.R7$(2),e.JRh(r.color),e.R7$(2),e.JRh(r.product.price_EGP),e.R7$(2),e.JRh(r.total)}}const C=function(o,d,r){return{first:o,last:d,totalRecords:r}},$=function(){return[10,20,30]};function y(o,d){if(1&o&&(e.j41(0,"section",5)(1,"h1",6),e.nrm(2,"i",7),e.EFF(3),e.k0s(),e.j41(4,"div",8)(5,"div",9)(6,"div",10)(7,"span"),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"span",6),e.EFF(11),e.k0s()()(),e.j41(12,"div",9)(13,"div",10)(14,"span"),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"p",6),e.EFF(18),e.k0s()()()(),e.j41(19,"div",11)(20,"div",9)(21,"div",10)(22,"span"),e.EFF(23),e.nI1(24,"translate"),e.k0s(),e.j41(25,"p",6),e.EFF(26),e.k0s()()(),e.j41(27,"div",9)(28,"div",10)(29,"span"),e.EFF(30),e.nI1(31,"translate"),e.k0s(),e.j41(32,"p",6),e.EFF(33),e.k0s()()(),e.j41(34,"div",9)(35,"div",10)(36,"span"),e.EFF(37),e.nI1(38,"translate"),e.k0s(),e.j41(39,"p",6),e.EFF(40),e.k0s()()()(),e.j41(41,"div",12)(42,"p-table",13,14),e.nI1(44,"translate"),e.DNE(45,k,25,24,"ng-template",15),e.DNE(46,O,18,11,"ng-template",16),e.k0s()()()),2&o){const r=e.sdS(43),n=e.XpG();e.R7$(3),e.SpI("#",n.Oid," "),e.R7$(1),e.Y8G("dir",n.isArabic()?"rtl":"ltr")("lang",n.isArabic()?"ar":"en"),e.R7$(4),e.JRh(e.bMT(9,24,"dashboard.Total Price")),e.R7$(3),e.JRh(null==n.data?null:n.data.vendor_total.total),e.R7$(4),e.JRh(e.bMT(16,26,"dashboard.shipping amount")),e.R7$(3),e.JRh(null==n.data?null:n.data.vendor_total.shipping_amount),e.R7$(1),e.Y8G("dir",n.isArabic()?"rtl":"ltr")("lang",n.isArabic()?"ar":"en"),e.R7$(4),e.JRh(e.bMT(24,28,"dashboard.tax fee")),e.R7$(3),e.JRh(null==n.data?null:n.data.vendor_total.tax_fee),e.R7$(4),e.JRh(e.bMT(31,30,"dashboard.service fee")),e.R7$(3),e.JRh(null==n.data?null:n.data.vendor_total.service_fee),e.R7$(4),e.JRh(e.bMT(38,32,"dashboard.discount")),e.R7$(3),e.JRh(null==n.data?null:n.data.vendor_total.saved),e.R7$(2),e.FS9("currentPageReportTemplate",e.i5U(44,34,"dashboard.SHOWING_ENTRIES",e.sMw(37,C,r.first,r.rows?r.first+(r.rows-1):0,r.totalRecords))),e.Y8G("value",n.products)("paginator",!0)("rows",10)("rowsPerPageOptions",e.lJ4(41,$))("first",n.first)("showCurrentPageReport",!0)("rowHover",!0)("filterDelay",0)}}function M(o,d){if(1&o){const r=e.RV6();e.j41(0,"div",20)(1,"div",21)(2,"div",22,23),e.nrm(4,"app-receipt",24),e.k0s(),e.j41(5,"div",25)(6,"button",26),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.print())}),e.EFF(7,"Print"),e.k0s(),e.j41(8,"button",26),e.bIt("click",function(){e.eBV(r);const t=e.XpG();return e.Njj(t.toggleReceipt())}),e.EFF(9,"Cancel"),e.k0s()()()()}if(2&o){const r=e.XpG();e.R7$(4),e.Y8G("order",r.orderData)}}function P(o,d){1&o&&(e.j41(0,"div",27),e.nrm(1,"app-loading"),e.k0s())}let I=(()=>{class o{constructor(r,n,t,i){this._AdminDashboardService=r,this._ActivatedRoute=n,this.translate=t,this._CommonService=i,this.Oid="",this.first=0,this.loading=!0,this.currentLang="",this.showReceipt=!1}ngOnInit(){this.getOid(),this.getId(),this._CommonService.vendorCurrentLang.subscribe({next:r=>{this.currentLang=r,this.getOrderDetails()},error:r=>{console.log(r)}})}getOid(){this._ActivatedRoute.paramMap.subscribe({next:r=>{this.Oid=r.params.oid,console.log(this.Oid)},error:r=>{console.log(r)}})}getId(){const r=localStorage.getItem("eToken");if(null!==r){const n=(0,h.s)(r);this.id=n,console.log(this.id),console.log(this.id.vendor_id)}else this.id="notLogin"}getOrderDetails(){this.loading=!0,this._AdminDashboardService.getOrderDetails(this.id.vendor_id,this.Oid,this.currentLang).subscribe({next:r=>{this.orderData=r,console.log(r),this.products=r.orderitem,this.data=r,this.loading=!1},error:r=>{console.log(r)}})}isArabic(){return"ar"===this.translate.currentLang}toggleReceipt(){this.showReceipt=!this.showReceipt}print(){if(!this.printSection)return;const r=this.printSection.nativeElement.cloneNode(!0);r.querySelectorAll("img").forEach(s=>{const p=s.getAttribute("src");p&&!p.startsWith("http")&&(s.src=`${location.origin}/${p}`)});const n=r.innerHTML,t=Array.from(document.querySelectorAll('link[rel="stylesheet"], style')).map(s=>s.outerHTML).join(""),i=window.open("","_blank","width=800,height=600");i&&(i.document.open(),i.document.write(`\n      <html>\n        <head>\n          ${t}\n        </head>\n        <body onload="window.print(); window.close();">\n          ${n}\n        </body>\n      </html>\n    `),i.document.close())}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(b.p),e.rXU(v.nX),e.rXU(c.c$),e.rXU(E.h))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-order-details"]],viewQuery:function(n,t){if(1&n&&e.GBs(_,5),2&n){let i;e.mGM(i=e.lsd())&&(t.printSection=i.first)}},standalone:!0,features:[e.aNF],decls:7,vars:3,consts:[["class","container-fluid text-capitalize py-3",4,"ngIf","ngIfElse"],[2,"display","flex","justify-content","center"],[2,"background-color","#a00000","color","white","padding","8px 16px","border","none","border-radius","6px","cursor","pointer",3,"click"],["class","modal-backdrop",4,"ngIf"],["notload",""],[1,"container-fluid","text-capitalize","py-3"],[1,"h3"],[1,"fa-solid","fa-cart-shopping","text-info"],[1,"row","mt-4",3,"dir","lang"],[1,"col-12","col-sm-6","col-md-4","mb-3"],[1,"shadow","text-center","py-4","h-100","rounded-3","flex-column","d-flex"],[1,"row","my-4",3,"dir","lang"],[1,"table-responsive"],["styleClass","p-datatable-striped","dataKey","id",3,"value","paginator","rows","rowsPerPageOptions","first","showCurrentPageReport","rowHover","filterDelay","currentPageReportTemplate"],["dt2",""],["pTemplate","header"],["pTemplate","body"],[1,"text-capitalize"],["defaultImage","./assets/placeholder/placeholder2.jpg","width","70","height","70",1,"rounded-5",3,"src","useSrcset","lazyLoad","alt","error"],[1,"fs-6","fw-bold"],[1,"modal-backdrop"],[1,"modal-content"],["id","print-section"],["printSection",""],[3,"order"],[1,"modal-actions"],[3,"click"],[1,"d-flex","justify-content-center","align-items-center","vh-100"]],template:function(n,t){if(1&n&&(e.DNE(0,y,47,42,"section",0),e.j41(1,"div",1)(2,"button",2),e.bIt("click",function(){return t.toggleReceipt()}),e.EFF(3," Show Receipt "),e.k0s()(),e.DNE(4,M,10,1,"div",3),e.DNE(5,P,2,0,"ng-template",null,4,e.C5r)),2&n){const i=e.sdS(6);e.Y8G("ngIf",!t.loading)("ngIfElse",i),e.R7$(4),e.Y8G("ngIf",t.showReceipt)}},dependencies:[a.MD,a.bT,m.bG,m.XI,j.Ei,c.h,c.D9,g.Un,g.Je,F.q,R],styles:['@charset "UTF-8";tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}[lang=ar][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:999}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;width:850px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0006;position:relative}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px;gap:10px}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#a00000;color:#fff;padding:10px 20px;border:none;cursor:pointer}@media print{body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:not(#print-section):not(#print-section   *)[_ngcontent-%COMP%]{display:none!important}#print-section[_ngcontent-%COMP%]{position:static;width:100%;box-shadow:none;padding:0}.modal-actions[_ngcontent-%COMP%]{display:none}}.main-content[_ngcontent-%COMP%]{margin-left:250px;transition:margin-left .3s ease}@media (max-width: 992px){.main-content[_ngcontent-%COMP%]{margin-left:0}}']})}}return o})()}}]);