"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[9215],{9215:(m,p,r)=>{r.r(p),r.d(p,{CheckoutComponent:()=>D});var l=r(177),a=r(9417),d=r(8147),t=r(7019),g=r(2571),_=r(3664),u=r(9120),f=r(8240),h=r(1870),C=r(1626);function M(o,i){if(1&o&&(t.j41(0,"p",33)(1,"span"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.nI1(6,"currency"),t.k0s()()),2&o){const e=t.XpG();t.R7$(2),t.JRh(t.bMT(3,2,"cart.Discount")),t.R7$(3),t.JRh(t.i5U(6,4,e.orderData.saved," EGP "))}}function b(o,i){if(1&o&&(t.j41(0,"p",34),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.SpI(" ",t.i5U(2,1,e.orderData.initial_total," EGP ")," ")}}const I=function(){return{standalone:!0}};function E(o,i){if(1&o){const e=t.RV6();t.qex(0),t.j41(1,"input",49),t.bIt("ngModelChange",function(n){t.eBV(e);const c=t.XpG(2);return t.Njj(c.phone=n)}),t.k0s(),t.bVm()}if(2&o){const e=t.XpG(2);t.R7$(1),t.Y8G("ngModel",e.phone)("ngModelOptions",t.lJ4(2,I))}}function v(o,i){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",35),t.nrm(2,"input",36,37),t.nI1(4,"translate"),t.j41(5,"button",38),t.bIt("click",function(){t.eBV(e);const n=t.sdS(3),c=t.XpG();return t.Njj(c.applyCopon(n.value))}),t.nrm(6,"i",39),t.k0s()(),t.j41(7,"form",40),t.bIt("ngSubmit",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submitForm())}),t.j41(8,"div",41)(9,"div",42)(10,"label"),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.j41(13,"select",43),t.bIt("ngModelChange",function(n){t.eBV(e);const c=t.XpG();return t.Njj(c.paymentMethod=n)})("change",function(n){t.eBV(e);const c=t.XpG();return t.Njj(c.setPaymentMethod(n.target))}),t.j41(14,"option",44),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"option",45),t.EFF(18),t.nI1(19,"translate"),t.k0s(),t.j41(20,"option",46),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.DNE(23,E,2,3,"ng-container",30),t.k0s()(),t.j41(24,"button",47),t.EFF(25),t.nI1(26,"translate"),t.nrm(27,"i",48),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(2),t.FS9("placeholder",t.bMT(4,11,"cart.Enter Your Code")),t.R7$(5),t.Y8G("action","https://levado-ecommerce-api.onrender.com/api/v1/paymob-test/"+e.orderId+"/"+e.paymentMethod+"/",t.B4B),t.R7$(4),t.SpI("",t.bMT(12,13,"cart.Payment Method")," :"),t.R7$(2),t.Y8G("ngModel",e.paymentMethod),t.R7$(2),t.SpI(" ",t.bMT(16,15,"cart.Select Payment Method")," "),t.R7$(3),t.JRh(t.bMT(19,17,"cart.Card")),t.R7$(3),t.SpI(" ",t.bMT(22,19,"cart.Wallet")," "),t.R7$(2),t.Y8G("ngIf","wallet"==e.paymentMethod),t.R7$(1),t.xc7("background-color","#3B5998"),t.R7$(1),t.SpI(" ",t.bMT(26,21,"cart.Checkout Now")," ")}}function y(o,i){1&o&&t.nrm(0,"i",58)}function R(o,i){1&o&&t.nrm(0,"i",59)}function k(o,i){1&o&&t.nrm(0,"i",60)}function x(o,i){if(1&o&&(t.j41(0,"p",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.SpI(" ",t.bMT(2,1,"cart."+e.codeMsgSuccess)," ")}}function F(o,i){if(1&o&&(t.j41(0,"p",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.SpI(" ",t.bMT(2,1,"cart."+e.codeMsgWarning)," ")}}function j(o,i){if(1&o&&(t.j41(0,"p",61),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.SpI(" ",t.bMT(2,1,"cart."+e.codeMsgError)," ")}}function T(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",50)(1,"div",51)(2,"div",52),t.DNE(3,y,1,0,"i",53),t.DNE(4,R,1,0,"i",54),t.DNE(5,k,1,0,"i",55),t.DNE(6,x,3,3,"p",56),t.DNE(7,F,3,3,"p",56),t.DNE(8,j,3,3,"p",56),t.j41(9,"button",57),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeCoponAlert())}),t.EFF(10),t.nI1(11,"translate"),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(1),t.Y8G("dir",e.isArabic()?"rtl":"ltr"),t.R7$(2),t.Y8G("ngIf",e.codeMsgSuccess),t.R7$(1),t.Y8G("ngIf",e.codeMsgWarning),t.R7$(1),t.Y8G("ngIf",e.codeMsgError),t.R7$(1),t.Y8G("ngIf",e.codeMsgSuccess),t.R7$(1),t.Y8G("ngIf",e.codeMsgWarning),t.R7$(1),t.Y8G("ngIf",e.codeMsgError),t.R7$(2),t.SpI(" ",t.bMT(11,8,"cart.Close")," ")}}let D=(()=>{class o{constructor(e,s,n,c,$,P,S,O,G,w){this._CommonService=e,this._FormBuilder=s,this._Renderer2=n,this._AuthService=c,this._PaymentService=$,this._CartService=P,this._ActivatedRoute=S,this.http=O,this._Router=G,this.translate=w,this.shippingAddress=this._FormBuilder.group({full_name:[""],email:[""],phone:[""],Address:[""],City:[""],State:[""],Country:[""]}),this.userInfo={},this.userAddress={},this.orderId="",this.userId=0,this.codeMsgSuccess="",this.codeMsgWarning="",this.codeMsgError="",this.currentLang="",this.orderData={},this.paymentMethod="",this.phone=""}setPaymentMethod(e){this.paymentMethod=e.value}submitForm(){let e=`https://omera2-production.up.railway.app/api/v1/paymob-test/${this.orderId}/${this.paymentMethod}/`;"wallet"===this.paymentMethod&&(e+=`?phone_num=${this.phone}`),console.log("url",e),window.location.href=e}getOrderDetails(){this._CartService.getOrderDetails(this.orderId).subscribe({next:e=>{console.log(e),this.orderData=e,this.shippingAddress.get("full_name")?.setValue(e.full_name),this.shippingAddress.get("email")?.setValue(e.email),this.shippingAddress.get("phone")?.setValue(e.mobile),this.shippingAddress.get("Address")?.setValue(e.address),this.shippingAddress.get("City")?.setValue(e.city),this.shippingAddress.get("State")?.setValue(e.state),this.shippingAddress.get("Country")?.setValue(e.country),this.discount="0.00"!==e.saved},error:e=>{console.log(e)}})}ngOnInit(){this._CommonService.currentLang.subscribe({next:e=>{console.log(e),this.currentLang=e},error:e=>{console.log(e)}}),this._ActivatedRoute.paramMap.subscribe({next:e=>{console.log(e.get("id")),this.orderId=e.get("id")},error:e=>{console.log(e)}}),this.getOrderDetails(),this._AuthService.decodeToken(),this.userId=this._AuthService.userInfo.user_id,console.log(this.userId),this._CartService.getUserCart(this.userId,this.userId,this.currentLang).subscribe({next:e=>{this.itemsCartCount=e.length,console.log(e.length)},error:e=>{console.log(e)}})}applyCopon(e){this._PaymentService.applyCopon({coupon_code:e,order_oid:this.orderId}).subscribe({next:n=>{console.log(n),"success"==n.icon?(this.codeMsgSuccess="Coupon Activated",this.getOrderDetails()):"warning"==n.icon?this.codeMsgWarning="Coupon Already Activated":"error"==n.icon&&(this.codeMsgError="Coupon Does Not Exist")},error:n=>{console.log(n)}})}payStripe(){return`https://levado-ecommerce-api.onrender.com/api/v1/stripe-checkout/${this.orderId}/${this.userId}/`}closeCoponAlert(){this.codeMsgSuccess="",this.codeMsgWarning="",this.codeMsgError=""}isArabic(){return"ar"===this.translate.currentLang}static{this.\u0275fac=function(s){return new(s||o)(t.rXU(g.h),t.rXU(a.ok),t.rXU(t.sFG),t.rXU(_.u),t.rXU(u.W),t.rXU(f.m),t.rXU(h.nX),t.rXU(C.Qq),t.rXU(h.Ix),t.rXU(d.c$))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-checkout"]],standalone:!0,features:[t.aNF],decls:94,vars:72,consts:[[1,"my-5","p-3",3,"dir","lang"],[1,"container"],[1,"row","g-5"],[1,"col-md-8"],[1,"alert","alert-warning"],[1,"my-4"],[3,"formGroup"],["for","name"],["type","text","id","name","formControlName","full_name","readonly","",1,"form-control","w-100"],[1,"d-flex","justify-content-between","gap-3"],[1,"w-50"],["for","email"],["type","email","id","email","formControlName","email","readonly","",1,"form-control","w-100"],["for","phone"],["type","tel","id","phone","formControlName","phone","readonly","",1,"form-control","w-100"],["for","address"],["type","text","id","address","formControlName","Address","readonly","",1,"form-control","w-100"],["for","City"],["type","text","id","City","formControlName","City","readonly","",1,"form-control","w-100"],["for","State"],["type","text","id","State","formControlName","State","readonly","",1,"form-control","w-100"],["for","Country"],["type","tel","id","Country","formControlName","Country","readonly","",1,"form-control","w-100"],[1,"col-md-4"],[1,"mb-4"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center"],[1,"text-secondary"],["class","discount d-flex flex-wrap justify-content-between align-items-center",4,"ngIf"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","fw-bold"],["class","text-danger text-decoration-line-through small text-center",4,"ngIf"],[4,"ngIf"],[1,"col-md-12"],["class","layer position-fixed w-100 top-0 bottom-0 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"discount","d-flex","flex-wrap","justify-content-between","align-items-center"],[1,"text-danger","text-decoration-line-through","small","text-center"],[1,"copon","d-flex","flex-wrap","justify-content-between","align-items-center","shadow","mt-5","p-3","rounded-2"],["type","text",1,"py-2","form-control",3,"placeholder"],["code",""],["lang","en",1,"py-1","mx-auto",3,"click"],[1,"fa-solid","fa-check","text-white"],["method","GET",3,"action","ngSubmit"],[1,"shadow","p-3","d-flex","mt-4","mb-4"],[1,"d-flex","flex-wrap"],["name","paymentMethod",1,"form-select","mt-2",3,"ngModel","ngModelChange","change"],["value","","selected","","disabled",""],["value","card"],["value","wallet"],["lang","en","type","submit",1,"btn","btn-primary","btn-rounded","w-100","mt-2"],[1,"fas","fa-money-check-alt"],["type","text","placeholder","Enter wallet number",1,"form-control",2,"border","dashed 1px gray",3,"ngModel","ngModelOptions","ngModelChange"],[1,"layer","position-fixed","w-100","top-0","bottom-0","d-flex","justify-content-center","align-items-center"],[1,"rounded-3","contain",3,"dir"],[1,"p-5","py-5","d-flex","flex-column","justify-content-center","align-items-center","shadow"],["class","fa-solid fa-circle-check fa-3x text-success",4,"ngIf"],["class","fa-solid fa-triangle-exclamation fa-3x text-warning",4,"ngIf"],["class","fa-solid fa-circle-xmark fa-3x text-danger",4,"ngIf"],["class","h3 my-5",4,"ngIf"],[1,"btn","btn-danger","px-4","py-1",3,"click"],[1,"fa-solid","fa-circle-check","fa-3x","text-success"],[1,"fa-solid","fa-triangle-exclamation","fa-3x","text-warning"],[1,"fa-solid","fa-circle-xmark","fa-3x","text-danger"],[1,"h3","my-5"]],template:function(s,n){1&s&&(t.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"h4",5),t.EFF(8),t.nI1(9,"translate"),t.k0s(),t.j41(10,"form",6)(11,"div")(12,"label",7),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.nrm(15,"input",8),t.k0s(),t.j41(16,"div",9)(17,"div",10)(18,"label",11),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.nrm(21,"input",12),t.k0s(),t.j41(22,"div",10)(23,"label",13),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.nrm(26,"input",14),t.k0s()(),t.j41(27,"div",9)(28,"div",10)(29,"label",15),t.EFF(30),t.nI1(31,"translate"),t.k0s(),t.nrm(32,"input",16),t.k0s(),t.j41(33,"div",10)(34,"label",17),t.EFF(35),t.nI1(36,"translate"),t.k0s(),t.nrm(37,"input",18),t.k0s()(),t.j41(38,"div",9)(39,"div",10)(40,"label",19),t.EFF(41),t.nI1(42,"translate"),t.k0s(),t.nrm(43,"input",20),t.k0s(),t.j41(44,"div",10)(45,"label",21),t.EFF(46),t.nI1(47,"translate"),t.k0s(),t.nrm(48,"input",22),t.k0s()()()(),t.j41(49,"div",23)(50,"h5",24),t.EFF(51),t.nI1(52,"translate"),t.k0s(),t.j41(53,"p",25)(54,"span",26),t.EFF(55),t.nI1(56,"translate"),t.k0s(),t.j41(57,"span"),t.EFF(58),t.nI1(59,"currency"),t.k0s()(),t.j41(60,"p",25)(61,"span",26),t.EFF(62),t.nI1(63,"translate"),t.k0s(),t.j41(64,"span"),t.EFF(65),t.nI1(66,"currency"),t.k0s()(),t.j41(67,"p",25)(68,"span",26),t.EFF(69),t.nI1(70,"translate"),t.k0s(),t.j41(71,"span"),t.EFF(72),t.nI1(73,"currency"),t.k0s()(),t.j41(74,"p",25)(75,"span",26),t.EFF(76),t.nI1(77,"translate"),t.k0s(),t.j41(78,"span"),t.EFF(79),t.nI1(80,"currency"),t.k0s()(),t.DNE(81,M,7,7,"p",27),t.nrm(82,"hr"),t.j41(83,"p",28)(84,"span"),t.EFF(85),t.nI1(86,"translate"),t.k0s(),t.j41(87,"span"),t.DNE(88,b,3,4,"p",29),t.EFF(89),t.nI1(90,"currency"),t.k0s()(),t.DNE(91,v,28,23,"div",30),t.k0s(),t.nrm(92,"div",31),t.k0s()()(),t.DNE(93,T,12,10,"div",32)),2&s&&(t.Y8G("dir",n.isArabic()?"rtl":"ltr")("lang",n.isArabic()?"ar":"en"),t.R7$(5),t.SpI(" ",t.bMT(6,27,"cart.Review Your Shipping & Order Details")," "),t.R7$(3),t.JRh(t.bMT(9,29,"cart.Shipping Address")),t.R7$(2),t.Y8G("formGroup",n.shippingAddress),t.R7$(3),t.JRh(t.bMT(14,31,"cart.Full Name")),t.R7$(6),t.JRh(t.bMT(20,33,"cart.Email")),t.R7$(5),t.SpI(" ",t.bMT(25,35,"cart.Mobile"),""),t.R7$(6),t.SpI(" ",t.bMT(31,37,"cart.Address"),""),t.R7$(5),t.SpI(" ",t.bMT(36,39,"cart.City"),""),t.R7$(6),t.SpI(" ",t.bMT(42,41,"cart.State"),""),t.R7$(5),t.SpI(" ",t.bMT(47,43,"cart.Country"),""),t.R7$(5),t.JRh(t.bMT(52,45,"cart.Cart Summary")),t.R7$(4),t.JRh(t.bMT(56,47,"cart.Subtotal")),t.R7$(3),t.JRh(t.i5U(59,49,n.orderData.sub_total," EGP ")),t.R7$(4),t.JRh(t.bMT(63,52,"cart.Shipping")),t.R7$(3),t.JRh(t.i5U(66,54,n.orderData.shipping_amount," EGP ")),t.R7$(4),t.JRh(t.bMT(70,57,"cart.Tax")),t.R7$(3),t.JRh(t.i5U(73,59,n.orderData.tax_fee," EGP ")),t.R7$(4),t.JRh(t.bMT(77,62,"cart.Service Fee")),t.R7$(3),t.JRh(t.i5U(80,64,n.orderData.service_fee," EGP ")),t.R7$(2),t.Y8G("ngIf",n.discount),t.R7$(4),t.JRh(t.bMT(86,67,"cart.Total")),t.R7$(3),t.Y8G("ngIf",n.discount),t.R7$(1),t.SpI(" ",t.i5U(90,69,n.orderData.total," EGP ")," "),t.R7$(2),t.Y8G("ngIf",0!==n.itemsCartCount),t.R7$(2),t.Y8G("ngIf",n.codeMsgError||n.codeMsgSuccess||n.codeMsgWarning))},dependencies:[l.MD,l.bT,l.oe,a.X1,a.qT,a.xH,a.y7,a.me,a.wz,a.BC,a.cb,a.j4,a.JD,a.YN,a.vS,a.cV,d.h,d.D9],styles:["form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:light-dark(rgb(232,240,254),rgba(70,90,126,.4))!important}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--bs-border-color);outline:0;box-shadow:none}.copon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background-color:#fff}.copon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:25%;border-radius:10px;background-color:#1e891e;border:none;transition:.3s}.copon[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#168427}.stripe[_ngcontent-%COMP%]{background-color:var(--main-color);transition:.3s}.stripe[_ngcontent-%COMP%]:hover{background-color:#15263e}.layer[_ngcontent-%COMP%]{z-index:99999;background-color:#0000008d}.layer[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]{min-width:300px;background-color:#fff}.discount[_ngcontent-%COMP%]{color:#1abb1a}input[_ngcontent-%COMP%]{margin:15px 0}"]})}}return o})()},2571:(m,p,r)=>{r.d(p,{h:()=>d});var l=r(4412),a=r(7019);let d=(()=>{class t{constructor(){this.currentLang=new l.t("en"),this.vendorCurrentLang=new l.t("en"),this.currency=new l.t({label:"EGP",icon:"fi-eg"})}static{this.\u0275fac=function(u){return new(u||t)}}static{this.\u0275prov=a.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})()}}]);