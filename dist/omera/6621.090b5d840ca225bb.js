"use strict";(self.webpackChunkOmera=self.webpackChunkOmera||[]).push([[6621],{6621:(b,l,n)=>{n.r(l),n.d(l,{NotificationsComponent:()=>f});var o=n(177),a=n(8147),t=n(7019),d=n(1875),h=n(3664);function p(s,c){if(1&s){const e=t.RV6();t.j41(0,"div",6)(1,"h5",7),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"p",8),t.EFF(5),t.nI1(6,"translate"),t.j41(7,"span",9),t.EFF(8),t.k0s(),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"p")(12,"span",10),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.EFF(15),t.nI1(16,"currency"),t.k0s(),t.j41(17,"p")(18,"span",10),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.EFF(21),t.nI1(22,"currency"),t.k0s(),t.j41(23,"p")(24,"span",10),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.EFF(27),t.nI1(28,"currency"),t.k0s(),t.j41(29,"p")(30,"span",10),t.EFF(31),t.nI1(32,"translate"),t.k0s(),t.EFF(33),t.nI1(34,"currency"),t.k0s(),t.j41(35,"button",11),t.bIt("click",function(){const m=t.eBV(e).$implicit,I=t.XpG(2);return t.Njj(I.markAsRead(m.id))}),t.EFF(36),t.nI1(37,"translate"),t.nrm(38,"i",12),t.k0s()()}if(2&s){const e=c.$implicit;t.R7$(2),t.JRh(t.bMT(3,13,"customerDashboard.New Order !")),t.R7$(3),t.SpI("",t.bMT(6,15,"customerDashboard.This Order")," "),t.R7$(3),t.SpI("#",e.order.oid,""),t.R7$(1),t.SpI(" ",t.bMT(10,17,"customerDashboard.Was Done Successfull"),""),t.R7$(4),t.SpI("",t.bMT(14,19,"cart.Total")," :"),t.R7$(2),t.SpI(" ",t.i5U(16,21,e.order.total," EGP "),""),t.R7$(4),t.SpI("",t.bMT(20,24,"cart.Shipping")," :"),t.R7$(2),t.SpI(" ",t.i5U(22,26,e.order.shipping_amount," EGP "),""),t.R7$(4),t.SpI("",t.bMT(26,29,"cart.Tax")," :"),t.R7$(2),t.SpI(" ",t.i5U(28,31,e.order.tax_fee," EGP "),""),t.R7$(4),t.SpI("",t.bMT(32,34,"cart.Service Fee")," :"),t.R7$(2),t.SpI(" ",t.i5U(34,36,e.order.service_fee," EGP "),""),t.R7$(3),t.SpI("",t.bMT(37,39,"customerDashboard.Mark as read")," ")}}function u(s,c){1&s&&(t.j41(0,"div",13)(1,"p",14),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"img",15),t.k0s()()),2&s&&(t.R7$(2),t.SpI("",t.bMT(3,1,"customerDashboard.No notifications exist")," "))}function _(s,c){if(1&s&&(t.j41(0,"section",1)(1,"h4"),t.nrm(2,"i",2),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"div",3),t.DNE(6,p,39,41,"div",4),t.DNE(7,u,5,3,"div",5),t.k0s()()),2&s){const e=t.XpG();t.Y8G("dir",e.isArabic()?"rtl":"ltr"),t.R7$(3),t.SpI(" ",t.bMT(4,5,"customerDashboard.Notifications")," "),t.R7$(2),t.Y8G("lang",e.isArabic()?"ar":"en"),t.R7$(1),t.Y8G("ngForOf",e.allNotifications),t.R7$(1),t.Y8G("ngIf",0==e.allNotifications.length)}}let f=(()=>{class s{constructor(e,i,r){this._CustomerDashboardService=e,this._AuthService=i,this.translate=r,this.userId=0,this.allNotifications=[],this.render=!1}getAllNotifications(){this._CustomerDashboardService.allNotifications(this.userId).subscribe({next:e=>{console.log(e),this.allNotifications=e,this._CustomerDashboardService.notificationsCount.next(this.allNotifications.length),this.render=!0},error:e=>{console.log(e),this.render=!0}})}ngOnInit(){this._AuthService.decodeToken(),this.userId=this._AuthService.userInfo.user_id,console.log(this.userId),this.getAllNotifications()}markAsRead(e){this._CustomerDashboardService.notificationRead(this.userId,e).subscribe({next:i=>{console.log(i),this.getAllNotifications()},error:i=>{console.log(i)}})}isArabic(){return"ar"===this.translate.currentLang}static{this.\u0275fac=function(i){return new(i||s)(t.rXU(d.m),t.rXU(h.u),t.rXU(a.c$))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-notifications"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"dir",4,"ngIf"],[3,"dir"],[1,"fa-solid","fa-bell","text-prim","fs-2"],[1,"mt-4",3,"lang"],["class","notificationCard border border-1 rounded-2 shadow my-3 p-3",4,"ngFor","ngForOf"],["class","p-3 rounded-2 shadow",4,"ngIf"],[1,"notificationCard","border","border-1","rounded-2","shadow","my-3","p-3"],[1,"text-prim","fw-bold"],[1,"fw-bold"],[1,"text-prim"],[1,"text-main","fw-bolder"],[1,"read","btn","btn-success","px-3","py-1","mt-2","text-white",3,"click"],["lang","en",1,"fa-regular","fa-eye"],[1,"p-3","rounded-2","shadow"],[1,"h1","text-prim","text-center"],["src","./assets/notification.png","alt","","height","80"]],template:function(i,r){1&i&&t.DNE(0,_,8,7,"section",0),2&i&&t.Y8G("ngIf",r.render)},dependencies:[o.MD,o.Sq,o.bT,o.oe,a.h,a.D9],styles:[".read[_ngcontent-%COMP%]{background-color:#117da1;transition:.2s}.read[_ngcontent-%COMP%]:hover{background-color:#0f5f7a}"]})}}return s})()}}]);